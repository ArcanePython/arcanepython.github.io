function $parcel$export(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function $parcel$defineInteropFlag(e){Object.defineProperty(e,"__esModule",{value:!0,configurable:!0})}var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire19e8;null==parcelRequire&&(parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var n={id:e,exports:{}};return $parcel$modules[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r},parcelRequire.register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire19e8=parcelRequire),parcelRequire.register("27Lyk",(function(e,t){var n,r;$parcel$export(e.exports,"register",(()=>n),(e=>n=e)),$parcel$export(e.exports,"resolve",(()=>r),(e=>r=e));var i={};n=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},r=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),parcelRequire.register("4NnDh",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MouseListener=e.exports.MouseState=void 0;class n{constructor(){this.changewheel=!1,this.changedrag=!1,this.dragging=!1,this.totaldelta=0,this.delta=0,this.sx=this.sy="0.5",this.x=this.y=.5,this.dragpx0=this.dragpy0=0,this.dragx0=this.dragy0=0,this.dragdistance=10,this.dragpdistance=0}}e.exports.MouseState=n;e.exports.MouseListener=class{constructor(e){this.state={count:0},this.controlkeydown=!1,this.mouse=new n,this.state={count:0},e.addEventListener("keydown",(e=>{console.log("keydown "+e.ctrlKey),e.ctrlKey&&(this.controlkeydown=!0)})),e.addEventListener("keyup",(e=>{console.log("keyup "+e.ctrlKey),e.ctrlKey||(this.controlkeydown=!1)})),e.addEventListener("wheel",(e=>(this.mouse.changewheel=!0,this.mouse.delta=Math.sign(e.deltaY),console.log("delta="+this.mouse.delta+" totaldelta="+this.mouse.totaldelta),this.mouse.delta<0&&this.mouse.totaldelta--,this.mouse.delta>0&&this.mouse.totaldelta++,null!=this.OnMouseWheel&&this.OnMouseWheel(this.mouse.totaldelta.toString()),e.preventDefault(),e.stopPropagation(),!1))),e.onmousedown=t=>{this.mouse.button=t.button,this.mouse.down=!0,this.mouse.dragpx0=t.x,this.mouse.dragpy0=e.height-t.y,null!=this.OnMouseDown&&this.OnMouseDown(this.mouse.sx+" "+this.mouse.sy),this.mouse.dragx0=this.mouse.x,this.mouse.dragy0=this.mouse.y,this.mouse.dragging=!0,t.cancelBubble=!0},e.onmouseup=e=>{this.mouse.down=!1,null==this.mouse.dragvector?null!=this.OnMouseUp&&this.OnMouseUp(this.mouse.sx+" "+this.mouse.sy+" clickat"):null!=this.OnMouseUp&&this.OnMouseUp(this.mouse.sx+" "+this.mouse.sy+" dragging: v="+this.mouse.dragvector+" d="+this.mouse.dragdistance),this.mouse.dragging=!1,delete this.mouse.dragvector},e.onmousemove=e=>{var t=document.getElementById("c");let n=t.getBoundingClientRect();if(this.mouse.px=e.x,this.mouse.py=t.height-e.y,this.mouse.x=(e.x-n.left)/t.width,this.mouse.x=2*this.mouse.x-1,this.mouse.y=(t.height-(e.y-n.top))/t.height,this.mouse.y=2*this.mouse.y-1,this.mouse.sy=this.mouse.y.toFixed(2),this.mouse.sx=this.mouse.x.toFixed(2),this.state.count+=1,this.mouse.dragging){var r=this.mouse.px-this.mouse.dragpx0,i=this.mouse.py-this.mouse.dragpy0,a=this.mouse.x-this.mouse.dragx0,o=this.mouse.y-this.mouse.dragy0,s=Math.sqrt(a*a+o*o),l=Math.sqrt(r*r+i*i);this.mouse.dragvector=[a/s,o/s],this.mouse.dragdistance=s,this.mouse.dragpdistance=l}null!=this.OnMouseMove&&this.OnMouseMove(this.mouse.sx+" "+this.mouse.sy),t.oncontextmenu=e=>e.preventDefault()}}mousewheeleventdone(){this.mouse.changewheel=!1}drageventdone(){this.mouse.changedrag=!1}}})),parcelRequire.register("fnNZ9",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ManyTexturesScene=e.exports.Tdrawitem=void 0;const o=a(parcelRequire("4FuR6")),s=i(parcelRequire("hYurQ"));class l{constructor(e,t){this.do=e,this.obj=t}static getTwglDrawObjects(e){var t=[];return e.forEach((e=>t.push(e.do))),t}}e.exports.Tdrawitem=l;class u{constructor(e){this.scenesize=40,this.sceneenv=1,this.vertexShaderSource="",this.fragmentShaderSource="",this.twglprograminfo=null,this.baseHue=this.rand(300),this.numObjects=200,this.spreadRadius=this.numObjects/10,this.dtime=.02,this.drawItems=[],this.textures=null,this.ctx2D=null,this.one_point_vs="#version 300 es\n        \n    uniform mat4 u_worldViewProjection;\n\n    in vec4 a_position;\n    in vec2 a_texcoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      v_texCoord = a_texcoord;\n      gl_Position = u_worldViewProjection * a_position;\n    }\n    ",this.one_point_fs="#version 300 es\n    precision highp float;\n\n    in vec2 v_texCoord;\n\n    uniform vec4 u_diffuseMult;\n    uniform sampler2D u_diffuse;\n\n    out vec4 outColor;\n\n    void main() {\n      vec4 diffuseColor = texture(u_diffuse, v_texCoord) * u_diffuseMult;\n      if (diffuseColor.a < 0.1) {\n        discard;\n      }\n      outColor = diffuseColor;\n    }\n    ",this.env_map_vs="#version 300 es\n\n    uniform mat4 u_viewInverse;\n    uniform mat4 u_world;\n    uniform mat4 u_worldViewProjection;\n    uniform mat4 u_worldInverseTranspose;\n\n    in vec4 a_position;\n    in vec3 a_normal;\n\n    out vec3 v_normal;\n    out vec3 v_surfaceToView;\n\n    void main() {\n      v_normal = (u_worldInverseTranspose * vec4(a_normal, 0)).xyz;\n      v_surfaceToView = (u_viewInverse[3] - (u_world * a_position)).xyz;\n      gl_Position = u_worldViewProjection * a_position;\n    }\n    ",this.env_map_fs="#version 300 es\n    precision mediump float;\n\n    uniform samplerCube u_texture;\n\n    in vec3 v_surfaceToView;\n    in vec3 v_normal;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 normal = normalize(v_normal);\n      vec3 surfaceToView = normalize(v_surfaceToView);\n      vec4 color = texture(u_texture, -reflect(surfaceToView, normal));\n      outColor = color;\n    }\n    ",u.instance=this,this.twglprograminfo=new Array(3),this.twglprograminfo[1]=s.createProgramInfo(e,[this.one_point_vs,this.one_point_fs]),this.twglprograminfo[2]=s.createProgramInfo(e,[this.env_map_vs,this.env_map_fs])}defaultCamera(e,t){}extendGUI(e){console.log("=> manyTextures extendGUI movetail"+this.animationParameters),e.add(this.animationParameters,"movetail"),e.add(this.animationParameters,"fov",5,85,1),e.updateDisplay(),console.log("<= manyTextures extendGUI")}rand(e,t){return void 0===t&&(t=e,e=0),e+Math.random()*(t-e)}drawCircle2D(e){null!=this.ctx2D&&(this.ctx2D.fillStyle="#00f",this.ctx2D.strokeStyle="#ff0",this.ctx2D.lineWidth=10,this.ctx2D.fillRect(0,0,this.ctx2D.canvas.width,this.ctx2D.canvas.height),this.ctx2D.beginPath(),this.ctx2D.arc(this.ctx2D.canvas.width/2,this.ctx2D.canvas.height/2,this.ctx2D.canvas.width/2.2*Math.abs(Math.cos(e)),0,2*Math.PI),this.ctx2D.stroke())}CreateAllTextures(e,t,n,r,i){var a=parcelRequire("6sBfR"),o=parcelRequire("1sBOu"),l=parcelRequire("7Clsh"),u=parcelRequire("4KiTC"),c=parcelRequire("eFNrz"),h=parcelRequire("2Fz3v"),f=parcelRequire("53UYj"),d=parcelRequire("2GtWk"),p=parcelRequire("ehFNO");return s.createTextures(e,{hftIcon:{src:d,mag:e.NEAREST},clover:{src:f},fromCanvas:{src:t.canvas},yokohama:{target:e.TEXTURE_CUBE_MAP,src:[a,o,l,u,c,h]},goldengate:{target:e.TEXTURE_CUBE_MAP,src:p},checker:{mag:e.NEAREST,min:e.LINEAR,src:[255,255,255,255,192,192,192,255,92,92,92,255,255,255,255,255]},stripe:{mag:e.NEAREST,min:e.LINEAR,format:e.LUMINANCE,src:new Uint8Array([255,128,255,128,255,128,255,128]),width:1},cubemapFromArray:{target:e.TEXTURE_CUBE_MAP,format:e.RGBA,src:[240,128,128,255,128,224,128,255,128,128,208,255,192,128,128,255,128,176,128,255,143,128,0,255]},cubemapFromCanvas:{target:e.TEXTURE_CUBE_MAP,src:null==n?void 0:n.canvas},cubemapFrom6Canvases:{target:e.TEXTURE_CUBE_MAP,src:r}},i)}resizeCanvas(e){s.resizeCanvasToDisplaySize(e.canvas)}Prepare(e,t){s.setDefaults({attribPrefix:"a_"});const n=[s.primitives.createSphereBufferInfo(e,1,24,12),s.primitives.createCubeBufferInfo(e,2),s.primitives.createPlaneBufferInfo(e,2,2),s.primitives.createTruncatedConeBufferInfo(e,1,0,2,24,1)];this.ctx2D=document.createElement("canvas").getContext("2d"),this.ctx2D&&(this.ctx2D.canvas.width=64,this.ctx2D.canvas.height=64,this.drawCircle2D(0));const r=document.createElement("canvas").getContext("2d"),i=40;if(r){r.canvas.width=240,r.canvas.height=i,r.fillStyle="#888";for(let e=0;e<6;++e){const t=o.default.hsv((this.baseHue+10*e)%360,1-e/6,1);r.fillStyle=t.darken().hex(),r.fillRect(i*e,0,i,i),r.save(),r.translate(i*(e+.5),20),r.beginPath(),r.arc(0,0,12,0,2*Math.PI),r.fillStyle=t.hex(),r.fill(),r.restore()}}var a=new Array;for(let e=0;e<6;++e){const t=document.createElement("canvas");t.width=128,t.height=128;const n=t.getContext("2d"),r=o.default.hsv((this.baseHue+10*e)%360,1-e/6,1);null!=n&&(n.fillStyle=r.darken().hex(),n.fillRect(0,0,128,128),n.translate(64,64),n.rotate(.05*Math.PI),n.fillStyle=r.hex(),n.fillRect(-40,-40,80,80),a.push(t))}e&&this.ctx2D&&r&&(this.textures=this.CreateAllTextures(e,this.ctx2D,r,a,((e,r,i)=>{if(console.log("All textures created. scenesize="+this.scenesize),null!=this.textures&&null!=this.textures){const e=[this.textures.checker,this.textures.stripe,this.textures.hftIcon,this.textures.clover,this.textures.fromCanvas],t=[this.textures.yokohama,this.textures.goldengate,this.textures.cubemapFromCanvas,this.textures.cubemapFrom6Canvases,this.textures.cubemapFromArray];for(let r=0;r<this.numObjects;++r){let i,a,s;switch(0|this.rand(0,2)){case 0:s=n[r%n.length],a=this.twglprograminfo[1],i={u_diffuseMult:o.default.hsv((this.baseHue+this.rand(0,60))%360,.4,.8).gl(),u_diffuse:e[0|this.rand(0,e.length)],u_viewInverse:parcelRequire("hYurQ").m4.identity(),u_world:parcelRequire("hYurQ").m4.identity(),u_worldInverseTranspose:parcelRequire("hYurQ").m4.identity(),u_worldViewProjection:parcelRequire("hYurQ").m4.identity()};break;case 1:s=this.rand(0,2)<1?n[1]:n[3],a=this.twglprograminfo[2],i={u_texture:t[0|this.rand(0,t.length)],u_viewInverse:parcelRequire("hYurQ").m4.identity(),u_world:parcelRequire("hYurQ").m4.identity(),u_worldInverseTranspose:parcelRequire("hYurQ").m4.identity(),u_worldViewProjection:parcelRequire("hYurQ").m4.identity()};break;default:throw"wAT!"}this.drawItems.push(new l({programInfo:a,bufferInfo:s,uniforms:i},{translation:[this.rand(-this.spreadRadius,this.spreadRadius),this.rand(-this.spreadRadius,this.spreadRadius),this.rand(-this.spreadRadius,this.spreadRadius)],ySpeed:this.rand(1,3),zSpeed:this.rand(1,3),uniforms:i}))}}t(0)})),console.log("<= createAllTextures"))}initScene(e,t,n,r,i,a){this.Prepare(e,a)}drawScene(e,t,n){this.animationParameters.movetail?this.drawCircle2D(.01*n):this.drawCircle2D(1),s.setTextureFromElement(e,this.textures.fromCanvas,this.ctx2D.canvas);var r=parcelRequire("hYurQ").m4.identity();this.drawItems.forEach((e=>{const i=e.obj.uniforms,a=parcelRequire("hYurQ").m4.identity();parcelRequire("hYurQ").m4.translate(a,e.obj.translation,a),null!=this.animationParameters&&this.animationParameters.b.move&&(parcelRequire("hYurQ").m4.rotateY(a,this.animationParameters.b.speed*n*.05*e.obj.ySpeed,a),parcelRequire("hYurQ").m4.rotateZ(a,this.animationParameters.b.speed*n*.05*e.obj.zSpeed,a)),i.u_world=a,i.u_worldInverseTranspose=parcelRequire("hYurQ").m4.transpose(parcelRequire("hYurQ").m4.inverse(r)),parcelRequire("hYurQ").m4.multiply(t.viewProjection,a,i.u_worldViewProjection)})),s.drawObjectList(e,l.getTwglDrawObjects(this.drawItems))}}e.exports.ManyTexturesScene=u})),parcelRequire.register("4FuR6",(function(e,t){
/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */
e.exports,e.exports=function(){for(var e=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e<t?t:e>n?n:e},t=e,n=function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var n=0;n<=3;n++)n<3?((e[n]<0||e[n]>255)&&(e._clipped=!0),e[n]=t(e[n],0,255)):3===n&&(e[n]=t(e[n],0,1));return e},r={},i=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<a.length;i+=1){var o=a[i];r["[object "+o+"]"]=o.toLowerCase()}var s=function(e){return r[Object.prototype.toString.call(e)]||"object"},l=s,u=function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==l(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]},c=s,h=function(e){if(e.length<2)return null;var t=e.length-1;return"string"==c(e[t])?e[t].toLowerCase():null},f=Math.PI,d={clip_rgb:n,limit:e,type:s,unpack:u,last:h,PI:f,TWOPI:2*f,PITHIRD:f/3,DEG2RAD:f/180,RAD2DEG:180/f},p={format:{},autodetect:[]},m=d.last,g=d.clip_rgb,_=d.type,v=p,b=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this;if("object"===_(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var r=m(e),i=!1;if(!r){i=!0,v.sorted||(v.autodetect=v.autodetect.sort((function(e,t){return t.p-e.p})),v.sorted=!0);for(var a=0,o=v.autodetect;a<o.length;a+=1){var s=o[a];if(r=s.test.apply(s,e))break}}if(!v.format[r])throw new Error("unknown format: "+e);var l=v.format[r].apply(null,i?e:e.slice(0,-1));n._rgb=g(l),3===n._rgb.length&&n._rgb.push(1)};b.prototype.toString=function(){return"function"==_(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var x=b,y=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(y.Color,[null].concat(e)))};y.Color=x,y.version="2.4.2";var w=y,R=d.unpack,E=Math.max,A=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=R(e,"rgb"),r=n[0],i=n[1],a=n[2],o=1-E(r/=255,E(i/=255,a/=255)),s=o<1?1/(1-o):0;return[(1-r-o)*s,(1-i-o)*s,(1-a-o)*s,o]},T=A,P=d.unpack,k=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=P(e,"cmyk"))[0],r=e[1],i=e[2],a=e[3],o=e.length>4?e[4]:1;return 1===a?[0,0,0,o]:[n>=1?0:255*(1-n)*(1-a),r>=1?0:255*(1-r)*(1-a),i>=1?0:255*(1-i)*(1-a),o]},M=k,S=w,I=x,C=p,B=d.unpack,L=d.type,O=T;I.prototype.cmyk=function(){return O(this._rgb)},S.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(I,[null].concat(e,["cmyk"])))},C.format.cmyk=M,C.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=B(e,"cmyk"),"array"===L(e)&&4===e.length)return"cmyk"}});var F=d.unpack,D=d.last,j=function(e){return Math.round(100*e)/100},U=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=F(e,"hsla"),r=D(e)||"lsa";return n[0]=j(n[0]||0),n[1]=j(100*n[1])+"%",n[2]=j(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},N=U,$=d.unpack,q=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=$(e,"rgba"))[0],r=e[1],i=e[2];n/=255,r/=255,i/=255;var a,o,s=Math.min(n,r,i),l=Math.max(n,r,i),u=(l+s)/2;return l===s?(a=0,o=Number.NaN):a=u<.5?(l-s)/(l+s):(l-s)/(2-l-s),n==l?o=(r-i)/(l-s):r==l?o=2+(i-n)/(l-s):i==l&&(o=4+(n-r)/(l-s)),(o*=60)<0&&(o+=360),e.length>3&&void 0!==e[3]?[o,a,u,e[3]]:[o,a,u]},z=q,V=d.unpack,H=d.last,Y=N,G=z,W=Math.round,X=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=V(e,"rgba"),r=H(e)||"rgb";return"hsl"==r.substr(0,3)?Y(G(n),r):(n[0]=W(n[0]),n[1]=W(n[1]),n[2]=W(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},Q=X,K=d.unpack,J=Math.round,Z=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r,i,a,o=(t=K(t,"hsl"))[0],s=t[1],l=t[2];if(0===s)r=i=a=255*l;else{var u=[0,0,0],c=[0,0,0],h=l<.5?l*(1+s):l+s-l*s,f=2*l-h,d=o/360;u[0]=d+1/3,u[1]=d,u[2]=d-1/3;for(var p=0;p<3;p++)u[p]<0&&(u[p]+=1),u[p]>1&&(u[p]-=1),6*u[p]<1?c[p]=f+6*(h-f)*u[p]:2*u[p]<1?c[p]=h:3*u[p]<2?c[p]=f+(h-f)*(2/3-u[p])*6:c[p]=f;r=(e=[J(255*c[0]),J(255*c[1]),J(255*c[2])])[0],i=e[1],a=e[2]}return t.length>3?[r,i,a,t[3]]:[r,i,a,1]},ee=Z,te=ee,ne=p,re=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,ie=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,ae=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,oe=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,se=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,le=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,ue=Math.round,ce=function(e){var t;if(e=e.toLowerCase().trim(),ne.format.named)try{return ne.format.named(e)}catch(e){}if(t=e.match(re)){for(var n=t.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(t=e.match(ie)){for(var i=t.slice(1,5),a=0;a<4;a++)i[a]=+i[a];return i}if(t=e.match(ae)){for(var o=t.slice(1,4),s=0;s<3;s++)o[s]=ue(2.55*o[s]);return o[3]=1,o}if(t=e.match(oe)){for(var l=t.slice(1,5),u=0;u<3;u++)l[u]=ue(2.55*l[u]);return l[3]=+l[3],l}if(t=e.match(se)){var c=t.slice(1,4);c[1]*=.01,c[2]*=.01;var h=te(c);return h[3]=1,h}if(t=e.match(le)){var f=t.slice(1,4);f[1]*=.01,f[2]*=.01;var d=te(f);return d[3]=+t[4],d}};ce.test=function(e){return re.test(e)||ie.test(e)||ae.test(e)||oe.test(e)||se.test(e)||le.test(e)};var he=ce,fe=w,de=x,pe=p,me=d.type,ge=Q,_e=he;de.prototype.css=function(e){return ge(this._rgb,e)},fe.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(de,[null].concat(e,["css"])))},pe.format.css=_e,pe.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===me(e)&&_e.test(e))return"css"}});var ve=x,be=w,xe=p,ye=d.unpack;xe.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ye(e,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},be.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ve,[null].concat(e,["gl"])))},ve.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var we=d.unpack,Re=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=we(e,"rgb"),i=r[0],a=r[1],o=r[2],s=Math.min(i,a,o),l=Math.max(i,a,o),u=l-s,c=100*u/255,h=s/(255-u)*100;return 0===u?n=Number.NaN:(i===l&&(n=(a-o)/u),a===l&&(n=2+(o-i)/u),o===l&&(n=4+(i-a)/u),(n*=60)<0&&(n+=360)),[n,c,h]},Ee=Re,Ae=d.unpack,Te=Math.floor,Pe=function(){for(var e,t,n,r,i,a,o=[],s=arguments.length;s--;)o[s]=arguments[s];var l,u,c,h=(o=Ae(o,"hcg"))[0],f=o[1],d=o[2];d*=255;var p=255*f;if(0===f)l=u=c=d;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var m=Te(h/=60),g=h-m,_=d*(1-f),v=_+p*(1-g),b=_+p*g,x=_+p;switch(m){case 0:l=(e=[x,b,_])[0],u=e[1],c=e[2];break;case 1:l=(t=[v,x,_])[0],u=t[1],c=t[2];break;case 2:l=(n=[_,x,b])[0],u=n[1],c=n[2];break;case 3:l=(r=[_,v,x])[0],u=r[1],c=r[2];break;case 4:l=(i=[b,_,x])[0],u=i[1],c=i[2];break;case 5:l=(a=[x,_,v])[0],u=a[1],c=a[2]}}return[l,u,c,o.length>3?o[3]:1]},ke=Pe,Me=d.unpack,Se=d.type,Ie=w,Ce=x,Be=p,Le=Ee;Ce.prototype.hcg=function(){return Le(this._rgb)},Ie.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ce,[null].concat(e,["hcg"])))},Be.format.hcg=ke,Be.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Me(e,"hcg"),"array"===Se(e)&&3===e.length)return"hcg"}});var Oe=d.unpack,Fe=d.last,De=Math.round,je=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Oe(e,"rgba"),r=n[0],i=n[1],a=n[2],o=n[3],s=Fe(e)||"auto";void 0===o&&(o=1),"auto"===s&&(s=o<1?"rgba":"rgb");var l="000000"+((r=De(r))<<16|(i=De(i))<<8|(a=De(a))).toString(16);l=l.substr(l.length-6);var u="0"+De(255*o).toString(16);switch(u=u.substr(u.length-2),s.toLowerCase()){case"rgba":return"#"+l+u;case"argb":return"#"+u+l;default:return"#"+l}},Ue=je,Ne=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,$e=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,qe=function(e){if(e.match(Ne)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match($e)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var n=parseInt(e,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+e)},ze=w,Ve=x,He=d.type,Ye=p,Ge=Ue;Ve.prototype.hex=function(e){return Ge(this._rgb,e)},ze.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ve,[null].concat(e,["hex"])))},Ye.format.hex=qe,Ye.autodetect.push({p:4,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===He(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var We=d.unpack,Xe=d.TWOPI,Qe=Math.min,Ke=Math.sqrt,Je=Math.acos,Ze=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=We(e,"rgb"),i=r[0],a=r[1],o=r[2],s=Qe(i/=255,a/=255,o/=255),l=(i+a+o)/3,u=l>0?1-s/l:0;return 0===u?n=NaN:(n=(i-a+(i-o))/2,n/=Ke((i-a)*(i-a)+(i-o)*(a-o)),n=Je(n),o>a&&(n=Xe-n),n/=Xe),[360*n,u,l]},et=Ze,tt=d.unpack,nt=d.limit,rt=d.TWOPI,it=d.PITHIRD,at=Math.cos,ot=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,a=(e=tt(e,"hsi"))[0],o=e[1],s=e[2];return isNaN(a)&&(a=0),isNaN(o)&&(o=0),a>360&&(a-=360),a<0&&(a+=360),(a/=360)<1/3?r=1-((i=(1-o)/3)+(n=(1+o*at(rt*a)/at(it-rt*a))/3)):a<2/3?i=1-((n=(1-o)/3)+(r=(1+o*at(rt*(a-=1/3))/at(it-rt*a))/3)):n=1-((r=(1-o)/3)+(i=(1+o*at(rt*(a-=2/3))/at(it-rt*a))/3)),[255*(n=nt(s*n*3)),255*(r=nt(s*r*3)),255*(i=nt(s*i*3)),e.length>3?e[3]:1]},st=ot,lt=d.unpack,ut=d.type,ct=w,ht=x,ft=p,dt=et;ht.prototype.hsi=function(){return dt(this._rgb)},ct.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ht,[null].concat(e,["hsi"])))},ft.format.hsi=st,ft.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=lt(e,"hsi"),"array"===ut(e)&&3===e.length)return"hsi"}});var pt=d.unpack,mt=d.type,gt=w,_t=x,vt=p,bt=z;_t.prototype.hsl=function(){return bt(this._rgb)},gt.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_t,[null].concat(e,["hsl"])))},vt.format.hsl=ee,vt.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=pt(e,"hsl"),"array"===mt(e)&&3===e.length)return"hsl"}});var xt=d.unpack,yt=Math.min,wt=Math.max,Rt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,a=(e=xt(e,"rgb"))[0],o=e[1],s=e[2],l=yt(a,o,s),u=wt(a,o,s),c=u-l;return i=u/255,0===u?(n=Number.NaN,r=0):(r=c/u,a===u&&(n=(o-s)/c),o===u&&(n=2+(s-a)/c),s===u&&(n=4+(a-o)/c),(n*=60)<0&&(n+=360)),[n,r,i]},Et=Rt,At=d.unpack,Tt=Math.floor,Pt=function(){for(var e,t,n,r,i,a,o=[],s=arguments.length;s--;)o[s]=arguments[s];var l,u,c,h=(o=At(o,"hsv"))[0],f=o[1],d=o[2];if(d*=255,0===f)l=u=c=d;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var p=Tt(h/=60),m=h-p,g=d*(1-f),_=d*(1-f*m),v=d*(1-f*(1-m));switch(p){case 0:l=(e=[d,v,g])[0],u=e[1],c=e[2];break;case 1:l=(t=[_,d,g])[0],u=t[1],c=t[2];break;case 2:l=(n=[g,d,v])[0],u=n[1],c=n[2];break;case 3:l=(r=[g,_,d])[0],u=r[1],c=r[2];break;case 4:l=(i=[v,g,d])[0],u=i[1],c=i[2];break;case 5:l=(a=[d,g,_])[0],u=a[1],c=a[2]}}return[l,u,c,o.length>3?o[3]:1]},kt=Pt,Mt=d.unpack,St=d.type,It=w,Ct=x,Bt=p,Lt=Et;Ct.prototype.hsv=function(){return Lt(this._rgb)},It.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ct,[null].concat(e,["hsv"])))},Bt.format.hsv=kt,Bt.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Mt(e,"hsv"),"array"===St(e)&&3===e.length)return"hsv"}});var Ot={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Ft=Ot,Dt=d.unpack,jt=Math.pow,Ut=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Dt(e,"rgb"),r=n[0],i=n[1],a=n[2],o=qt(r,i,a),s=o[0],l=o[1],u=116*l-16;return[u<0?0:u,500*(s-l),200*(l-o[2])]},Nt=function(e){return(e/=255)<=.04045?e/12.92:jt((e+.055)/1.055,2.4)},$t=function(e){return e>Ft.t3?jt(e,1/3):e/Ft.t2+Ft.t0},qt=function(e,t,n){return e=Nt(e),t=Nt(t),n=Nt(n),[$t((.4124564*e+.3575761*t+.1804375*n)/Ft.Xn),$t((.2126729*e+.7151522*t+.072175*n)/Ft.Yn),$t((.0193339*e+.119192*t+.9503041*n)/Ft.Zn)]},zt=Ut,Vt=Ot,Ht=d.unpack,Yt=Math.pow,Gt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,a=(e=Ht(e,"lab"))[0],o=e[1],s=e[2];return r=(a+16)/116,n=isNaN(o)?r:r+o/500,i=isNaN(s)?r:r-s/200,r=Vt.Yn*Xt(r),n=Vt.Xn*Xt(n),i=Vt.Zn*Xt(i),[Wt(3.2404542*n-1.5371385*r-.4985314*i),Wt(-.969266*n+1.8760108*r+.041556*i),Wt(.0556434*n-.2040259*r+1.0572252*i),e.length>3?e[3]:1]},Wt=function(e){return 255*(e<=.00304?12.92*e:1.055*Yt(e,1/2.4)-.055)},Xt=function(e){return e>Vt.t1?e*e*e:Vt.t2*(e-Vt.t0)},Qt=Gt,Kt=d.unpack,Jt=d.type,Zt=w,en=x,tn=p,nn=zt;en.prototype.lab=function(){return nn(this._rgb)},Zt.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(en,[null].concat(e,["lab"])))},tn.format.lab=Qt,tn.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Kt(e,"lab"),"array"===Jt(e)&&3===e.length)return"lab"}});var rn=d.unpack,an=d.RAD2DEG,on=Math.sqrt,sn=Math.atan2,ln=Math.round,un=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=rn(e,"lab"),r=n[0],i=n[1],a=n[2],o=on(i*i+a*a),s=(sn(a,i)*an+360)%360;return 0===ln(1e4*o)&&(s=Number.NaN),[r,o,s]},cn=un,hn=d.unpack,fn=zt,dn=cn,pn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=hn(e,"rgb"),r=n[0],i=n[1],a=n[2],o=fn(r,i,a),s=o[0],l=o[1],u=o[2];return dn(s,l,u)},mn=pn,gn=d.unpack,_n=d.DEG2RAD,vn=Math.sin,bn=Math.cos,xn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=gn(e,"lch"),r=n[0],i=n[1],a=n[2];return isNaN(a)&&(a=0),[r,bn(a*=_n)*i,vn(a)*i]},yn=xn,wn=d.unpack,Rn=yn,En=Qt,An=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=wn(e,"lch"))[0],r=e[1],i=e[2],a=Rn(n,r,i),o=a[0],s=a[1],l=a[2],u=En(o,s,l);return[u[0],u[1],u[2],e.length>3?e[3]:1]},Tn=An,Pn=d.unpack,kn=Tn,Mn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Pn(e,"hcl").reverse();return kn.apply(void 0,n)},Sn=Mn,In=d.unpack,Cn=d.type,Bn=w,Ln=x,On=p,Fn=mn;Ln.prototype.lch=function(){return Fn(this._rgb)},Ln.prototype.hcl=function(){return Fn(this._rgb).reverse()},Bn.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ln,[null].concat(e,["lch"])))},Bn.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ln,[null].concat(e,["hcl"])))},On.format.lch=Tn,On.format.hcl=Sn,["lch","hcl"].forEach((function(e){return On.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=In(t,e),"array"===Cn(t)&&3===t.length)return e}})}));var Dn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},jn=x,Un=p,Nn=d.type,$n=Dn,qn=qe,zn=Ue;jn.prototype.name=function(){for(var e=zn(this._rgb,"rgb"),t=0,n=Object.keys($n);t<n.length;t+=1){var r=n[t];if($n[r]===e)return r.toLowerCase()}return e},Un.format.named=function(e){if(e=e.toLowerCase(),$n[e])return qn($n[e]);throw new Error("unknown color name: "+e)},Un.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===Nn(e)&&$n[e.toLowerCase()])return"named"}});var Vn=d.unpack,Hn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Vn(e,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]},Yn=Hn,Gn=d.type,Wn=function(e){if("number"==Gn(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)},Xn=Wn,Qn=w,Kn=x,Jn=p,Zn=d.type,er=Yn;Kn.prototype.num=function(){return er(this._rgb)},Qn.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Kn,[null].concat(e,["num"])))},Jn.format.num=Xn,Jn.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===Zn(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var tr=w,nr=x,rr=p,ir=d.unpack,ar=d.type,or=Math.round;nr.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(or)},nr.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,n){return n<3?!1===e?t:or(t):t}))},tr.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(nr,[null].concat(e,["rgb"])))},rr.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ir(e,"rgba");return void 0===n[3]&&(n[3]=1),n},rr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ir(e,"rgba"),"array"===ar(e)&&(3===e.length||4===e.length&&"number"==ar(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var sr=Math.log,lr=function(e){var t,n,r,i=e/100;return i<66?(t=255,n=i<6?0:-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*sr(n),r=i<20?0:.8274096064007395*(r=i-10)-254.76935184120902+115.67994401066147*sr(r)):(t=351.97690566805693+.114206453784165*(t=i-55)-40.25366309332127*sr(t),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*sr(n),r=255),[t,n,r,1]},ur=lr,cr=d.unpack,hr=Math.round,fr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n,r=cr(e,"rgb"),i=r[0],a=r[2],o=1e3,s=4e4,l=.4;s-o>l;){var u=ur(n=.5*(s+o));u[2]/u[0]>=a/i?s=n:o=n}return hr(n)},dr=w,pr=x,mr=p,gr=fr;pr.prototype.temp=pr.prototype.kelvin=pr.prototype.temperature=function(){return gr(this._rgb)},dr.temp=dr.kelvin=dr.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(pr,[null].concat(e,["temp"])))},mr.format.temp=mr.format.kelvin=mr.format.temperature=lr;var _r=d.unpack,vr=Math.cbrt,br=Math.pow,xr=Math.sign,yr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=_r(e,"rgb"),r=n[0],i=n[1],a=n[2],o=[Rr(r/255),Rr(i/255),Rr(a/255)],s=o[0],l=o[1],u=o[2],c=vr(.4122214708*s+.5363325363*l+.0514459929*u),h=vr(.2119034982*s+.6806995451*l+.1073969566*u),f=vr(.0883024619*s+.2817188376*l+.6299787005*u);return[.2104542553*c+.793617785*h-.0040720468*f,1.9779984951*c-2.428592205*h+.4505937099*f,.0259040371*c+.7827717662*h-.808675766*f]},wr=yr;function Rr(e){var t=Math.abs(e);return t<.04045?e/12.92:(xr(e)||1)*br((t+.055)/1.055,2.4)}var Er=d.unpack,Ar=Math.pow,Tr=Math.sign,Pr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=Er(e,"lab"))[0],r=e[1],i=e[2],a=Ar(n+.3963377774*r+.2158037573*i,3),o=Ar(n-.1055613458*r-.0638541728*i,3),s=Ar(n-.0894841775*r-1.291485548*i,3);return[255*Mr(4.0767416621*a-3.3077115913*o+.2309699292*s),255*Mr(-1.2684380046*a+2.6097574011*o-.3413193965*s),255*Mr(-.0041960863*a-.7034186147*o+1.707614701*s),e.length>3?e[3]:1]},kr=Pr;function Mr(e){var t=Math.abs(e);return t>.0031308?(Tr(e)||1)*(1.055*Ar(t,1/2.4)-.055):12.92*e}var Sr=d.unpack,Ir=d.type,Cr=w,Br=x,Lr=p,Or=wr;Br.prototype.oklab=function(){return Or(this._rgb)},Cr.oklab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Br,[null].concat(e,["oklab"])))},Lr.format.oklab=kr,Lr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Sr(e,"oklab"),"array"===Ir(e)&&3===e.length)return"oklab"}});var Fr=d.unpack,Dr=wr,jr=cn,Ur=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Fr(e,"rgb"),r=n[0],i=n[1],a=n[2],o=Dr(r,i,a),s=o[0],l=o[1],u=o[2];return jr(s,l,u)},Nr=Ur,$r=d.unpack,qr=yn,zr=kr,Vr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=$r(e,"lch"))[0],r=e[1],i=e[2],a=qr(n,r,i),o=a[0],s=a[1],l=a[2],u=zr(o,s,l);return[u[0],u[1],u[2],e.length>3?e[3]:1]},Hr=Vr,Yr=d.unpack,Gr=d.type,Wr=w,Xr=x,Qr=p,Kr=Nr;Xr.prototype.oklch=function(){return Kr(this._rgb)},Wr.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Xr,[null].concat(e,["oklch"])))},Qr.format.oklch=Hr,Qr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Yr(e,"oklch"),"array"===Gr(e)&&3===e.length)return"oklch"}});var Jr=x,Zr=d.type;Jr.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===Zr(e)?t?(this._rgb[3]=e,this):new Jr([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},x.prototype.clipped=function(){return this._rgb._clipped||!1};var ei=x,ti=Ot;ei.prototype.darken=function(e){void 0===e&&(e=1);var t=this,n=t.lab();return n[0]-=ti.Kn*e,new ei(n,"lab").alpha(t.alpha(),!0)},ei.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},ei.prototype.darker=ei.prototype.darken,ei.prototype.brighter=ei.prototype.brighten,x.prototype.get=function(e){var t=e.split("."),n=t[0],r=t[1],i=this[n]();if(r){var a=n.indexOf(r)-("ok"===n.substr(0,2)?2:0);if(a>-1)return i[a];throw new Error("unknown channel "+r+" in mode "+n)}return i};var ni=x,ri=d.type,ii=Math.pow,ai=1e-7,oi=20;ni.prototype.luminance=function(e){if(void 0!==e&&"number"===ri(e)){if(0===e)return new ni([0,0,0,this._rgb[3]],"rgb");if(1===e)return new ni([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),n="rgb",r=oi,i=function(t,a){var o=t.interpolate(a,.5,n),s=o.luminance();return Math.abs(e-s)<ai||!r--?o:s>e?i(t,o):i(o,a)},a=(t>e?i(new ni([0,0,0]),this):i(this,new ni([255,255,255]))).rgb();return new ni(a.concat([this._rgb[3]]))}return si.apply(void 0,this._rgb.slice(0,3))};var si=function(e,t,n){return.2126*(e=li(e))+.7152*(t=li(t))+.0722*(n=li(n))},li=function(e){return(e/=255)<=.03928?e/12.92:ii((e+.055)/1.055,2.4)},ui={},ci=x,hi=d.type,fi=ui,di=function(e,t,n){void 0===n&&(n=.5);for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var a=r[0]||"lrgb";if(fi[a]||r.length||(a=Object.keys(fi)[0]),!fi[a])throw new Error("interpolation mode "+a+" is not defined");return"object"!==hi(e)&&(e=new ci(e)),"object"!==hi(t)&&(t=new ci(t)),fi[a](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))},pi=x,mi=di;pi.prototype.mix=pi.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return mi.apply(void 0,[this,e,t].concat(n))};var gi=x;gi.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new gi([t[0]*n,t[1]*n,t[2]*n,n],"rgb")};var _i=x,vi=Ot;_i.prototype.saturate=function(e){void 0===e&&(e=1);var t=this,n=t.lch();return n[1]+=vi.Kn*e,n[1]<0&&(n[1]=0),new _i(n,"lch").alpha(t.alpha(),!0)},_i.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var bi=x,xi=d.type;bi.prototype.set=function(e,t,n){void 0===n&&(n=!1);var r=e.split("."),i=r[0],a=r[1],o=this[i]();if(a){var s=i.indexOf(a)-("ok"===i.substr(0,2)?2:0);if(s>-1){if("string"==xi(t))switch(t.charAt(0)){case"+":case"-":o[s]+=+t;break;case"*":o[s]*=+t.substr(1);break;case"/":o[s]/=+t.substr(1);break;default:o[s]=+t}else{if("number"!==xi(t))throw new Error("unsupported value for Color.set");o[s]=t}var l=new bi(o,i);return n?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+a+" in mode "+i)}return o};var yi=x,wi=function(e,t,n){var r=e._rgb,i=t._rgb;return new yi(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};ui.rgb=wi;var Ri=x,Ei=Math.sqrt,Ai=Math.pow,Ti=function(e,t,n){var r=e._rgb,i=r[0],a=r[1],o=r[2],s=t._rgb,l=s[0],u=s[1],c=s[2];return new Ri(Ei(Ai(i,2)*(1-n)+Ai(l,2)*n),Ei(Ai(a,2)*(1-n)+Ai(u,2)*n),Ei(Ai(o,2)*(1-n)+Ai(c,2)*n),"rgb")};ui.lrgb=Ti;var Pi=x,ki=function(e,t,n){var r=e.lab(),i=t.lab();return new Pi(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};ui.lab=ki;var Mi=x,Si=function(e,t,n,r){var i,a,o,s,l,u,c,h,f,d,p,m,g;return"hsl"===r?(o=e.hsl(),s=t.hsl()):"hsv"===r?(o=e.hsv(),s=t.hsv()):"hcg"===r?(o=e.hcg(),s=t.hcg()):"hsi"===r?(o=e.hsi(),s=t.hsi()):"lch"===r||"hcl"===r?(r="hcl",o=e.hcl(),s=t.hcl()):"oklch"===r&&(o=e.oklch().reverse(),s=t.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(l=(i=o)[0],c=i[1],f=i[2],u=(a=s)[0],h=a[1],d=a[2]),isNaN(l)||isNaN(u)?isNaN(l)?isNaN(u)?m=Number.NaN:(m=u,1!=f&&0!=f||"hsv"==r||(p=h)):(m=l,1!=d&&0!=d||"hsv"==r||(p=c)):m=l+n*(u>l&&u-l>180?u-(l+360):u<l&&l-u>180?u+360-l:u-l),void 0===p&&(p=c+n*(h-c)),g=f+n*(d-f),new Mi("oklch"===r?[g,p,m]:[m,p,g],r)},Ii=Si,Ci=function(e,t,n){return Ii(e,t,n,"lch")};ui.lch=Ci,ui.hcl=Ci;var Bi=x,Li=function(e,t,n){var r=e.num(),i=t.num();return new Bi(r+n*(i-r),"num")};ui.num=Li;var Oi=Si,Fi=function(e,t,n){return Oi(e,t,n,"hcg")};ui.hcg=Fi;var Di=Si,ji=function(e,t,n){return Di(e,t,n,"hsi")};ui.hsi=ji;var Ui=Si,Ni=function(e,t,n){return Ui(e,t,n,"hsl")};ui.hsl=Ni;var $i=Si,qi=function(e,t,n){return $i(e,t,n,"hsv")};ui.hsv=qi;var zi=x,Vi=function(e,t,n){var r=e.oklab(),i=t.oklab();return new zi(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"oklab")};ui.oklab=Vi;var Hi=Si,Yi=function(e,t,n){return Hi(e,t,n,"oklch")};ui.oklch=Yi;var Gi=x,Wi=d.clip_rgb,Xi=Math.pow,Qi=Math.sqrt,Ki=Math.PI,Ji=Math.cos,Zi=Math.sin,ea=Math.atan2,ta=function(e,t,n){void 0===t&&(t="lrgb"),void 0===n&&(n=null);var r=e.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var i=r/n.reduce((function(e,t){return e+t}));if(n.forEach((function(e,t){n[t]*=i})),e=e.map((function(e){return new Gi(e)})),"lrgb"===t)return na(e,n);for(var a=e.shift(),o=a.get(t),s=[],l=0,u=0,c=0;c<o.length;c++)if(o[c]=(o[c]||0)*n[0],s.push(isNaN(o[c])?0:n[0]),"h"===t.charAt(c)&&!isNaN(o[c])){var h=o[c]/180*Ki;l+=Ji(h)*n[0],u+=Zi(h)*n[0]}var f=a.alpha()*n[0];e.forEach((function(e,r){var i=e.get(t);f+=e.alpha()*n[r+1];for(var a=0;a<o.length;a++)if(!isNaN(i[a]))if(s[a]+=n[r+1],"h"===t.charAt(a)){var c=i[a]/180*Ki;l+=Ji(c)*n[r+1],u+=Zi(c)*n[r+1]}else o[a]+=i[a]*n[r+1]}));for(var d=0;d<o.length;d++)if("h"===t.charAt(d)){for(var p=ea(u/s[d],l/s[d])/Ki*180;p<0;)p+=360;for(;p>=360;)p-=360;o[d]=p}else o[d]=o[d]/s[d];return f/=r,new Gi(o,t).alpha(f>.99999?1:f,!0)},na=function(e,t){for(var n=e.length,r=[0,0,0,0],i=0;i<e.length;i++){var a=e[i],o=t[i]/n,s=a._rgb;r[0]+=Xi(s[0],2)*o,r[1]+=Xi(s[1],2)*o,r[2]+=Xi(s[2],2)*o,r[3]+=s[3]*o}return r[0]=Qi(r[0]),r[1]=Qi(r[1]),r[2]=Qi(r[2]),r[3]>.9999999&&(r[3]=1),new Gi(Wi(r))},ra=w,ia=d.type,aa=Math.pow,oa=function(e){var t="rgb",n=ra("#ccc"),r=0,i=[0,1],a=[],o=[0,0],s=!1,l=[],u=!1,c=0,h=1,f=!1,d={},p=!0,m=1,g=function(e){if((e=e||["#fff","#000"])&&"string"===ia(e)&&ra.brewer&&ra.brewer[e.toLowerCase()]&&(e=ra.brewer[e.toLowerCase()]),"array"===ia(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=ra(e[t]);a.length=0;for(var n=0;n<e.length;n++)a.push(n/(e.length-1))}return y(),l=e},_=function(e){if(null!=s){for(var t=s.length-1,n=0;n<t&&e>=s[n];)n++;return n-1}return 0},v=function(e){return e},b=function(e){return e},x=function(e,r){var i,u;if(null==r&&(r=!1),isNaN(e)||null===e)return n;u=r?e:s&&s.length>2?_(e)/(s.length-2):h!==c?(e-c)/(h-c):1,u=b(u),r||(u=v(u)),1!==m&&(u=aa(u,m)),u=o[0]+u*(1-o[0]-o[1]),u=Math.min(1,Math.max(0,u));var f=Math.floor(1e4*u);if(p&&d[f])i=d[f];else{if("array"===ia(l))for(var g=0;g<a.length;g++){var x=a[g];if(u<=x){i=l[g];break}if(u>=x&&g===a.length-1){i=l[g];break}if(u>x&&u<a[g+1]){u=(u-x)/(a[g+1]-x),i=ra.interpolate(l[g],l[g+1],u,t);break}}else"function"===ia(l)&&(i=l(u));p&&(d[f]=i)}return i},y=function(){return d={}};g(e);var w=function(e){var t=ra(x(e));return u&&t[u]?t[u]():t};return w.classes=function(e){if(null!=e){if("array"===ia(e))s=e,i=[e[0],e[e.length-1]];else{var t=ra.analyze(i);s=0===e?[t.min,t.max]:ra.limits(t,"e",e)}return w}return s},w.domain=function(e){if(!arguments.length)return i;c=e[0],h=e[e.length-1],a=[];var t=l.length;if(e.length===t&&c!==h)for(var n=0,r=Array.from(e);n<r.length;n+=1){var o=r[n];a.push((o-c)/(h-c))}else{for(var s=0;s<t;s++)a.push(s/(t-1));if(e.length>2){var u=e.map((function(t,n){return n/(e.length-1)})),f=e.map((function(e){return(e-c)/(h-c)}));f.every((function(e,t){return u[t]===e}))||(b=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=f[t+1];)t++;var n=(e-f[t])/(f[t+1]-f[t]);return u[t]+n*(u[t+1]-u[t])})}}return i=[c,h],w},w.mode=function(e){return arguments.length?(t=e,y(),w):t},w.range=function(e,t){return g(e),w},w.out=function(e){return u=e,w},w.spread=function(e){return arguments.length?(r=e,w):r},w.correctLightness=function(e){return null==e&&(e=!0),f=e,y(),v=f?function(e){for(var t=x(0,!0).lab()[0],n=x(1,!0).lab()[0],r=t>n,i=x(e,!0).lab()[0],a=t+(n-t)*e,o=i-a,s=0,l=1,u=20;Math.abs(o)>.01&&u-- >0;)r&&(o*=-1),o<0?(s=e,e+=.5*(l-e)):(l=e,e+=.5*(s-e)),i=x(e,!0).lab()[0],o=i-a;return e}:function(e){return e},w},w.padding=function(e){return null!=e?("number"===ia(e)&&(e=[e,e]),o=e,w):o},w.colors=function(t,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=l.slice(0);else if(1===t)r=[w(.5)];else if(t>1){var a=i[0],o=i[1]-a;r=sa(0,t,!1).map((function(e){return w(a+e/(t-1)*o)}))}else{e=[];var u=[];if(s&&s.length>2)for(var c=1,h=s.length,f=1<=h;f?c<h:c>h;f?c++:c--)u.push(.5*(s[c-1]+s[c]));else u=i;r=u.map((function(e){return w(e)}))}return ra[n]&&(r=r.map((function(e){return e[n]()}))),r},w.cache=function(e){return null!=e?(p=e,w):p},w.gamma=function(e){return null!=e?(m=e,w):m},w.nodata=function(e){return null!=e?(n=ra(e),w):n},w};function sa(e,t,n){for(var r=[],i=e<t,a=n?i?t+1:t-1:t,o=e;i?o<a:o>a;i?o++:o--)r.push(o);return r}var la=x,ua=oa,ca=function(e){for(var t=[1,1],n=1;n<e;n++){for(var r=[1],i=1;i<=t.length;i++)r[i]=(t[i]||0)+t[i-1];t=r}return t},ha=function(e){var t,n,r,i,a,o,s;if(2===(e=e.map((function(e){return new la(e)}))).length)t=e.map((function(e){return e.lab()})),a=t[0],o=t[1],i=function(e){var t=[0,1,2].map((function(t){return a[t]+e*(o[t]-a[t])}));return new la(t,"lab")};else if(3===e.length)n=e.map((function(e){return e.lab()})),a=n[0],o=n[1],s=n[2],i=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*a[t]+2*(1-e)*e*o[t]+e*e*s[t]}));return new la(t,"lab")};else if(4===e.length){var l;r=e.map((function(e){return e.lab()})),a=r[0],o=r[1],s=r[2],l=r[3],i=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*a[t]+3*(1-e)*(1-e)*e*o[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]}));return new la(t,"lab")}}else{if(!(e.length>=5))throw new RangeError("No point in running bezier with only one color.");var u,c,h;u=e.map((function(e){return e.lab()})),h=e.length-1,c=ca(h),i=function(e){var t=1-e,n=[0,1,2].map((function(n){return u.reduce((function(r,i,a){return r+c[a]*Math.pow(t,h-a)*Math.pow(e,a)*i[n]}),0)}));return new la(n,"lab")}}return i},fa=function(e){var t=ha(e);return t.scale=function(){return ua(t)},t},da=w,pa=function(e,t,n){if(!pa[n])throw new Error("unknown blend mode "+n);return pa[n](e,t)},ma=function(e){return function(t,n){var r=da(n).rgb(),i=da(t).rgb();return da.rgb(e(r,i))}},ga=function(e){return function(t,n){var r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r}},_a=function(e){return e},va=function(e,t){return e*t/255},ba=function(e,t){return e>t?t:e},xa=function(e,t){return e>t?e:t},ya=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},wa=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},Ra=function(e,t){return 255*(1-(1-t/255)/(e/255))},Ea=function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e};pa.normal=ma(ga(_a)),pa.multiply=ma(ga(va)),pa.screen=ma(ga(ya)),pa.overlay=ma(ga(wa)),pa.darken=ma(ga(ba)),pa.lighten=ma(ga(xa)),pa.dodge=ma(ga(Ea)),pa.burn=ma(ga(Ra));for(var Aa=pa,Ta=d.type,Pa=d.clip_rgb,ka=d.TWOPI,Ma=Math.pow,Sa=Math.sin,Ia=Math.cos,Ca=w,Ba=function(e,t,n,r,i){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=[0,1]);var a,o=0;"array"===Ta(i)?a=i[1]-i[0]:(a=0,i=[i,i]);var s=function(s){var l=ka*((e+120)/360+t*s),u=Ma(i[0]+a*s,r),c=(0!==o?n[0]+s*o:n)*u*(1-u)/2,h=Ia(l),f=Sa(l);return Ca(Pa([255*(u+c*(-.14861*h+1.78277*f)),255*(u+c*(-.29227*h-.90649*f)),255*(u+c*(1.97294*h)),1]))};return s.start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:("array"===Ta(n=e)?0==(o=n[1]-n[0])&&(n=n[1]):o=0,s)},s.lightness=function(e){return null==e?i:("array"===Ta(e)?(i=e,a=e[1]-e[0]):(i=[e,e],a=0),s)},s.scale=function(){return Ca.scale(s)},s.hue(n),s},La=x,Oa="0123456789abcdef",Fa=Math.floor,Da=Math.random,ja=function(){for(var e="#",t=0;t<6;t++)e+=Oa.charAt(Fa(16*Da()));return new La(e,"hex")},Ua=s,Na=Math.log,$a=Math.pow,qa=Math.floor,za=Math.abs,Va=function(e,t){void 0===t&&(t=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===Ua(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===Ua(e)&&(e=e[t]),null==e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(e,t){return Ha(n,e,t)},n},Ha=function(e,t,n){void 0===t&&(t="equal"),void 0===n&&(n=7),"array"==Ua(e)&&(e=Va(e));var r=e.min,i=e.max,a=e.values.sort((function(e,t){return e-t}));if(1===n)return[r,i];var o=[];if("c"===t.substr(0,1)&&(o.push(r),o.push(i)),"e"===t.substr(0,1)){o.push(r);for(var s=1;s<n;s++)o.push(r+s/n*(i-r));o.push(i)}else if("l"===t.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var l=Math.LOG10E*Na(r),u=Math.LOG10E*Na(i);o.push(r);for(var c=1;c<n;c++)o.push($a(10,l+c/n*(u-l)));o.push(i)}else if("q"===t.substr(0,1)){o.push(r);for(var h=1;h<n;h++){var f=(a.length-1)*h/n,d=qa(f);if(d===f)o.push(a[d]);else{var p=f-d;o.push(a[d]*(1-p)+a[d+1]*p)}}o.push(i)}else if("k"===t.substr(0,1)){var m,g=a.length,_=new Array(g),v=new Array(n),b=!0,x=0,y=null;(y=[]).push(r);for(var w=1;w<n;w++)y.push(r+w/n*(i-r));for(y.push(i);b;){for(var R=0;R<n;R++)v[R]=0;for(var E=0;E<g;E++)for(var A=a[E],T=Number.MAX_VALUE,P=void 0,k=0;k<n;k++){var M=za(y[k]-A);M<T&&(T=M,P=k),v[P]++,_[E]=P}for(var S=new Array(n),I=0;I<n;I++)S[I]=null;for(var C=0;C<g;C++)null===S[m=_[C]]?S[m]=a[C]:S[m]+=a[C];for(var B=0;B<n;B++)S[B]*=1/v[B];b=!1;for(var L=0;L<n;L++)if(S[L]!==y[L]){b=!0;break}y=S,++x>200&&(b=!1)}for(var O={},F=0;F<n;F++)O[F]=[];for(var D=0;D<g;D++)O[m=_[D]].push(a[D]);for(var j=[],U=0;U<n;U++)j.push(O[U][0]),j.push(O[U][O[U].length-1]);j=j.sort((function(e,t){return e-t})),o.push(j[0]);for(var N=1;N<j.length;N+=2){var $=j[N];isNaN($)||-1!==o.indexOf($)||o.push($)}}return o},Ya={analyze:Va,limits:Ha},Ga=x,Wa=function(e,t){e=new Ga(e),t=new Ga(t);var n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},Xa=x,Qa=Math.sqrt,Ka=Math.pow,Ja=Math.min,Za=Math.max,eo=Math.atan2,to=Math.abs,no=Math.cos,ro=Math.sin,io=Math.exp,ao=Math.PI,oo=function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=1);var a=function(e){return 360*e/(2*ao)},o=function(e){return 2*ao*e/360};e=new Xa(e),t=new Xa(t);var s=Array.from(e.lab()),l=s[0],u=s[1],c=s[2],h=Array.from(t.lab()),f=h[0],d=h[1],p=h[2],m=(l+f)/2,g=(Qa(Ka(u,2)+Ka(c,2))+Qa(Ka(d,2)+Ka(p,2)))/2,_=.5*(1-Qa(Ka(g,7)/(Ka(g,7)+Ka(25,7)))),v=u*(1+_),b=d*(1+_),x=Qa(Ka(v,2)+Ka(c,2)),y=Qa(Ka(b,2)+Ka(p,2)),w=(x+y)/2,R=a(eo(c,v)),E=a(eo(p,b)),A=R>=0?R:R+360,T=E>=0?E:E+360,P=to(A-T)>180?(A+T+360)/2:(A+T)/2,k=1-.17*no(o(P-30))+.24*no(o(2*P))+.32*no(o(3*P+6))-.2*no(o(4*P-63)),M=T-A;M=to(M)<=180?M:T<=A?M+360:M-360,M=2*Qa(x*y)*ro(o(M)/2);var S=f-l,I=y-x,C=1+.015*Ka(m-50,2)/Qa(20+Ka(m-50,2)),B=1+.045*w,L=1+.015*w*k,O=30*io(-Ka((P-275)/25,2)),F=-2*Qa(Ka(w,7)/(Ka(w,7)+Ka(25,7)))*ro(2*o(O)),D=Qa(Ka(S/(n*C),2)+Ka(I/(r*B),2)+Ka(M/(i*L),2)+F*(I/(r*B))*(M/(i*L)));return Za(0,Ja(100,D))},so=x,lo=function(e,t,n){void 0===n&&(n="lab"),e=new so(e),t=new so(t);var r=e.get(n),i=t.get(n),a=0;for(var o in r){var s=(r[o]||0)-(i[o]||0);a+=s*s}return Math.sqrt(a)},uo=x,co=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(uo,[null].concat(e))),!0}catch(e){return!1}},ho=w,fo=oa,po={cool:function(){return fo([ho.hsl(180,1,.9),ho.hsl(250,.7,.4)])},hot:function(){return fo(["#000","#f00","#ff0","#fff"]).mode("rgb")}},mo={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},go=0,_o=Object.keys(mo);go<_o.length;go+=1){var vo=_o[go];mo[vo.toLowerCase()]=mo[vo]}var bo=mo,xo=w;return xo.average=ta,xo.bezier=fa,xo.blend=Aa,xo.cubehelix=Ba,xo.mix=xo.interpolate=di,xo.random=ja,xo.scale=oa,xo.analyze=Ya.analyze,xo.contrast=Wa,xo.deltaE=oo,xo.distance=lo,xo.limits=Ya.limits,xo.valid=co,xo.scales=po,xo.colors=Dn,xo.brewer=bo,xo}()})),parcelRequire.register("hYurQ",(function(e,t){$parcel$export(e.exports,"v3",(()=>u)),$parcel$export(e.exports,"m4",(()=>b)),$parcel$export(e.exports,"getGLTypeForTypedArray",(()=>k)),$parcel$export(e.exports,"getGLTypeForTypedArrayType",(()=>M)),$parcel$export(e.exports,"getTypedArrayTypeForGLType",(()=>S)),$parcel$export(e.exports,"isArrayBuffer",(()=>I)),$parcel$export(e.exports,"typedarrays",(()=>C)),$parcel$export(e.exports,"setAttributePrefix",(()=>N)),$parcel$export(e.exports,"setAttributeDefaults_",(()=>$)),$parcel$export(e.exports,"createBufferFromTypedArray",(()=>z)),$parcel$export(e.exports,"getArray_",(()=>H)),$parcel$export(e.exports,"getNumComponents_",(()=>X)),$parcel$export(e.exports,"createAttribsFromArrays",(()=>K)),$parcel$export(e.exports,"setAttribInfoBufferFromArray",(()=>J)),$parcel$export(e.exports,"createBufferInfoFromArrays",(()=>ee)),$parcel$export(e.exports,"createBufferFromArray",(()=>te)),$parcel$export(e.exports,"createBuffersFromArrays",(()=>ne)),$parcel$export(e.exports,"attributes",(()=>re)),$parcel$export(e.exports,"primitives",(()=>tt)),$parcel$export(e.exports,"isWebGL2",(()=>nt)),$parcel$export(e.exports,"isWebGL1",(()=>rt)),$parcel$export(e.exports,"glEnumToString",(()=>it)),$parcel$export(e.exports,"utils",(()=>at)),$parcel$export(e.exports,"getBytesPerElementForInternalFormat",(()=>Yt)),$parcel$export(e.exports,"getFormatAndTypeForInternalFormat",(()=>Gt)),$parcel$export(e.exports,"canGenerateMipmap",(()=>Xt)),$parcel$export(e.exports,"canFilter",(()=>Qt)),$parcel$export(e.exports,"getNumComponentsForFormat",(()=>Kt)),$parcel$export(e.exports,"setDefaultTextureColor",(()=>en)),$parcel$export(e.exports,"setTextureDefaults_",(()=>tn)),$parcel$export(e.exports,"setTextureParameters",(()=>on)),$parcel$export(e.exports,"setSamplerParameters",(()=>sn)),$parcel$export(e.exports,"createSampler",(()=>ln)),$parcel$export(e.exports,"createSamplers",(()=>un)),$parcel$export(e.exports,"setTextureFilteringForSize",(()=>cn)),$parcel$export(e.exports,"setTextureFromElement",(()=>pn)),$parcel$export(e.exports,"loadTextureFromUrl",(()=>xn)),$parcel$export(e.exports,"setTextureFromArray",(()=>Rn)),$parcel$export(e.exports,"setEmptyTexture",(()=>En)),$parcel$export(e.exports,"createTexture",(()=>An)),$parcel$export(e.exports,"resizeTexture",(()=>Tn)),$parcel$export(e.exports,"createTextures",(()=>Pn)),$parcel$export(e.exports,"textures",(()=>kn)),$parcel$export(e.exports,"createProgram",(()=>fr)),$parcel$export(e.exports,"createProgramAsync",(()=>dr)),$parcel$export(e.exports,"createProgramInfoAsync",(()=>pr)),$parcel$export(e.exports,"createProgramInfo",(()=>$r)),$parcel$export(e.exports,"createProgramFromScripts",(()=>_r)),$parcel$export(e.exports,"createProgramFromSources",(()=>vr)),$parcel$export(e.exports,"createUniformSetters",(()=>wr)),$parcel$export(e.exports,"createTransformFeedbackInfo",(()=>Rr)),$parcel$export(e.exports,"bindTransformFeedbackInfo",(()=>Er)),$parcel$export(e.exports,"createTransformFeedback",(()=>Ar)),$parcel$export(e.exports,"createUniformBlockSpecFromProgram",(()=>Tr)),$parcel$export(e.exports,"createUniformBlockInfoFromProgram",(()=>kr)),$parcel$export(e.exports,"createUniformBlockInfo",(()=>Mr)),$parcel$export(e.exports,"bindUniformBlock",(()=>Sr)),$parcel$export(e.exports,"setUniformBlock",(()=>Ir)),$parcel$export(e.exports,"setBlockUniforms",(()=>Cr)),$parcel$export(e.exports,"setUniforms",(()=>Lr)),$parcel$export(e.exports,"setUniformsAndBindTextures",(()=>Or)),$parcel$export(e.exports,"createAttributeSetters",(()=>Fr)),$parcel$export(e.exports,"setAttributes",(()=>Dr)),$parcel$export(e.exports,"setBuffersAndAttributes",(()=>jr)),$parcel$export(e.exports,"createProgramInfoFromProgram",(()=>Ur)),$parcel$export(e.exports,"programs",(()=>qr)),$parcel$export(e.exports,"drawBufferInfo",(()=>zr)),$parcel$export(e.exports,"drawObjectList",(()=>Vr)),$parcel$export(e.exports,"draw",(()=>Hr)),$parcel$export(e.exports,"createFramebufferInfo",(()=>ni)),$parcel$export(e.exports,"resizeFramebufferInfo",(()=>ri)),$parcel$export(e.exports,"bindFramebufferInfo",(()=>ii)),$parcel$export(e.exports,"framebuffers",(()=>ai)),$parcel$export(e.exports,"createVertexArrayInfo",(()=>oi)),$parcel$export(e.exports,"createVAOAndSetAttributes",(()=>si)),$parcel$export(e.exports,"createVAOFromBufferInfo",(()=>li)),$parcel$export(e.exports,"vertexArrays",(()=>ui)),$parcel$export(e.exports,"setDefaults",(()=>hi)),$parcel$export(e.exports,"addExtensionsToContext",(()=>mi)),$parcel$export(e.exports,"getWebGLContext",(()=>gi)),$parcel$export(e.exports,"getContext",(()=>_i)),$parcel$export(e.exports,"resizeCanvasToDisplaySize",(()=>vi));
/* @license twgl.js 4.24.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */
let n=Float32Array;function r(e,t,r){const i=new n(3);return e&&(i[0]=e),t&&(i[1]=t),r&&(i[2]=r),i}function i(e,t,r){return(r=r||new n(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function a(e,t,r){return(r=r||new n(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function o(e,t,r){r=r||new n(3);const i=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=i,r[2]=a,r}function s(e,t){t=t||new n(3);const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Math.sqrt(r);return i>1e-5?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=0,t[1]=0,t[2]=0),t}function l(e,t,r){return(r=r||new n(3))[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}var u=Object.freeze({__proto__:null,add:i,copy:function(e,t){return(t=t||new n(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},create:r,cross:o,distance:function(e,t){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)},distanceSq:function(e,t){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i},divide:function(e,t,r){return(r=r||new n(3))[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r},divScalar:function(e,t,r){return(r=r||new n(3))[0]=e[0]/t,r[1]=e[1]/t,r[2]=e[2]/t,r},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},lerp:function(e,t,r,i){return(i=i||new n(3))[0]=e[0]+r*(t[0]-e[0]),i[1]=e[1]+r*(t[1]-e[1]),i[2]=e[2]+r*(t[2]-e[2]),i},lerpV:function(e,t,r,i){return(i=i||new n(3))[0]=e[0]+r[0]*(t[0]-e[0]),i[1]=e[1]+r[1]*(t[1]-e[1]),i[2]=e[2]+r[2]*(t[2]-e[2]),i},length:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},lengthSq:function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},max:function(e,t,r){return(r=r||new n(3))[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r},min:function(e,t,r){return(r=r||new n(3))[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r},mulScalar:function(e,t,r){return(r=r||new n(3))[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r},multiply:l,negate:function(e,t){return(t=t||new n(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},normalize:s,setDefaultType:function(e){const t=n;return n=e,t},subtract:a});let c,h,f,d=Float32Array;function p(e,t){return(t=t||new d(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function m(e){return(e=e||new d(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function g(e,t){t=t||new d(16);const n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],m=e[12],g=e[13],_=e[14],v=e[15],b=f*v,x=_*p,y=l*v,w=_*u,R=l*p,E=f*u,A=i*v,T=_*a,P=i*p,k=f*a,M=i*u,S=l*a,I=c*g,C=m*h,B=o*g,L=m*s,O=o*h,F=c*s,D=n*g,j=m*r,U=n*h,N=c*r,$=n*s,q=o*r,z=b*s+w*h+R*g-(x*s+y*h+E*g),V=x*r+A*h+k*g-(b*r+T*h+P*g),H=y*r+T*s+M*g-(w*r+A*s+S*g),Y=E*r+P*s+S*h-(R*r+k*s+M*h),G=1/(n*z+o*V+c*H+m*Y);return t[0]=G*z,t[1]=G*V,t[2]=G*H,t[3]=G*Y,t[4]=G*(x*o+y*c+E*m-(b*o+w*c+R*m)),t[5]=G*(b*n+T*c+P*m-(x*n+A*c+k*m)),t[6]=G*(w*n+A*o+S*m-(y*n+T*o+M*m)),t[7]=G*(R*n+k*o+M*c-(E*n+P*o+S*c)),t[8]=G*(I*u+L*p+O*v-(C*u+B*p+F*v)),t[9]=G*(C*a+D*p+N*v-(I*a+j*p+U*v)),t[10]=G*(B*a+j*u+$*v-(L*a+D*u+q*v)),t[11]=G*(F*a+U*u+q*p-(O*a+N*u+$*p)),t[12]=G*(B*f+F*_+C*l-(O*_+I*l+L*f)),t[13]=G*(U*_+I*i+j*f-(D*f+N*_+C*i)),t[14]=G*(D*l+q*_+L*i-($*_+B*i+j*l)),t[15]=G*($*f+O*i+N*l-(U*l+q*f+F*i)),t}function _(e,t,n){n=n||r();const i=t[0],a=t[1],o=t[2],s=i*e[3]+a*e[7]+o*e[11]+e[15];return n[0]=(i*e[0]+a*e[4]+o*e[8]+e[12])/s,n[1]=(i*e[1]+a*e[5]+o*e[9]+e[13])/s,n[2]=(i*e[2]+a*e[6]+o*e[10]+e[14])/s,n}function v(e,t,n){n=n||r();const i=t[0],a=t[1],o=t[2];return n[0]=i*e[0]+a*e[4]+o*e[8],n[1]=i*e[1]+a*e[5]+o*e[9],n[2]=i*e[2]+a*e[6]+o*e[10],n}var b=Object.freeze({__proto__:null,axisRotate:function(e,t,n,r){r=r||new d(16);let i=t[0],a=t[1],o=t[2];const s=Math.sqrt(i*i+a*a+o*o);i/=s,a/=s,o/=s;const l=i*i,u=a*a,c=o*o,h=Math.cos(n),f=Math.sin(n),p=1-h,m=l+(1-l)*h,g=i*a*p+o*f,_=i*o*p-a*f,v=i*a*p-o*f,b=u+(1-u)*h,x=a*o*p+i*f,y=i*o*p+a*f,w=a*o*p-i*f,R=c+(1-c)*h,E=e[0],A=e[1],T=e[2],P=e[3],k=e[4],M=e[5],S=e[6],I=e[7],C=e[8],B=e[9],L=e[10],O=e[11];return r[0]=m*E+g*k+_*C,r[1]=m*A+g*M+_*B,r[2]=m*T+g*S+_*L,r[3]=m*P+g*I+_*O,r[4]=v*E+b*k+x*C,r[5]=v*A+b*M+x*B,r[6]=v*T+b*S+x*L,r[7]=v*P+b*I+x*O,r[8]=y*E+w*k+R*C,r[9]=y*A+w*M+R*B,r[10]=y*T+w*S+R*L,r[11]=y*P+w*I+R*O,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},axisRotation:function(e,t,n){n=n||new d(16);let r=e[0],i=e[1],a=e[2];const o=Math.sqrt(r*r+i*i+a*a);r/=o,i/=o,a/=o;const s=r*r,l=i*i,u=a*a,c=Math.cos(t),h=Math.sin(t),f=1-c;return n[0]=s+(1-s)*c,n[1]=r*i*f+a*h,n[2]=r*a*f-i*h,n[3]=0,n[4]=r*i*f-a*h,n[5]=l+(1-l)*c,n[6]=i*a*f+r*h,n[7]=0,n[8]=r*a*f+i*h,n[9]=i*a*f-r*h,n[10]=u+(1-u)*c,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},copy:p,create:function(){return new d(16).fill(0)},frustum:function(e,t,n,r,i,a,o){const s=t-e,l=r-n,u=i-a;return(o=o||new d(16))[0]=2*i/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*i/l,o[6]=0,o[7]=0,o[8]=(e+t)/s,o[9]=(r+n)/l,o[10]=a/u,o[11]=-1,o[12]=0,o[13]=0,o[14]=i*a/u,o[15]=0,o},getAxis:function(e,t,n){const i=4*t;return(n=n||r())[0]=e[i+0],n[1]=e[i+1],n[2]=e[i+2],n},getTranslation:function(e,t){return(t=t||r())[0]=e[12],t[1]=e[13],t[2]=e[14],t},identity:m,inverse:g,lookAt:function(e,t,n,i){return i=i||new d(16),c=c||r(),h=h||r(),f=f||r(),s(a(e,t,f),f),s(o(n,f,c),c),s(o(f,c,h),h),i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=0,i[4]=h[0],i[5]=h[1],i[6]=h[2],i[7]=0,i[8]=f[0],i[9]=f[1],i[10]=f[2],i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i},multiply:function(e,t,n){n=n||new d(16);const r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],m=e[11],g=e[12],_=e[13],v=e[14],b=e[15],x=t[0],y=t[1],w=t[2],R=t[3],E=t[4],A=t[5],T=t[6],P=t[7],k=t[8],M=t[9],S=t[10],I=t[11],C=t[12],B=t[13],L=t[14],O=t[15];return n[0]=r*x+s*y+h*w+g*R,n[1]=i*x+l*y+f*w+_*R,n[2]=a*x+u*y+p*w+v*R,n[3]=o*x+c*y+m*w+b*R,n[4]=r*E+s*A+h*T+g*P,n[5]=i*E+l*A+f*T+_*P,n[6]=a*E+u*A+p*T+v*P,n[7]=o*E+c*A+m*T+b*P,n[8]=r*k+s*M+h*S+g*I,n[9]=i*k+l*M+f*S+_*I,n[10]=a*k+u*M+p*S+v*I,n[11]=o*k+c*M+m*S+b*I,n[12]=r*C+s*B+h*L+g*O,n[13]=i*C+l*B+f*L+_*O,n[14]=a*C+u*B+p*L+v*O,n[15]=o*C+c*B+m*L+b*O,n},negate:function(e,t){return(t=t||new d(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},ortho:function(e,t,n,r,i,a,o){return(o=o||new d(16))[0]=2/(t-e),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/(r-n),o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2/(i-a),o[11]=0,o[12]=(t+e)/(e-t),o[13]=(r+n)/(n-r),o[14]=(a+i)/(i-a),o[15]=1,o},perspective:function(e,t,n,r,i){i=i||new d(16);const a=Math.tan(.5*Math.PI-.5*e),o=1/(n-r);return i[0]=a/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(n+r)*o,i[11]=-1,i[12]=0,i[13]=0,i[14]=n*r*o*2,i[15]=0,i},rotateX:function(e,t,n){n=n||new d(16);const r=e[4],i=e[5],a=e[6],o=e[7],s=e[8],l=e[9],u=e[10],c=e[11],h=Math.cos(t),f=Math.sin(t);return n[4]=h*r+f*s,n[5]=h*i+f*l,n[6]=h*a+f*u,n[7]=h*o+f*c,n[8]=h*s-f*r,n[9]=h*l-f*i,n[10]=h*u-f*a,n[11]=h*c-f*o,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},rotateY:function(e,t,n){n=n||new d(16);const r=e[0],i=e[1],a=e[2],o=e[3],s=e[8],l=e[9],u=e[10],c=e[11],h=Math.cos(t),f=Math.sin(t);return n[0]=h*r-f*s,n[1]=h*i-f*l,n[2]=h*a-f*u,n[3]=h*o-f*c,n[8]=h*s+f*r,n[9]=h*l+f*i,n[10]=h*u+f*a,n[11]=h*c+f*o,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},rotateZ:function(e,t,n){n=n||new d(16);const r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=Math.cos(t),f=Math.sin(t);return n[0]=h*r+f*s,n[1]=h*i+f*l,n[2]=h*a+f*u,n[3]=h*o+f*c,n[4]=h*s-f*r,n[5]=h*l-f*i,n[6]=h*u-f*a,n[7]=h*c-f*o,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},rotationX:function(e,t){t=t||new d(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationY:function(e,t){t=t||new d(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationZ:function(e,t){t=t||new d(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},scale:function(e,t,n){n=n||new d(16);const r=t[0],i=t[1],a=t[2];return n[0]=r*e[0],n[1]=r*e[1],n[2]=r*e[2],n[3]=r*e[3],n[4]=i*e[4],n[5]=i*e[5],n[6]=i*e[6],n[7]=i*e[7],n[8]=a*e[8],n[9]=a*e[9],n[10]=a*e[10],n[11]=a*e[11],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},scaling:function(e,t){return(t=t||new d(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},setAxis:function(e,t,n,r){r!==e&&(r=p(e,r));const i=4*n;return r[i+0]=t[0],r[i+1]=t[1],r[i+2]=t[2],r},setDefaultType:function(e){const t=d;return d=e,t},setTranslation:function(e,t,n){return e!==(n=n||m())&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11]),n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n},transformDirection:v,transformNormal:function(e,t,n){n=n||r();const i=g(e),a=t[0],o=t[1],s=t[2];return n[0]=a*i[0]+o*i[1]+s*i[2],n[1]=a*i[4]+o*i[5]+s*i[6],n[2]=a*i[8]+o*i[9]+s*i[10],n},transformPoint:_,translate:function(e,t,n){n=n||new d(16);const r=t[0],i=t[1],a=t[2],o=e[0],s=e[1],l=e[2],u=e[3],c=e[4],h=e[5],f=e[6],p=e[7],m=e[8],g=e[9],_=e[10],v=e[11],b=e[12],x=e[13],y=e[14],w=e[15];return e!==n&&(n[0]=o,n[1]=s,n[2]=l,n[3]=u,n[4]=c,n[5]=h,n[6]=f,n[7]=p,n[8]=m,n[9]=g,n[10]=_,n[11]=v),n[12]=o*r+c*i+m*a+b,n[13]=s*r+h*i+g*a+x,n[14]=l*r+f*i+_*a+y,n[15]=u*r+p*i+v*a+w,n},translation:function(e,t){return(t=t||new d(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},transpose:function(e,t){if((t=t||new d(16))===e){let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,t}const n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],m=e[12],g=e[13],_=e[14],v=e[15];return t[0]=n,t[1]=o,t[2]=c,t[3]=m,t[4]=r,t[5]=s,t[6]=h,t[7]=g,t[8]=i,t[9]=l,t[10]=f,t[11]=_,t[12]=a,t[13]=u,t[14]=p,t[15]=v,t}});const x=5120,y=5121,w=5122,R=5123,E=5124,A=5125,T=5126,P={};{const e=P;e[5120]=Int8Array,e[5121]=Uint8Array,e[5122]=Int16Array,e[5123]=Uint16Array,e[5124]=Int32Array,e[5125]=Uint32Array,e[5126]=Float32Array,e[32819]=Uint16Array,e[32820]=Uint16Array,e[33635]=Uint16Array,e[5131]=Uint16Array,e[33640]=Uint32Array,e[35899]=Uint32Array,e[35902]=Uint32Array,e[36269]=Uint32Array,e[34042]=Uint32Array}function k(e){if(e instanceof Int8Array)return x;if(e instanceof Uint8Array)return y;if(e instanceof Uint8ClampedArray)return y;if(e instanceof Int16Array)return w;if(e instanceof Uint16Array)return R;if(e instanceof Int32Array)return E;if(e instanceof Uint32Array)return A;if(e instanceof Float32Array)return T;throw new Error("unsupported typed array type")}function M(e){if(e===Int8Array)return x;if(e===Uint8Array)return y;if(e===Uint8ClampedArray)return y;if(e===Int16Array)return w;if(e===Uint16Array)return R;if(e===Int32Array)return E;if(e===Uint32Array)return A;if(e===Float32Array)return T;throw new Error("unsupported typed array type")}function S(e){const t=P[e];if(!t)throw new Error("unknown gl type");return t}const I="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};var C=Object.freeze({__proto__:null,getGLTypeForTypedArray:k,getGLTypeForTypedArrayType:M,getTypedArrayTypeForGLType:S,isArrayBuffer:I});function B(e,t){Object.keys(t).forEach((function(n){t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=e[n])}))}function L(...e){console.error(...e)}function O(...e){console.warn(...e)}function F(e,t){return"undefined"!=typeof WebGLRenderbuffer&&t instanceof WebGLRenderbuffer}function D(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture}const j=34962,U={attribPrefix:""};function N(e){U.attribPrefix=e}function $(e){B(e,U)}function q(e,t,n,r,i){e.bindBuffer(t,n),e.bufferData(t,r,i||35044)}function z(e,t,n,r){if(i=t,"undefined"!=typeof WebGLBuffer&&i instanceof WebGLBuffer)return t;var i;n=n||j;const a=e.createBuffer();return q(e,n,a,t,r),a}function V(e){return"indices"===e}function H(e){return e.length?e:e.data}const Y=/coord|texture/i,G=/color|colour/i;function W(e,t){let n;if(n=Y.test(e)?2:G.test(e)?4:3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function X(e,t){return e.numComponents||e.size||W(t,H(e).length)}function Q(e,t){if(I(e))return e;if(I(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type;return n||(n=V(t)?Uint16Array:Float32Array),new n(e.data)}function K(e,t){const n={};return Object.keys(t).forEach((function(r){if(!V(r)){const a=t[r],o=a.attrib||a.name||a.attribName||U.attribPrefix+r;if(a.value){if(!Array.isArray(a.value)&&!I(a.value))throw new Error("array.value is not array or typedarray");n[o]={value:a.value}}else{let t,s,l,u;if(a.buffer&&a.buffer instanceof WebGLBuffer)t=a.buffer,u=a.numComponents||a.size,s=a.type,l=a.normalize;else if("number"==typeof a||"number"==typeof a.data){const n=a.data||a,o=a.type||Float32Array,c=n*o.BYTES_PER_ELEMENT;s=M(o),l=void 0!==a.normalize?a.normalize:(i=o)===Int8Array||i===Uint8Array,u=a.numComponents||a.size||W(r,n),t=e.createBuffer(),e.bindBuffer(j,t),e.bufferData(j,c,a.drawType||35044)}else{const n=Q(a,r);t=z(e,n,void 0,a.drawType),s=k(n),l=void 0!==a.normalize?a.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(n),u=X(a,r)}n[o]={buffer:t,numComponents:u,type:s,normalize:l,stride:a.stride||0,offset:a.offset||0,divisor:void 0===a.divisor?void 0:a.divisor,drawType:a.drawType}}}var i})),e.bindBuffer(j,null),n}function J(e,t,n,r){n=Q(n),void 0!==r?(e.bindBuffer(j,t.buffer),e.bufferSubData(j,r,n)):q(e,j,t.buffer,n,t.drawType)}const Z=["position","positions","a_position"];function ee(e,t,n){const r=K(e,t),i=Object.assign({},n||{});i.attribs=Object.assign({},n?n.attribs:{},r);const a=t.indices;if(a){const t=Q(a,"indices");i.indices=z(e,t,34963),i.numElements=t.length,i.elementType=k(t)}else i.numElements||(i.numElements=function(e,t){let n,r;for(r=0;r<Z.length&&(n=Z[r],!(n in t))&&(n=U.attribPrefix+n,!(n in t));++r);r===Z.length&&(n=Object.keys(t)[0]);const i=t[n];if(!i.buffer)return 1;e.bindBuffer(j,i.buffer);const a=e.getBufferParameter(j,34660);var o;e.bindBuffer(j,null);const s=a/(5120===(o=i.type)||5121===o?1:5122===o||5123===o?2:5124===o||5125===o||5126===o?4:0),l=i.numComponents||i.size,u=s/l;if(u%1!=0)throw new Error(`numComponents ${l} not correct for length ${length}`);return u}(e,i.attribs));return i}function te(e,t,n){const r="indices"===n?34963:j;return z(e,Q(t,n),r)}function ne(e,t){const n={};return Object.keys(t).forEach((function(r){n[r]=te(e,t[r],r)})),t.indices?(n.numElements=t.indices.length,n.elementType=k(Q(t.indices))):n.numElements=function(e){let t,n;for(n=0;n<Z.length&&(t=Z[n],!(t in e));++n);n===Z.length&&(t=Object.keys(e)[0]);const r=e[t],i=H(r).length;if(void 0===i)return 1;const a=X(r,t),o=i/a;if(i%a>0)throw new Error(`numComponents ${a} not correct for length ${i}`);return o}(t),n}var re=Object.freeze({__proto__:null,createAttribsFromArrays:K,createBuffersFromArrays:ne,createBufferFromArray:te,createBufferFromTypedArray:z,createBufferInfoFromArrays:ee,setAttribInfoBufferFromArray:J,setAttributePrefix:N,setAttributeDefaults_:$,getNumComponents_:X,getArray_:H});const ie=H,ae=X;function oe(e,t){let n=0;return e.push=function(){for(let t=0;t<arguments.length;++t){const r=arguments[t];if(r instanceof Array||I(r))for(let t=0;t<r.length;++t)e[n++]=r[t];else e[n++]=r}},e.reset=function(e){n=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function se(e,t,n){return oe(new(n||Float32Array)(e*t),e)}function le(e){return"indices"!==e}function ue(e,t,n){const r=e.length,i=new Float32Array(3);for(let a=0;a<r;a+=3)n(t,[e[a],e[a+1],e[a+2]],i),e[a]=i[0],e[a+1]=i[1],e[a+2]=i[2]}function ce(e,t,n){n=n||r();const i=t[0],a=t[1],o=t[2];return n[0]=i*e[0]+a*e[1]+o*e[2],n[1]=i*e[4]+a*e[5]+o*e[6],n[2]=i*e[8]+a*e[9]+o*e[10],n}function he(e,t){return ue(e,t,v),e}function fe(e,t){return ue(e,g(t),ce),e}function de(e,t){return ue(e,t,_),e}function pe(e,t){return Object.keys(e).forEach((function(n){const r=e[n];n.indexOf("pos")>=0?de(r,t):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?he(r,t):n.indexOf("norm")>=0&&fe(r,t)})),e}function me(e,t,n){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(n=n||0)+-1*e,t+1*e,n+-1*e,t+-1*e,n+1*e,t+1*e,n+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function ge(e,t,n,r,i){e=e||1,t=t||1,n=n||1,r=r||1,i=i||m();const a=(n+1)*(r+1),o=se(3,a),s=se(3,a),l=se(2,a);for(let i=0;i<=r;i++)for(let a=0;a<=n;a++){const u=a/n,c=i/r;o.push(e*u-.5*e,0,t*c-.5*t),s.push(0,1,0),l.push(u,c)}const u=n+1,c=se(3,n*r*2,Uint16Array);for(let e=0;e<r;e++)for(let t=0;t<n;t++)c.push((e+0)*u+t,(e+1)*u+t,(e+0)*u+t+1),c.push((e+1)*u+t,(e+1)*u+t+1,(e+0)*u+t+1);return pe({position:o,normal:s,texcoord:l,indices:c},i)}function _e(e,t,n,r,i,a,o){if(t<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,a=a||0;const s=(i=i||Math.PI)-r,l=(o=o||2*Math.PI)-a,u=(t+1)*(n+1),c=se(3,u),h=se(3,u),f=se(2,u);for(let i=0;i<=n;i++)for(let o=0;o<=t;o++){const u=o/t,d=i/n,p=l*u+a,m=s*d+r,g=Math.sin(p),_=Math.cos(p),v=Math.sin(m),b=_*v,x=Math.cos(m),y=g*v;c.push(e*b,e*x,e*y),h.push(b,x,y),f.push(1-u,d)}const d=t+1,p=se(3,t*n*2,Uint16Array);for(let e=0;e<t;e++)for(let t=0;t<n;t++)p.push((t+0)*d+e,(t+0)*d+e+1,(t+1)*d+e),p.push((t+1)*d+e,(t+0)*d+e+1,(t+1)*d+e+1);return{position:c,normal:h,texcoord:f,indices:p}}const ve=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function be(e){const t=(e=e||1)/2,n=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[1,0],[0,0],[0,1],[1,1]],a=se(3,24),o=se(3,24),s=se(2,24),l=se(3,12,Uint16Array);for(let e=0;e<6;++e){const t=ve[e];for(let l=0;l<4;++l){const u=n[t[l]],c=r[e],h=i[l];a.push(u),o.push(c),s.push(h)}const u=4*e;l.push(u+0,u+1,u+2),l.push(u+0,u+2,u+3)}return{position:a,normal:o,texcoord:s,indices:l}}function xe(e,t,n,r,i,a,o){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(i<1)throw new Error("verticalSubdivisions must be 1 or greater");const s=void 0===a||a,l=void 0===o||o,u=(s?2:0)+(l?2:0),c=(r+1)*(i+1+u),h=se(3,c),f=se(3,c),d=se(2,c),p=se(3,r*(i+u/2)*2,Uint16Array),m=r+1,g=Math.atan2(e-t,n),_=Math.cos(g),v=Math.sin(g),b=i+(l?2:0);for(let a=s?-2:0;a<=b;++a){let o,s=a/i,l=n*s;a<0?(l=0,s=1,o=e):a>i?(l=n,s=1,o=t):o=e+a/i*(t-e),-2!==a&&a!==i+2||(o=0,s=0),l-=n/2;for(let e=0;e<m;++e){const t=Math.sin(e*Math.PI*2/r),n=Math.cos(e*Math.PI*2/r);h.push(t*o,l,n*o),a<0?f.push(0,-1,0):a>i?f.push(0,1,0):0===o?f.push(0,0,0):f.push(t*_,v,n*_),d.push(e/r,1-s)}}for(let e=0;e<i+u;++e)if(!(1===e&&s||e===i+u-2&&l))for(let t=0;t<r;++t)p.push(m*(e+0)+0+t,m*(e+0)+1+t,m*(e+1)+1+t),p.push(m*(e+0)+0+t,m*(e+1)+1+t,m*(e+1)+0+t);return{position:h,normal:f,texcoord:d,indices:p}}function ye(e,t){t=t||[];const n=[];for(let r=0;r<e.length;r+=4){const i=e[r],a=e.slice(r+1,r+4);a.push.apply(a,t);for(let e=0;e<i;++e)n.push.apply(n,a)}return n}function we(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=ye([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=ye([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),r=e.length/3,i={position:se(3,r),texcoord:se(2,r),normal:se(3,r),color:se(4,r,Uint8Array),indices:se(3,r/3,Uint16Array)};i.position.push(e),i.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),i.normal.push(t),i.color.push(n);for(let e=0;e<r;++e)i.indices.push(e);return i}function Re(e,t,n,r,a,o,s){if(a<=0)throw new Error("subdivisionDown must be > 0");const u=(s=s||1)-(o=o||0),c=2*(a+1)*4,h=se(3,c),f=se(3,c),d=se(2,c);function p(e,t,n){return e+(t-e)*n}function m(t,n,s,c,m,g){for(let _=0;_<=a;_++){const v=n/1,b=_/a,x=2*(v-.5),y=(o+b*u)*Math.PI,w=Math.sin(y),R=Math.cos(y),E=p(e,t,w),A=x*r,T=R*e,P=w*E;h.push(A,T,P);const k=i(l([0,w,R],s),c);f.push(k),d.push(v*m+g,b)}}for(let e=0;e<2;e++){const r=2*(e/1-.5);m(t,e,[1,1,1],[0,0,0],1,0),m(t,e,[0,0,0],[r,0,0],0,0),m(n,e,[1,1,1],[0,0,0],1,0),m(n,e,[0,0,0],[r,0,0],0,1)}const g=se(3,2*a*4,Uint16Array);function _(e,t){for(let n=0;n<a;++n)g.push(e+n+0,e+n+1,t+n+0),g.push(e+n+1,t+n+1,t+n+0)}const v=a+1;return _(0*v,4*v),_(5*v,7*v),_(6*v,2*v),_(3*v,1*v),{position:h,normal:f,texcoord:d,indices:g}}function Ee(e,t,n,r,i,a){return xe(e,e,t,n,r,i,a)}function Ae(e,t,n,r,i,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");i=i||0;const o=(a=a||2*Math.PI)-i,s=n+1,l=r+1,u=s*l,c=se(3,u),h=se(3,u),f=se(2,u),d=se(3,n*r*2,Uint16Array);for(let a=0;a<l;++a){const l=a/r,u=l*Math.PI*2,d=Math.sin(u),p=e+d*t,m=Math.cos(u),g=m*t;for(let e=0;e<s;++e){const t=e/n,r=i+t*o,a=Math.sin(r),s=Math.cos(r),u=a*p,_=s*p,v=a*d,b=s*d;c.push(u,g,_),h.push(v,m,b),f.push(t,1-l)}}for(let e=0;e<r;++e)for(let t=0;t<n;++t){const n=1+t,r=1+e;d.push(s*e+t,s*r+t,s*e+n),d.push(s*r+t,s*r+n,s*e+n)}return{position:c,normal:h,texcoord:f,indices:d}}function Te(e,t,n,r,i){if(t<3)throw new Error("divisions must be at least 3");i=i||1,r=r||0;const a=(t+1)*((n=n||1)+1),o=se(3,a),s=se(3,a),l=se(2,a),u=se(3,n*t*2,Uint16Array);let c=0;const h=e-r,f=t+1;for(let e=0;e<=n;++e){const a=r+h*Math.pow(e/n,i);for(let r=0;r<=t;++r){const i=2*Math.PI*r/t,h=a*Math.cos(i),d=a*Math.sin(i);if(o.push(h,0,d),s.push(0,1,0),l.push(1-r/t,e/n),e>0&&r!==t){const e=c+(r+1),t=c+r,n=c+r-f,i=c+(r+1)-f;u.push(e,t,n),u.push(e,n,i)}}c+=t+1}return{position:o,normal:s,texcoord:l,indices:u}}function Pe(e){return function(t){const n=e.apply(this,Array.prototype.slice.call(arguments,1));return ne(t,n)}}function ke(e){return function(t){const n=e.apply(null,Array.prototype.slice.call(arguments,1));return ee(t,n)}}const Me=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function Se(e,t,n,r){r=r||0;const i=e.length;for(let a=0;a<i;++a)t[n+a]=e[a]+r}function Ie(e,t){const n=ie(e),r=new n.constructor(t);let i=r;var a,o;return n.numComponents&&n.numElements&&oe(r,n.numComponents),e.data&&(i={data:r},a=e,o=i,Me.forEach((function(e){const t=a[e];void 0!==t&&(o[e]=t)}))),i}const Ce=ke(we),Be=Pe(we),Le=ke(be),Oe=Pe(be),Fe=ke(ge),De=Pe(ge),je=ke(_e),Ue=Pe(_e),Ne=ke(xe),$e=Pe(xe),qe=ke(me),ze=Pe(me),Ve=ke(Re),He=Pe(Re),Ye=ke(Ee),Ge=Pe(Ee),We=ke(Ae),Xe=Pe(Ae),Qe=ke(Te),Ke=Pe(Te),Je=Ve,Ze=He,et=Re;var tt=Object.freeze({__proto__:null,create3DFBufferInfo:Ce,create3DFBuffers:Be,create3DFVertices:we,createAugmentedTypedArray:se,createCubeBufferInfo:Le,createCubeBuffers:Oe,createCubeVertices:be,createPlaneBufferInfo:Fe,createPlaneBuffers:De,createPlaneVertices:ge,createSphereBufferInfo:je,createSphereBuffers:Ue,createSphereVertices:_e,createTruncatedConeBufferInfo:Ne,createTruncatedConeBuffers:$e,createTruncatedConeVertices:xe,createXYQuadBufferInfo:qe,createXYQuadBuffers:ze,createXYQuadVertices:me,createCresentBufferInfo:Je,createCresentBuffers:Ze,createCresentVertices:et,createCrescentBufferInfo:Ve,createCrescentBuffers:He,createCrescentVertices:Re,createCylinderBufferInfo:Ye,createCylinderBuffers:Ge,createCylinderVertices:Ee,createTorusBufferInfo:We,createTorusBuffers:Xe,createTorusVertices:Ae,createDiscBufferInfo:Qe,createDiscBuffers:Ke,createDiscVertices:Te,deindexVertices:function(e){const t=e.indices,n={},r=t.length;return Object.keys(e).filter(le).forEach((function(i){const a=e[i],o=a.numComponents,s=se(o,r,a.constructor);for(let e=0;e<r;++e){const n=t[e]*o;for(let e=0;e<o;++e)s.push(a[n+e])}n[i]=s})),n},flattenNormals:function(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,n=t.length;for(let e=0;e<n;e+=9){const n=t[e+0],r=t[e+1],i=t[e+2],a=t[e+3],o=t[e+4],s=t[e+5];let l=n+a+t[e+6],u=r+o+t[e+7],c=i+s+t[e+8];const h=Math.sqrt(l*l+u*u+c*c);l/=h,u/=h,c/=h,t[e+0]=l,t[e+1]=u,t[e+2]=c,t[e+3]=l,t[e+4]=u,t[e+5]=c,t[e+6]=l,t[e+7]=u,t[e+8]=c}return e},makeRandomVertexColors:function(e,t){t=t||{};const n=e.position.numElements,r=se(4,n,Uint8Array),i=t.rand||function(e,t){return t<3?(n=256,Math.random()*n|0):255;var n};if(e.color=r,e.indices)for(let e=0;e<n;++e)r.push(i(e,0),i(e,1),i(e,2),i(e,3));else{const e=t.vertsPerColor||3,a=n/e;for(let t=0;t<a;++t){const n=[i(t,0),i(t,1),i(t,2),i(t,3)];for(let t=0;t<e;++t)r.push(n)}}return e},reorientDirections:he,reorientNormals:fe,reorientPositions:de,reorientVertices:pe,concatVertices:function(e){const t={};let n;for(let r=0;r<e.length;++r){const i=e[r];Object.keys(i).forEach((function(e){t[e]||(t[e]=[]),n||"indices"===e||(n=e);const r=i[e],a=ae(r,e),o=ie(r).length/a;t[e].push(o)}))}const r=t[n],i={};return Object.keys(t).forEach((function(t){const n=function(t){let n,r=0;for(let i=0;i<e.length;++i){const a=e[i][t];r+=ie(a).length,n&&!a.data||(n=a)}return{length:r,spec:n}}(t),a=Ie(n.spec,n.length);!function(t,n,r){let i=0,a=0;for(let o=0;o<e.length;++o){const s=e[o][t],l=ie(s);"indices"===t?(Se(l,r,a,i),i+=n[o]):Se(l,r,a),a+=l.length}}(t,r,ie(a)),i[t]=a})),i},duplicateVertices:function(e){const t={};return Object.keys(e).forEach((function(n){const r=e[n],i=ie(r),a=Ie(r,i.length);Se(i,ie(a),0),t[n]=a})),t}});function nt(e){return!!e.texStorage2D}function rt(e){return!e.texStorage2D}const it=function(){const e={},t={};return function(n,r){return function(n){const r=n.constructor.name;if(!e[r]){for(const e in n)if("number"==typeof n[e]){const r=t[n[e]];t[n[e]]=r?`${r} | ${e}`:e}e[r]=!0}}(n),t[r]||("number"==typeof r?`0x${r.toString(16)}`:r)}}();var at=Object.freeze({__proto__:null,glEnumToString:it,isWebGL1:rt,isWebGL2:nt});const ot={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},st=I,lt=function(){let e;return function(){return e=e||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),ut=6406,ct=6407,ht=6408,ft=6409,dt=6410,pt=6402,mt=34041,gt=33071,_t=3553,vt=34067,bt=32879,xt=35866,yt=34069,wt=10241,Rt=10240,Et=10242,At=10243,Tt=3317,Pt=5120,kt=5121,Mt=5122,St=5123,It=5124,Ct=5125,Bt=5126,Lt=5131,Ot=36193,Ft=33640,Dt=33319,jt=33320,Ut=6403,Nt=36244,$t=36248,qt=36249,zt={};{const e=zt;e[6406]={numColorComponents:1},e[6409]={numColorComponents:1},e[6410]={numColorComponents:2},e[6407]={numColorComponents:3},e[6408]={numColorComponents:4},e[6403]={numColorComponents:1},e[36244]={numColorComponents:1},e[33319]={numColorComponents:2},e[33320]={numColorComponents:2},e[6407]={numColorComponents:3},e[36248]={numColorComponents:3},e[6408]={numColorComponents:4},e[36249]={numColorComponents:4},e[6402]={numColorComponents:1},e[34041]={numColorComponents:2}}let Vt;function Ht(e){if(!Vt){const e={};e[6406]={textureFormat:ut,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[kt,Lt,Ot,Bt]},e[6409]={textureFormat:ft,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[kt,Lt,Ot,Bt]},e[6410]={textureFormat:dt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[kt,Lt,Ot,Bt]},e[6407]={textureFormat:ct,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[kt,Lt,Ot,Bt,33635]},e[6408]={textureFormat:ht,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[kt,Lt,Ot,Bt,32819,32820]},e[6402]={textureFormat:pt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Ct,St]},e[33321]={textureFormat:Ut,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[kt]},e[36756]={textureFormat:Ut,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Pt]},e[33325]={textureFormat:Ut,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Bt,Lt]},e[33326]={textureFormat:Ut,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Bt]},e[33330]={textureFormat:Nt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[kt]},e[33329]={textureFormat:Nt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Pt]},e[33332]={textureFormat:Nt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[St]},e[33331]={textureFormat:Nt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Mt]},e[33334]={textureFormat:Nt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ct]},e[33333]={textureFormat:Nt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[It]},e[33323]={textureFormat:Dt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[kt]},e[36757]={textureFormat:Dt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Pt]},e[33327]={textureFormat:Dt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Bt,Lt]},e[33328]={textureFormat:Dt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Bt]},e[33336]={textureFormat:jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[kt]},e[33335]={textureFormat:jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Pt]},e[33338]={textureFormat:jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[St]},e[33337]={textureFormat:jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Mt]},e[33340]={textureFormat:jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ct]},e[33339]={textureFormat:jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[It]},e[32849]={textureFormat:ct,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[kt]},e[35905]={textureFormat:ct,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[kt]},e[36194]={textureFormat:ct,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[kt,33635]},e[36758]={textureFormat:ct,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Pt]},e[35898]={textureFormat:ct,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Bt,Lt,35899]},e[35901]={textureFormat:ct,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Bt,Lt,35902]},e[34843]={textureFormat:ct,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Bt,Lt]},e[34837]={textureFormat:ct,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Bt]},e[36221]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[kt]},e[36239]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Pt]},e[36215]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[St]},e[36233]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Mt]},e[36209]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ct]},e[36227]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[It]},e[32856]={textureFormat:ht,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[kt]},e[35907]={textureFormat:ht,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[kt]},e[36759]={textureFormat:ht,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Pt]},e[32855]={textureFormat:ht,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[kt,32820,Ft]},e[32854]={textureFormat:ht,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[kt,32819]},e[32857]={textureFormat:ht,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ft]},e[34842]={textureFormat:ht,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Bt,Lt]},e[34836]={textureFormat:ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Bt]},e[36220]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kt]},e[36238]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Pt]},e[36975]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ft]},e[36214]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[St]},e[36232]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Mt]},e[36226]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[It]},e[36208]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Ct]},e[33189]={textureFormat:pt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[St,Ct]},e[33190]={textureFormat:pt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ct]},e[36012]={textureFormat:pt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Bt]},e[35056]={textureFormat:mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},e[36013]={textureFormat:mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(e).forEach((function(t){const n=e[t];n.bytesPerElementMap={},n.bytesPerElement.forEach((function(e,t){const r=n.type[t];n.bytesPerElementMap[r]=e}))})),Vt=e}return Vt[e]}function Yt(e,t){const n=Ht(e);if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[t];if(void 0===r)throw"unknown internal format";return r}function Gt(e){const t=Ht(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function Wt(e){return 0==(e&e-1)}function Xt(e,t,n,r){if(!nt(e))return Wt(t)&&Wt(n);const i=Ht(r);if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}function Qt(e){const t=Ht(e);if(!t)throw"unknown internal format";return t.textureFilterable}function Kt(e){const t=zt[e];if(!t)throw"unknown format: "+e;return t.numColorComponents}function Jt(e,t,n){return st(t)?k(t):n||kt}function Zt(e,t,n,r,i){if(i%1!=0)throw"can't guess dimensions";if(n||r){if(r){if(!n&&(n=i/r)%1)throw"can't guess dimensions"}else if((r=i/n)%1)throw"can't guess dimensions"}else{const e=Math.sqrt(i/(t===vt?6:1));e%1==0?(n=e,r=e):(n=i,r=1)}return{width:n,height:r}}function en(e){ot.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function tn(e){B(e,ot),e.textureColor&&en(e.textureColor)}function nn(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(37443,t.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(37441,t.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(37440,t.flipY)}function rn(e){e.pixelStorei(Tt,4),nt(e)&&(e.pixelStorei(3314,0),e.pixelStorei(32878,0),e.pixelStorei(3316,0),e.pixelStorei(3315,0),e.pixelStorei(32877,0))}function an(e,t,n,r){var i;r.minMag&&(n.call(e,t,wt,r.minMag),n.call(e,t,Rt,r.minMag)),r.min&&n.call(e,t,wt,r.min),r.mag&&n.call(e,t,Rt,r.mag),r.wrap&&(n.call(e,t,Et,r.wrap),n.call(e,t,At,r.wrap),(t===bt||(i=t,"undefined"!=typeof WebGLSampler&&i instanceof WebGLSampler))&&n.call(e,t,32882,r.wrap)),r.wrapR&&n.call(e,t,32882,r.wrapR),r.wrapS&&n.call(e,t,Et,r.wrapS),r.wrapT&&n.call(e,t,At,r.wrapT),r.minLod&&n.call(e,t,33082,r.minLod),r.maxLod&&n.call(e,t,33083,r.maxLod),r.baseLevel&&n.call(e,t,33084,r.baseLevel),r.maxLevel&&n.call(e,t,33085,r.maxLevel)}function on(e,t,n){const r=n.target||_t;e.bindTexture(r,t),an(e,r,e.texParameteri,n)}function sn(e,t,n){an(e,t,e.samplerParameteri,n)}function ln(e,t){const n=e.createSampler();return sn(e,n,t),n}function un(e,t){const n={};return Object.keys(t).forEach((function(r){n[r]=ln(e,t[r])})),n}function cn(e,t,n,r,i,a){n=n||ot.textureOptions,a=a||ht;const o=n.target||_t;if(r=r||n.width,i=i||n.height,e.bindTexture(o,t),Xt(e,r,i,a))e.generateMipmap(o);else{const t=Qt(a)?9729:9728;e.texParameteri(o,wt,t),e.texParameteri(o,Rt,t),e.texParameteri(o,Et,gt),e.texParameteri(o,At,gt)}}function hn(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function fn(e,t){return(t=t||{}).cubeFaceOrder||[yt,34070,34071,34072,34073,34074]}function dn(e,t){const n=fn(0,t).map((function(e,t){return{face:e,ndx:t}}));return n.sort((function(e,t){return e.face-t.face})),n}function pn(e,t,n,r){const i=(r=r||ot.textureOptions).target||_t,a=r.level||0;let o=n.width,s=n.height;const l=r.internalFormat||r.format||ht,u=Gt(l),c=r.format||u.format,h=r.type||u.type;if(nn(e,r),e.bindTexture(i,t),i===vt){const u=n.width,f=n.height;let d,p;if(u/6===f)d=f,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(f/6===u)d=u,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(u/3==f/2)d=u/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(u/2!=f/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);d=u/2,p=[0,0,1,0,0,1,1,1,0,2,1,2]}const m=lt();m?(m.canvas.width=d,m.canvas.height=d,o=d,s=d,dn(0,r).forEach((function(t){const r=p[2*t.ndx+0]*d,i=p[2*t.ndx+1]*d;m.drawImage(n,r,i,d,d,0,0,d,d),e.texImage2D(t.face,a,l,c,h,m.canvas)})),m.canvas.width=1,m.canvas.height=1):"undefined"!=typeof createImageBitmap&&(o=d,s=d,dn(0,r).forEach((function(u){const f=p[2*u.ndx+0]*d,m=p[2*u.ndx+1]*d;e.texImage2D(u.face,a,l,d,d,0,c,h,null),createImageBitmap(n,f,m,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(n){nn(e,r),e.bindTexture(i,t),e.texImage2D(u.face,a,l,c,h,n),hn(r)&&cn(e,t,r,o,s,l)}))})))}else if(i===bt||i===xt){const t=Math.min(n.width,n.height),r=Math.max(n.width,n.height),o=r/t;if(o%1!=0)throw"can not compute 3D dimensions of element";const s=n.width===r?1:0,u=n.height===r?1:0;e.pixelStorei(Tt,1),e.pixelStorei(3314,n.width),e.pixelStorei(32878,0),e.pixelStorei(32877,0),e.texImage3D(i,a,l,t,t,t,0,c,h,null);for(let r=0;r<o;++r){const o=r*t*s,l=r*t*u;e.pixelStorei(3316,o),e.pixelStorei(3315,l),e.texSubImage3D(i,a,0,0,r,t,t,1,c,h,n)}rn(e)}else e.texImage2D(i,a,l,c,h,n);hn(r)&&cn(e,t,r,o,s,l),on(e,t,r)}function mn(){}function gn(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}(e)?t:"anonymous"}function _n(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function vn(e,t,n){return _n(e)?(setTimeout((function(){n(null,e)})),e):function(e,t,n){let r;if(n=n||mn,t=void 0!==t?t:ot.crossOrigin,t=gn(e,t),"undefined"!=typeof Image){r=new Image,void 0!==t&&(r.crossOrigin=t);const i=function(){r.removeEventListener("error",a),r.removeEventListener("load",o),r=null},a=function(){const t="couldn't load image: "+e;L(t),n(t,r),i()},o=function(){n(null,r),i()};return r.addEventListener("error",a),r.addEventListener("load",o),r.src=e,r}if("undefined"!=typeof ImageBitmap){let i,a;const o=function(){n(i,a)},s={};t&&(s.mode="cors"),fetch(e,s).then((function(e){if(!e.ok)throw e;return e.blob()})).then((function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(e){a=e,setTimeout(o)})).catch((function(e){i=e,setTimeout(o)})),r=null}return r}(e,t,n)}function bn(e,t,n){const r=(n=n||ot.textureOptions).target||_t;if(e.bindTexture(r,t),!1===n.color)return;const i=function(e){return e=e||ot.textureColor,st(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(n.color);if(r===vt)for(let t=0;t<6;++t)e.texImage2D(yt+t,0,ht,1,1,0,ht,kt,i);else r===bt||r===xt?e.texImage3D(r,0,ht,1,1,1,0,ht,kt,i):e.texImage2D(r,0,ht,1,1,0,ht,kt,i)}function xn(e,t,n,r){r=r||mn,n=n||ot.textureOptions,bn(e,t,n);return vn((n=Object.assign({},n)).src,n.crossOrigin,(function(i,a){i?r(i,t,a):(pn(e,t,a,n),r(null,t,a))}))}function yn(e,t,n,r){r=r||mn;const i=n.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";const a=n.level||0,o=n.internalFormat||n.format||ht,s=Gt(o),l=n.format||s.format,u=n.type||kt,c=n.target||_t;if(c!==vt)throw"target must be TEXTURE_CUBE_MAP";bn(e,t,n),n=Object.assign({},n);let h=6;const f=[],d=fn(0,n);let p;p=i.map((function(i,s){return vn(i,n.crossOrigin,(m=d[s],function(i,s){--h,i?f.push(i):s.width!==s.height?f.push("cubemap face img is not a square: "+s.src):(nn(e,n),e.bindTexture(c,t),5===h?fn().forEach((function(t){e.texImage2D(t,a,o,l,u,s)})):e.texImage2D(m,a,o,l,u,s),hn(n)&&e.generateMipmap(c)),0===h&&r(f.length?f:void 0,t,p)}));var m}))}function wn(e,t,n,r){r=r||mn;const i=n.src,a=n.internalFormat||n.format||ht,o=Gt(a),s=n.format||o.format,l=n.type||kt,u=n.target||xt;if(u!==bt&&u!==xt)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";bn(e,t,n),n=Object.assign({},n);let c=i.length;const h=[];let f;const d=n.level||0;let p=n.width,m=n.height;const g=i.length;let _=!0;f=i.map((function(i,o){return vn(i,n.crossOrigin,(v=o,function(i,o){if(--c,i)h.push(i);else{if(nn(e,n),e.bindTexture(u,t),_){_=!1,p=n.width||o.width,m=n.height||o.height,e.texImage3D(u,d,a,p,m,g,0,s,l,null);for(let t=0;t<g;++t)e.texSubImage3D(u,d,0,0,t,p,m,1,s,l,o)}else{let t,n=o;o.width===p&&o.height===m||(t=lt(),n=t.canvas,t.canvas.width=p,t.canvas.height=m,t.drawImage(o,0,0,p,m)),e.texSubImage3D(u,d,0,0,v,p,m,1,s,l,n),t&&n===t.canvas&&(t.canvas.width=0,t.canvas.height=0)}hn(n)&&e.generateMipmap(u)}0===c&&r(h.length?h:void 0,t,f)}));var v}))}function Rn(e,t,n,r){const i=(r=r||ot.textureOptions).target||_t;e.bindTexture(i,t);let a=r.width,o=r.height,s=r.depth;const l=r.level||0,u=r.internalFormat||r.format||ht,c=Gt(u),h=r.format||c.format,f=r.type||Jt(0,n,c.type);if(st(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const e=S(f);n=new e(n)}const d=Yt(u,f),p=n.byteLength/d;if(p%1)throw"length wrong size for format: "+it(e,h);let m;if(i===bt||i===xt)if(a||o||s)!a||o&&s?!o||a&&s?(m=Zt(0,i,a,o,p/s),a=m.width,o=m.height):(m=Zt(0,i,a,s,p/o),a=m.width,s=m.height):(m=Zt(0,i,o,s,p/a),o=m.width,s=m.height);else{const e=Math.cbrt(p);if(e%1!=0)throw"can't guess cube size of array of numElements: "+p;a=e,o=e,s=e}else m=Zt(0,i,a,o,p),a=m.width,o=m.height;if(rn(e),e.pixelStorei(Tt,r.unpackAlignment||1),nn(e,r),i===vt){const t=p/6*(d/n.BYTES_PER_ELEMENT);dn(0,r).forEach((r=>{const i=t*r.ndx,s=n.subarray(i,i+t);e.texImage2D(r.face,l,u,a,o,0,h,f,s)}))}else i===bt||i===xt?e.texImage3D(i,l,u,a,o,s,0,h,f,n):e.texImage2D(i,l,u,a,o,0,h,f,n);return{width:a,height:o,depth:s,type:f}}function En(e,t,n){const r=n.target||_t;e.bindTexture(r,t);const i=n.level||0,a=n.internalFormat||n.format||ht,o=Gt(a),s=n.format||o.format,l=n.type||o.type;if(nn(e,n),r===vt)for(let t=0;t<6;++t)e.texImage2D(yt+t,i,a,n.width,n.height,0,s,l,null);else r===bt||r===xt?e.texImage3D(r,i,a,n.width,n.height,n.depth,0,s,l,null):e.texImage2D(r,i,a,n.width,n.height,0,s,l,null)}function An(e,t,n){n=n||mn,t=t||ot.textureOptions;const r=e.createTexture(),i=t.target||_t;let a=t.width||1,o=t.height||1;const s=t.internalFormat||ht;e.bindTexture(i,r),i===vt&&(e.texParameteri(i,Et,gt),e.texParameteri(i,At,gt));let l=t.src;if(l)if("function"==typeof l&&(l=l(e,t)),"string"==typeof l)xn(e,r,t,n);else if(st(l)||Array.isArray(l)&&("number"==typeof l[0]||Array.isArray(l[0])||st(l[0]))){const n=Rn(e,r,l,t);a=n.width,o=n.height}else Array.isArray(l)&&("string"==typeof l[0]||_n(l[0]))?i===vt?yn(e,r,t,n):wn(e,r,t,n):(pn(e,r,l,t),a=l.width,o=l.height);else En(e,r,t);return hn(t)&&cn(e,r,t,a,o,s),on(e,r,t),r}function Tn(e,t,n,r,i,a){r=r||n.width,i=i||n.height,a=a||n.depth;const o=n.target||_t;e.bindTexture(o,t);const s=n.level||0,l=n.internalFormat||n.format||ht,u=Gt(l),c=n.format||u.format;let h;const f=n.src;if(h=f&&(st(f)||Array.isArray(f)&&"number"==typeof f[0])?n.type||Jt(0,f,u.type):n.type||u.type,o===vt)for(let t=0;t<6;++t)e.texImage2D(yt+t,s,l,r,i,0,c,h,null);else o===bt||o===xt?e.texImage3D(o,s,l,r,i,a,0,c,h,null):e.texImage2D(o,s,l,r,i,0,c,h,null)}function Pn(e,t,n){n=n||mn;let r=0;const i=[],a={},o={};function s(){0===r&&setTimeout((function(){n(i.length?i:void 0,a,o)}),0)}return Object.keys(t).forEach((function(n){const l=t[n];let u;var c;("string"==typeof(c=l.src)||Array.isArray(c)&&"string"==typeof c[0])&&(u=function(e,t,a){o[n]=a,--r,e&&i.push(e),s()},++r),a[n]=An(e,l,u)})),s(),a}var kn=Object.freeze({__proto__:null,setTextureDefaults_:tn,createSampler:ln,createSamplers:un,setSamplerParameters:sn,createTexture:An,setEmptyTexture:En,setTextureFromArray:Rn,loadTextureFromUrl:xn,setTextureFromElement:pn,setTextureFilteringForSize:cn,setTextureParameters:on,setDefaultTextureColor:en,createTextures:Pn,resizeTexture:Tn,canGenerateMipmap:Xt,canFilter:Qt,getNumComponentsForFormat:Kt,getBytesPerElementForInternalFormat:Yt,getFormatAndTypeForInternalFormat:Gt});const Mn=L,Sn=O;function In(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}const Cn=33984,Bn=34962,Ln=35345,On=5126,Fn=5124,Dn=5125,jn=3553,Un=34067,Nn=32879,$n=35866,qn={};function zn(e,t){return qn[t].bindPoint}function Vn(e,t){return function(n){e.uniform1i(t,n)}}function Hn(e,t){return function(n){e.uniform1iv(t,n)}}function Yn(e,t){return function(n){e.uniform2iv(t,n)}}function Gn(e,t){return function(n){e.uniform3iv(t,n)}}function Wn(e,t){return function(n){e.uniform4iv(t,n)}}function Xn(e,t,n,r){const i=zn(0,t);return nt(e)?function(t){let a,o;D(0,t)?(a=t,o=null):(a=t.texture,o=t.sampler),e.uniform1i(r,n),e.activeTexture(Cn+n),e.bindTexture(i,a),e.bindSampler(n,o)}:function(t){e.uniform1i(r,n),e.activeTexture(Cn+n),e.bindTexture(i,t)}}function Qn(e,t,n,r,i){const a=zn(0,t),o=new Int32Array(i);for(let e=0;e<i;++e)o[e]=n+e;return nt(e)?function(t){e.uniform1iv(r,o),t.forEach((function(t,r){let i,s;e.activeTexture(Cn+o[r]),D(0,t)?(i=t,s=null):(i=t.texture,s=t.sampler),e.bindSampler(n,s),e.bindTexture(a,i)}))}:function(t){e.uniform1iv(r,o),t.forEach((function(t,n){e.activeTexture(Cn+o[n]),e.bindTexture(a,t)}))}}function Kn(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Bn,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||On,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function Jn(e,t){return function(n){if(n.value){if(e.disableVertexAttribArray(t),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,n.value)}else e.bindBuffer(Bn,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||Fn,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function Zn(e,t){return function(n){if(n.value){if(e.disableVertexAttribArray(t),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,n.value)}else e.bindBuffer(Bn,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||Dn,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function er(e,t,n){const r=n.size,i=n.count;return function(n){e.bindBuffer(Bn,n.buffer);const a=n.size||n.numComponents||r,o=a/i,s=n.type||On,l=qn[s].size*a,u=n.normalize||!1,c=n.offset||0,h=l/i;for(let r=0;r<i;++r)e.enableVertexAttribArray(t+r),e.vertexAttribPointer(t+r,o,s,u,l,c+h*r),void 0!==n.divisor&&e.vertexAttribDivisor(t+r,n.divisor)}}qn[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(n){e.uniform1f(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1fv(t,n)}}},qn[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(n){e.uniform2fv(t,n)}},cols:2},qn[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(n){e.uniform3fv(t,n)}},cols:3},qn[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(n){e.uniform4fv(t,n)}},cols:4},qn[5124]={Type:Int32Array,size:4,setter:Vn,arraySetter:Hn},qn[35667]={Type:Int32Array,size:8,setter:Yn,cols:2},qn[35668]={Type:Int32Array,size:12,setter:Gn,cols:3},qn[35669]={Type:Int32Array,size:16,setter:Wn,cols:4},qn[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(n){e.uniform1ui(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1uiv(t,n)}}},qn[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(n){e.uniform2uiv(t,n)}},cols:2},qn[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(n){e.uniform3uiv(t,n)}},cols:3},qn[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(n){e.uniform4uiv(t,n)}},cols:4},qn[35670]={Type:Uint32Array,size:4,setter:Vn,arraySetter:Hn},qn[35671]={Type:Uint32Array,size:8,setter:Yn,cols:2},qn[35672]={Type:Uint32Array,size:12,setter:Gn,cols:3},qn[35673]={Type:Uint32Array,size:16,setter:Wn,cols:4},qn[35674]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}},rows:2,cols:2},qn[35675]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}},rows:3,cols:3},qn[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}},rows:4,cols:4},qn[35685]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}},rows:2,cols:3},qn[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}},rows:2,cols:4},qn[35687]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}},rows:3,cols:2},qn[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}},rows:3,cols:4},qn[35689]={Type:Float32Array,size:64,setter:function(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}},rows:4,cols:2},qn[35690]={Type:Float32Array,size:64,setter:function(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}},rows:4,cols:3},qn[35678]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:jn},qn[35680]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:Un},qn[35679]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:Nn},qn[35682]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:jn},qn[36289]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:$n},qn[36292]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:$n},qn[36293]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:Un},qn[36298]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:jn},qn[36299]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:Nn},qn[36300]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:Un},qn[36303]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:$n},qn[36306]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:jn},qn[36307]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:Nn},qn[36308]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:Un},qn[36311]={Type:null,size:0,setter:Xn,arraySetter:Qn,bindPoint:$n};const tr={};tr[5126]={size:4,setter:Kn},tr[35664]={size:8,setter:Kn},tr[35665]={size:12,setter:Kn},tr[35666]={size:16,setter:Kn},tr[5124]={size:4,setter:Jn},tr[35667]={size:8,setter:Jn},tr[35668]={size:12,setter:Jn},tr[35669]={size:16,setter:Jn},tr[5125]={size:4,setter:Zn},tr[36294]={size:8,setter:Zn},tr[36295]={size:12,setter:Zn},tr[36296]={size:16,setter:Zn},tr[35670]={size:4,setter:Jn},tr[35671]={size:8,setter:Jn},tr[35672]={size:12,setter:Jn},tr[35673]={size:16,setter:Jn},tr[35674]={size:4,setter:er,count:2},tr[35675]={size:9,setter:er,count:3},tr[35676]={size:16,setter:er,count:4};const nr=/ERROR:\s*\d+:(\d+)/gi;const rr=/^[ \t]*\n/;function ir(e){let t=0;return rr.test(e)&&(t=1,e=e.replace(rr,"")),{lineOffset:t,shaderSource:e}}function ar(e,t){return e.errorCallback(t),e.callback&&setTimeout((()=>{e.callback(`${t}\n${e.errors.join("\n")}`)})),null}function or(e,t,n,r){const i=e.createShader(n);return e.shaderSource(i,ir(t).shaderSource),e.compileShader(i),r.callback||function(e,t,n,r){r=r||Mn;const i=e.getShaderParameter(n,35713);if(!i){const i=e.getShaderInfoLog(n),{lineOffset:a,shaderSource:o}=ir(e.getShaderSource(n));r(`${function(e,t="",n=0){const r=[...t.matchAll(nr)],i=new Map(r.map(((e,n)=>{const i=parseInt(e[1]),a=r[n+1],o=a?a.index:t.length;return[i-1,t.substring(e.index,o)]})));return e.split("\n").map(((e,t)=>{const r=i.get(t);return`${t+1+n}: ${e}${r?`\n\n^^^ ${r}`:""}`})).join("\n")}(o,i,a)}\nError compiling ${it(e,t)}: ${i}`)}return i}(e,n,i,r.errorCallback)?i:(e.deleteShader(i),null)}function sr(e,t,n){let r,i,a;if("function"==typeof t&&(n=t,t=void 0),"function"==typeof e)n=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback&&e.errors)return e;const t=e;n=t.errorCallback,e=t.attribLocations,r=t.transformFeedbackVaryings,i=t.transformFeedbackMode,a=t.callback}const o=n||Mn,s=[],l={errorCallback(e,...t){s.push(e),o(e,...t)},transformFeedbackVaryings:r,transformFeedbackMode:i,callback:a,errors:s};if(e){let n={};Array.isArray(e)?e.forEach((function(e,r){n[e]=t?t[r]:r})):n=e,l.attribLocations=n}return l}const lr=["VERTEX_SHADER","FRAGMENT_SHADER"];function ur(e,t){return t.indexOf("frag")>=0?35632:t.indexOf("vert")>=0?35633:void 0}function cr(e,t){t.forEach((function(t){e.deleteShader(t)}))}const hr=(e=0)=>new Promise((t=>setTimeout(t,e)));function fr(e,t,n,r,i){const a=sr(n,r,i),o=[],s=[];for(let n=0;n<t.length;++n){let r=t[n];if("string"==typeof r){const t=In(r),i=t?t.text:r;let o=e[lr[n]];t&&t.type&&(o=ur(0,t.type)||o),r=or(e,i,o,a),s.push(r)}l=r,"undefined"!=typeof WebGLShader&&l instanceof WebGLShader&&o.push(r)}var l;if(o.length!==t.length)return cr(e,s),ar(a,"not enough shaders for program");const u=e.createProgram();o.forEach((function(t){e.attachShader(u,t)})),a.attribLocations&&Object.keys(a.attribLocations).forEach((function(t){e.bindAttribLocation(u,a.attribLocations[t],t)}));let c=a.transformFeedbackVaryings;return c&&(c.attribs&&(c=c.attribs),Array.isArray(c)||(c=Object.keys(c)),e.transformFeedbackVaryings(u,c,a.transformFeedbackMode||35981)),e.linkProgram(u),a.callback?(async function(e,t,n){const r=e.getExtension("KHR_parallel_shader_compile"),i=r?(e,t)=>e.getProgramParameter(t,r.COMPLETION_STATUS_KHR):()=>!0;let a=0;do{await hr(a),a=1e3/60}while(!i(e,t));const o=mr(e,t,n.errorCallback),s=o?void 0:n.errors.join("\n");if(!o){(n.errorCallback||Mn)(s),e.deleteProgram(t),t=null}n.callback(s,t)}(e,u,a),null):mr(e,u,a.errorCallback)?u:(e.deleteProgram(u),cr(e,s),null)}function dr(e,t,...n){return new Promise(((r,i)=>{const a=sr(...n);a.callback=(e,t)=>{e?i(e):r(t)},fr(e,t,a)}))}function pr(e,t,...n){return new Promise(((r,i)=>{const a=sr(...n);a.callback=(e,t)=>{e?i(e):r(t)},$r(e,t,a)}))}function mr(e,t,n){n=n||Mn;const r=e.getProgramParameter(t,35714);if(!r){n(`Error in program linking: ${e.getProgramInfoLog(t)}`)}return r}function gr(e,t,n,r){let i="";const a=In(t);if(!a)return ar(r,`unknown script element: ${t}`);i=a.text;const o=n||ur(0,a.type);return o?or(e,i,o,r):ar(r,"unknown shader type")}function _r(e,t,n,r,i){const a=sr(n,r,i),o=[];for(let n=0;n<t.length;++n){const r=gr(e,t[n],e[lr[n]],a);if(!r)return null;o.push(r)}return fr(e,o,a)}function vr(e,t,n,r,i){const a=sr(n,r,i),o=[];for(let n=0;n<t.length;++n){const r=or(e,t[n],e[lr[n]],a);if(!a.callback&&!r)return null;o.push(r)}return fr(e,o,a)}function br(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const xr=/(\.|\[|]|\w+)/g;function yr(e,t,n,r){const i=e.split(xr).filter((e=>""!==e));let a=0,o="";for(;;){const e=i[a++];o+=e;const l=(s=e[0])>="0"&&s<="9",u=l?parseInt(e):e;l&&(o+=i[a++]);if(a===i.length){n[u]=t;break}{const e=i[a++],t="["===e,s=n[u]||(t?[]:{});n[u]=s,n=s,r[o]=r[o]||function(e){return function(t){Br(e,t)}}(s),o+=e}}var s}function wr(e,t){let n=0;function r(t,r,i){const a=r.name.endsWith("[0]"),o=r.type,s=qn[o];if(!s)throw new Error(`unknown type: 0x${o.toString(16)}`);let l;if(s.bindPoint){const t=n;n+=r.size,l=a?s.arraySetter(e,o,t,i,r.size):s.setter(e,o,t,i,r.size)}else l=s.arraySetter&&a?s.arraySetter(e,i):s.setter(e,i);return l.location=i,l}const i={},a={},o=e.getProgramParameter(t,35718);for(let n=0;n<o;++n){const o=e.getActiveUniform(t,n);if(br(o))continue;let s=o.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));const l=e.getUniformLocation(t,o.name);if(l){const e=r(0,o,l);i[s]=e,yr(s,e,a,i)}}return i}function Rr(e,t){const n={},r=e.getProgramParameter(t,35971);for(let i=0;i<r;++i){const r=e.getTransformFeedbackVarying(t,i);n[r.name]={index:i,type:r.type,size:r.size}}return n}function Er(e,t,n){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(const r in n){const i=t[r];if(i){const t=n[r];t.offset?e.bindBufferRange(35982,i.index,t.buffer,t.offset,t.size):e.bindBufferBase(35982,i.index,t.buffer)}}}function Ar(e,t,n){const r=e.createTransformFeedback();return e.bindTransformFeedback(36386,r),e.useProgram(t.program),Er(e,t,n),e.bindTransformFeedback(36386,null),r}function Tr(e,t){const n=e.getProgramParameter(t,35718),r=[],i=[];for(let a=0;a<n;++a){i.push(a),r.push({});const n=e.getActiveUniform(t,a);r[a].name=n.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){const a=n[0],o=n[1];e.getActiveUniforms(t,i,e[a]).forEach((function(e,t){r[t][o]=e}))}));const a={},o=e.getProgramParameter(t,35382);for(let n=0;n<o;++n){const r=e.getActiveUniformBlockName(t,n),i={index:e.getUniformBlockIndex(t,r),usedByVertexShader:e.getActiveUniformBlockParameter(t,n,35396),usedByFragmentShader:e.getActiveUniformBlockParameter(t,n,35398),size:e.getActiveUniformBlockParameter(t,n,35392),uniformIndices:e.getActiveUniformBlockParameter(t,n,35395)};i.used=i.usedByVertexShader||i.usedByFragmentShader,a[r]=i}return{blockSpecs:a,uniformData:r}}const Pr=/\[\d+\]\.$/;function kr(e,t,n,r){const i=n.blockSpecs,a=n.uniformData,o=i[r];if(!o)return Sn("no uniform block object named:",r),{name:r,uniforms:{}};const s=new ArrayBuffer(o.size),l=e.createBuffer(),u=o.index;e.bindBuffer(Ln,l),e.uniformBlockBinding(t,o.index,u);let c=r+".";Pr.test(c)&&(c=c.replace(Pr,"."));const h={},f={},d={};return o.uniformIndices.forEach((function(e){const t=a[e];let n=t.name;n.startsWith(c)&&(n=n.substr(c.length));const r=n.endsWith("[0]");r&&(n=n.substr(0,n.length-3));const i=qn[t.type],o=i.Type,l=r?((i.size+((u=16)-1))/u|0)*u*t.size:i.size*t.size;var u;const p=new o(s,t.offset,l/o.BYTES_PER_ELEMENT);h[n]=p;const m=function(e,t,n,r){if(t||n){r=r||1;const t=e.length/4;return function(n){let i=0,a=0;for(let o=0;o<t;++o){for(let t=0;t<r;++t)e[i++]=n[a++];i+=4-r}}}return function(t){t.length?e.set(t):e[0]=t}}(p,r,i.rows,i.cols);f[n]=m,yr(n,m,d,f)})),{name:r,array:s,asFloat:new Float32Array(s),buffer:l,uniforms:h,setters:f}}function Mr(e,t,n){return kr(e,t.program,t.uniformBlockSpec,n)}function Sr(e,t,n){const r=(t.uniformBlockSpec||t).blockSpecs[n.name];if(r){const t=r.index;return e.bindBufferRange(Ln,t,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function Ir(e,t,n){Sr(e,t,n)&&e.bufferData(Ln,n.array,35048)}function Cr(e,t){const n=e.setters;for(const e in t){const r=n[e];if(r){r(t[e])}}}function Br(e,t){for(const n in t){const r=e[n];"function"==typeof r?r(t[n]):Br(e[n],t[n])}}function Lr(e,...t){const n=e.uniformSetters||e,r=t.length;for(let e=0;e<r;++e){const r=t[e];if(Array.isArray(r)){const e=r.length;for(let t=0;t<e;++t)Lr(n,r[t])}else for(const e in r){const t=n[e];t&&t(r[e])}}}const Or=Lr;function Fr(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;++i){const r=e.getActiveAttrib(t,i);if(br(r))continue;const a=e.getAttribLocation(t,r.name),o=tr[r.type],s=o.setter(e,a,o);s.location=a,n[r.name]=s}return n}function Dr(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function jr(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(Dr(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(34963,n.indices))}function Ur(e,t){const n={program:t,uniformSetters:wr(e,t),attribSetters:Fr(e,t)};return nt(e)&&(n.uniformBlockSpec=Tr(e,t),n.transformFeedbackInfo=Rr(e,t)),n}const Nr=/\s|{|}|;/;function $r(e,t,n,r,i){const a=sr(n,r,i),o=[];if(t=t.map((function(e){if(!Nr.test(e)){const t=In(e);if(t)e=t.text;else{const t=`no element with id: ${e}`;a.errorCallback(t),o.push(t)}}return e})),o.length)return ar(a,"");const s=a.callback;s&&(a.callback=(t,n)=>{let r;t||(r=Ur(e,n)),s(t,r)});const l=vr(e,t,a);return l?Ur(e,l):null}var qr=Object.freeze({__proto__:null,createAttributeSetters:Fr,createProgram:fr,createProgramAsync:dr,createProgramFromScripts:_r,createProgramFromSources:vr,createProgramInfo:$r,createProgramInfoAsync:pr,createProgramInfoFromProgram:Ur,createUniformSetters:wr,createUniformBlockSpecFromProgram:Tr,createUniformBlockInfoFromProgram:kr,createUniformBlockInfo:Mr,createTransformFeedback:Ar,createTransformFeedbackInfo:Rr,bindTransformFeedbackInfo:Er,setAttributes:Dr,setBuffersAndAttributes:jr,setUniforms:Lr,setUniformsAndBindTextures:Or,setUniformBlock:Ir,setBlockUniforms:Cr,bindUniformBlock:Sr});function zr(e,t,n,r,i,a){n=void 0===n?4:n;const o=t.indices,s=t.elementType,l=void 0===r?t.numElements:r;i=void 0===i?0:i,s||o?void 0!==a?e.drawElementsInstanced(n,l,void 0===s?5123:t.elementType,i,a):e.drawElements(n,l,void 0===s?5123:t.elementType,i):void 0!==a?e.drawArraysInstanced(n,i,l,a):e.drawArrays(n,i,l)}function Vr(e,t){let n=null,r=null;t.forEach((function(t){if(!1===t.active)return;const i=t.programInfo,a=t.vertexArrayInfo||t.bufferInfo;let o=!1;const s=void 0===t.type?4:t.type;i!==n&&(n=i,e.useProgram(i.program),o=!0),(o||a!==r)&&(r&&r.vertexArrayObject&&!a.vertexArrayObject&&e.bindVertexArray(null),r=a,jr(e,i,a)),Lr(i,t.uniforms),zr(e,a,s,t.count,t.offset,t.instanceCount)})),r&&r.vertexArrayObject&&e.bindVertexArray(null)}var Hr=Object.freeze({__proto__:null,drawBufferInfo:zr,drawObjectList:Vr});const Yr=36161,Gr=34041,Wr=36064,Xr=36096,Qr=33306,Kr=33071,Jr=9729,Zr=[{format:6408,type:5121,min:Jr,wrap:Kr},{format:Gr}],ei={};ei[34041]=Qr,ei[6401]=36128,ei[36168]=36128,ei[6402]=Xr,ei[33189]=Xr,ei[33190]=Xr,ei[36012]=Xr,ei[35056]=Qr,ei[36013]=Qr;const ti={};ti[32854]=!0,ti[32855]=!0,ti[36194]=!0,ti[34041]=!0,ti[33189]=!0,ti[6401]=!0,ti[36168]=!0;function ni(e,t,n,r){const i=36160,a=e.createFramebuffer();e.bindFramebuffer(i,a),n=n||e.drawingBufferWidth,r=r||e.drawingBufferHeight;const o=[],s={framebuffer:a,attachments:[],width:n,height:r};return(t=t||Zr).forEach((function(t,a){let l=t.attachment;const u=t.samples,c=t.format;let h=t.attachmentPoint||function(e,t){return ei[e]||ei[t]}(c,t.internalFormat);if(h||(h=Wr+a),function(e){return e>=Wr&&e<36096}(h)&&o.push(h),!l)if(void 0!==u||function(e){return ti[e]}(c))l=e.createRenderbuffer(),e.bindRenderbuffer(Yr,l),u>1?e.renderbufferStorageMultisample(Yr,u,c,n,r):e.renderbufferStorage(Yr,c,n,r);else{const i=Object.assign({},t);i.width=n,i.height=r,void 0===i.auto&&(i.auto=!1,i.min=i.min||i.minMag||Jr,i.mag=i.mag||i.minMag||Jr,i.wrapS=i.wrapS||i.wrap||Kr,i.wrapT=i.wrapT||i.wrap||Kr),l=An(e,i)}if(F(0,l))e.framebufferRenderbuffer(i,h,Yr,l);else{if(!D(0,l))throw new Error("unknown attachment type");void 0!==t.layer?e.framebufferTextureLayer(i,h,l,t.level||0,t.layer):e.framebufferTexture2D(i,h,t.target||3553,l,t.level||0)}s.attachments.push(l)})),e.drawBuffers&&e.drawBuffers(o),s}function ri(e,t,n,r,i){r=r||e.drawingBufferWidth,i=i||e.drawingBufferHeight,t.width=r,t.height=i,(n=n||Zr).forEach((function(n,a){const o=t.attachments[a],s=n.format,l=n.samples;if(void 0!==l||F(0,o))e.bindRenderbuffer(Yr,o),l>1?e.renderbufferStorageMultisample(Yr,l,s,r,i):e.renderbufferStorage(Yr,s,r,i);else{if(!D(0,o))throw new Error("unknown attachment type");Tn(e,o,n,r,i)}}))}function ii(e,t,n){n=n||36160,t?(e.bindFramebuffer(n,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(n,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}var ai=Object.freeze({__proto__:null,bindFramebufferInfo:ii,createFramebufferInfo:ni,resizeFramebufferInfo:ri});function oi(e,t,n){const r=e.createVertexArray();return e.bindVertexArray(r),t.length||(t=[t]),t.forEach((function(t){jr(e,t,n)})),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}function si(e,t,n,r){const i=e.createVertexArray();return e.bindVertexArray(i),Dr(t,n),r&&e.bindBuffer(34963,r),e.bindVertexArray(null),i}function li(e,t,n){return si(e,t.attribSetters||t,n.attribs,n.indices)}var ui=Object.freeze({__proto__:null,createVertexArrayInfo:oi,createVAOAndSetAttributes:si,createVAOFromBufferInfo:li});const ci={addExtensionsToContext:!0};function hi(e){B(e,ci),$(e),tn(e)}const fi=/^(.*?)_/;function di(e,t){it(e,0);const n=e.getExtension(t);if(n){const r={},i=fi.exec(t)[1],a="_"+i;for(const t in n){const o=n[t],s="function"==typeof o,l=s?i:a;let u=t;t.endsWith(l)&&(u=t.substring(0,t.length-l.length)),void 0!==e[u]?s||e[u]===o||O(u,e[u],o,t):s?e[u]=function(e){return function(){return e.apply(n,arguments)}}(o):(e[u]=o,r[u]=o)}r.constructor={name:n.constructor.name},it(r,0)}return n}const pi=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function mi(e){for(let t=0;t<pi.length;++t)di(e,pi[t])}function gi(e,t){const n=function(e,t){const n=["webgl","experimental-webgl"];let r=null;for(let i=0;i<n.length;++i)if(r=e.getContext(n[i],t),r){ci.addExtensionsToContext&&mi(r);break}return r}(e,t);return n}function _i(e,t){const n=function(e,t){const n=["webgl2","webgl","experimental-webgl"];let r=null;for(let i=0;i<n.length;++i)if(r=e.getContext(n[i],t),r){ci.addExtensionsToContext&&mi(r);break}return r}(e,t);return n}function vi(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,r=e.clientHeight*t|0;return(e.width!==n||e.height!==r)&&(e.width=n,e.height=r,!0)}})),parcelRequire.register("6sBfR",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("dyQXb"),import.meta.url).toString()})),parcelRequire.register("1sBOu",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("6AWHT"),import.meta.url).toString()})),parcelRequire.register("7Clsh",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("fHbrQ"),import.meta.url).toString()})),parcelRequire.register("4KiTC",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("250Xl"),import.meta.url).toString()})),parcelRequire.register("eFNrz",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("KQ6EN"),import.meta.url).toString()})),parcelRequire.register("2Fz3v",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("fsxiN"),import.meta.url).toString()})),parcelRequire.register("53UYj",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("jprWk"),import.meta.url).toString()})),parcelRequire.register("2GtWk",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("j0DQL"),import.meta.url).toString()})),parcelRequire.register("ehFNO",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("aDeMZ"),import.meta.url).toString()})),parcelRequire.register("27dBK",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Animation1=void 0;const a=i(parcelRequire("6kmNl")),o=i(parcelRequire("fhSLN")),s=i(parcelRequire("dC4mA"));class l extends s.BaseApp{constructor(e,t,n,r,i){super(e,t,r,i),this.animation1Parameters={b:this.baseappParameters,texture:"geotriangle2",fov:60,typelight:"point light",sling:117,shininess:.1,movetail:!0},this.ctime=(new Date).getTime(),this.doclear=!0,this.doTwglEnv=!1,this.scene=n,this.clock=new a.AnimationClock}initGUI(e){console.log("=> animation1 initGUI "+e),this.animation1Parameters=e;var t=super.createGUI(this.animation1Parameters.b,this.animation1Parameters);return this.scene.animationParameters=this.animation1Parameters,this.scene.extendGUI(t),t}main(e,t){if(this.dictpars=t,null!=this.scene.twglprograminfo&&null!=this.scene.twglprograminfo){var n=this.twglprograminfo[0];this.twglprograminfo=new Array(this.scene.twglprograminfo.length),this.twglprograminfo[0]=n;for(var r=0;r<this.scene.twglprograminfo.length;r++)null!=this.scene.twglprograminfo[r]&&null!=this.scene.twglprograminfo[r]&&(this.twglprograminfo[r]=this.scene.twglprograminfo[r])}this.cam=o.Camera.createCamera(e,t,o.Camera.CamYUp,this.scene.scenesize,this.app),this.cam.zoominVelocity=.5,this.scene.sceneenv>0?(e.useProgram(this.twglprograminfo[0].program),this.doTwglEnv?this.createEnvironmentMapGeoTwgl(e):this.createEnvironmentMapGeo(e),this.skyboxtexture=this.createEnvironmentMapTexture(e,this.scene.sceneenv,this.textureEnvReadyCallback)):(e.useProgram(this.twglprograminfo[0].program),this.scene.initScene(e,this.animation1Parameters,this.cam,t,this.twglprograminfo[1],this.sceneReadyCallback))}sceneReadyCallback(e){var t=s.instance;t.scene.defaultCamera(t.gl,t.cam),t.scene.resizeCanvas(t.gl),console.log("sceneReadyCallback requests first frame"),requestAnimationFrame((()=>t.render(t.ctime)))}textureEnvReadyCallback(e,t){var n=s.instance;console.log("textureEnvReadyCallback executes initScene"),n.scene.initScene(n.gl,n.animation1Parameters,n.cam,n.dictpars,n.twglprograminfo[1],n.sceneReadyCallback)}render(e){var t,n,r=this.gl;this.doclear&&(r.clear(r.DEPTH_BUFFER_BIT),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)),this.scene.resizeCanvas(r),r.viewport(0,0,r.canvas.width,r.canvas.height);var i=this.cam;i.CamHandlingYUp(r,this.app,1,-1),this.scene.animationParameters=this.animation1Parameters,this.scene.sceneenv>0&&((null===(t=this.scene.animationParameters)||void 0===t?void 0:t.b.move)?this.cameraPosition=(null===(n=this.scene.animationParameters)||void 0===n?void 0:n.b.move)?[Math.cos(.005*e*this.scene.animationParameters.b.speed),0,Math.sin(.005*e*this.scene.animationParameters.b.speed)]:[1,0,0]:this.cameraPosition=[null==i?void 0:i.Position()[0],null==i?void 0:i.Position()[1],null==i?void 0:i.Position()[2]],r.useProgram(this.twglprograminfo[0].program),r.disable(r.CULL_FACE),r.depthFunc(r.LEQUAL),this.doTwglEnv?this.renderenvironmentmapTwgl(r,this.animation1Parameters.fov*Math.PI/180,this.skyboxtexture):this.renderenvironmentmap(r,this.animation1Parameters.fov*Math.PI/180,this.skyboxtexture)),null!=this.twglprograminfo[1]&&null!=this.twglprograminfo[1]&&(r.useProgram(this.twglprograminfo[1].program),r.enable(r.DEPTH_TEST),r.enable(r.CULL_FACE),this.scene.drawScene(r,i,e)),requestAnimationFrame((()=>this.render(this.clock.getTime(this.clock.frame))))}}e.exports.Animation1=l})),parcelRequire.register("6kmNl",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AnimationClock=void 0;e.exports.AnimationClock=class{constructor(){this.frame=0,this.vnow=new Date,this.tdt=0}getTime(e){const t=new Date,n=t.getTime(),r=n-this.vnow.getTime();if(this.frame%100==0){var i=1e3/(this.tdt/100),a="cframe="+e+" tdt="+(this.tdt/100).toPrecision(4)+" ms, fps: "+i.toPrecision(3);console.log(a),document.getElementById("app").innerHTML=a,this.tdt=0}return this.tdt+=r,this.vnow=t,this.frame++,n}}})),parcelRequire.register("fhSLN",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Camera=void 0;var n=parcelRequire("hYurQ");class r{constructor(e){this.target=[0,0,0],this.radius0=0,this.ahx=0,this.ahy=0,this.fov=30,this.near=.5,this.far=1e3,this.rotationVelocity=.012,this.zoominVelocity=1,this.ahorizlight=3*Math.PI/2,this.avertlight=Math.PI/4,this.lightpos=[8,8,20],this.difflightintensity=.9,this.speclightintensity=.9,this.lookAt=n.m4.identity(),this.viewProjection=n.m4.identity(),this.camHeight=0,this.zaxis=[0,0,1],this.yaxis=[0,1,0],this.up=[0,1,0],this.radius=0,this.eye=[-1,0,0],this.myr=n.m4.identity(),this.myrl=n.m4.identity(),this.projection=n.m4.identity(),this.changelight=!1,this.changeeye=!1,null!=e.get("radius0")&&(this.radius0=+e.get("radius0")),null!=e.get("hx")&&(this.ahx=+e.get("hx")),null!=e.get("hy")&&(this.ahy=+e.get("hy")),null!=e.get("hxl")&&(this.ahorizlight=+e.get("hxl"),this.changelight=!0),null!=e.get("hyl")&&(this.avertlight=+e.get("hyl"),this.changelight=!0),null!=e.get("difflight")&&(this.difflightintensity=+e.get("difflight"),this.changelight=!0),null!=e.get("speclight")&&(this.speclightintensity=+e.get("speclight"),this.changelight=!0),this.radius=this.radius0}static createCamera(e,t,n,i,a){var o=new r(t);return o.zoominVelocity=i/20,0==o.radius0&&(o.radius0=2*i,console.log("set cam.radius0 to 2*object size = "+o.radius0)),o.target=[0,0,0],o.near=i/10,o.far=10*i,o.setRadius(o.radius0),n==this.CamYUp?(o.setYUpPerspective(e,a),o.setYUpEye(),o.setYUpLight()):n==this.CamZUp?(o.setZUpPerspective(e,a),o.setZUpEye(),o.setZUpLight()):console.log("ERROR: ATTEMPT TO INITIALIZE INVALID CAMERA TYPE "+n),o}translateEye(e){var t=n.m4.translation(e);this.eye=n.m4.transformPoint(t,this.eye),this.lookAt=n.m4.lookAt(this.eye,this.target,this.up),this.viewProjection=n.m4.multiply(this.projection,n.m4.inverse(this.lookAt)),console.log("translate eye "+this.eye)}translateTarget(e){var t=n.m4.translation(e);this.target=n.m4.transformPoint(t,this.target),this.lookAt=n.m4.lookAt(this.eye,this.target,this.up),this.viewProjection=n.m4.multiply(this.projection,n.m4.inverse(this.lookAt))}ReportEye(){var e=this.eye[0].toPrecision(4)+","+this.eye[1].toPrecision(4)+","+this.eye[2].toPrecision(4),t=this.target[0].toPrecision(4)+","+this.target[1].toPrecision(4)+","+this.target[2].toPrecision(4);this.lightpos[0].toPrecision(4),this.lightpos[1].toPrecision(4),this.lightpos[2].toPrecision(4);document.getElementById("projection").innerHTML="h:"+(180/Math.PI*this.ahx).toPrecision(3)+", "+(180/Math.PI*this.ahy).toPrecision(3)+", r0="+this.radius0.toPrecision(4)+", r="+this.radius.toPrecision(4)+", eye:["+e+"], t["+t+"]"}Position(){return this.eye}setYUpPerspective(e,t){const r=this.fov*Math.PI/180,i=e.canvas.clientWidth/e.canvas.clientHeight,a=this.near,o=this.far;this.up=[0,1,0],this.projection=n.m4.perspective(r,i,a,o)}setZUpPerspective(e,t){const r=this.fov*Math.PI/180,i=e.canvas.clientWidth/e.canvas.clientHeight,a=this.near,o=this.far;this.up=[0,0,1],this.projection=n.m4.perspective(r,i,a,o)}setYUpEye(){this.myr=n.m4.identity(),n.m4.axisRotate(this.myr,this.yaxis,this.ahx,this.myr),n.m4.axisRotate(this.myr,this.zaxis,this.ahy,this.myr),n.m4.translate(this.myr,[0,this.camHeight,0],this.myr),this.eye=n.m4.transformPoint(this.myr,[this.radius,0,0]),this.lookAt=n.m4.lookAt(this.eye,this.target,this.up),this.viewProjection=n.m4.multiply(this.projection,n.m4.inverse(this.lookAt)),this.ReportEye(),console.log("< setYUpEye radius="+this.radius+" ("+this.radius0+")")}setZUpEye(){this.myr=n.m4.identity(),n.m4.axisRotate(this.myr,this.zaxis,this.ahx,this.myr),n.m4.axisRotate(this.myr,this.yaxis,this.ahy,this.myr),this.eye=n.m4.transformPoint(this.myr,[this.radius,0,0]),this.lookAt=n.m4.lookAt(this.eye,this.target,this.up),this.viewProjection=n.m4.multiply(this.projection,n.m4.inverse(this.lookAt)),this.ReportEye(),console.log("< setZUpEye radius="+this.radius+" ("+this.radius0+")")}setYUpLight(){this.myrl=n.m4.identity(),n.m4.axisRotate(this.myrl,this.yaxis,this.ahorizlight,this.myrl),this.up=n.m4.transformPoint(this.myrl,[0,1,0]),n.m4.axisRotate(this.myrl,this.zaxis,this.avertlight,this.myrl),this.lightpos=n.m4.transformPoint(this.myrl,[this.radius,0,0])}setZUpLight(){this.myrl=n.m4.identity(),n.m4.axisRotate(this.myrl,this.zaxis,this.ahorizlight,this.myrl),this.up=n.m4.transformPoint(this.myrl,[0,1,0]),n.m4.axisRotate(this.myrl,this.yaxis,this.avertlight,this.myrl),this.lightpos=n.m4.transformPoint(this.myrl,[this.radius,0,0])}setRadius(e){this.radius=this.radius0=e}CamHandlingYUp(e,t,n,r){if(null!=(null==t?void 0:t.mouse.dragvector)&&(null==t?void 0:t.mouse.dragdistance)>.01){(null==t?void 0:t.controlkeydown)?(this.ahorizlight=this.ahorizlight-t.mouse.dragvector[0]*this.rotationVelocity,this.avertlight=this.avertlight-t.mouse.dragvector[1]*this.rotationVelocity,this.changelight=!0):(this.ahx=this.ahx-n*(t.mouse.dragvector[0]*this.rotationVelocity),this.ahy=this.ahy-r*(t.mouse.dragvector[1]*this.rotationVelocity),this.ahy<-Math.PI/2&&(this.ahy=-Math.PI/2+.001),this.ahy>Math.PI/2&&(this.ahy=Math.PI/2-.001),this.changeeye=!0),null==t||t.drageventdone()}(null==t?void 0:t.mouse.changewheel)&&null!=(null==t?void 0:t.mouse.totaldelta)&&(this.radius=this.radius0+(null==t?void 0:t.mouse.totaldelta)*this.zoominVelocity,this.changeeye=!0,null==t||t.mousewheeleventdone()),this.setYUpPerspective(e,t),this.changeeye&&(this.setYUpEye(),this.changeeye=!1),this.changelight&&(this.setYUpLight(),this.changelight=!1)}CamHandlingZUp(e,t,n,r){this.setZUpPerspective(e,t),null!=(null==t?void 0:t.mouse.dragvector)&&(null==t?void 0:t.mouse.dragdistance)>.01&&(this.ahx=this.ahx-n*t.mouse.dragvector[0]*this.rotationVelocity,this.ahy=this.ahy-r*t.mouse.dragvector[1]*this.rotationVelocity,this.ahy<-Math.PI/2&&(this.ahy=-Math.PI/2+.001),this.ahy>Math.PI/2&&(this.ahy=Math.PI/2-.001),this.changeeye=!0),(null==t?void 0:t.mouse.changewheel)&&null!=(null==t?void 0:t.mouse.totaldelta)&&(this.radius=this.radius0+(null==t?void 0:t.mouse.totaldelta)*this.zoominVelocity,this.changeeye=!0,null==t||t.mousewheeleventdone()),
//!   this.target = [0, (mobj.meshMinMax.maxy+mobj.meshMinMax.miny)/2, 0];
this.changeeye&&(this.setZUpEye(),this.changeeye=!1)}}e.exports.Camera=r,r.CamYUp=1,r.CamZUp=2})),parcelRequire.register("dC4mA",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BaseApp=e.exports.instance=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("e93rA"));e.exports.instance=null;e.exports.BaseApp=class{constructor(t,n,r,i){this.baseappParameters={move:!1,speed:.04,color0:"#00A000"},this.gl=null,this.app=null,this.twglprograminfo=null,this.cameraTarget=[0,0,0],this.cameraPosition=[0,0,0],this.doShowBackgroundColorChoice=!1,this.vsEnvironmentMap="#version 300 es\n        in vec4 a_position;\n        out vec4 v_position;\n        void main() {\n        v_position = a_position;\n        gl_Position = vec4(a_position.xy, 1, 1);\n        }\n        ",this.fsEnvironmentMap="#version 300 es\n        precision highp float;\n\n        uniform samplerCube u_skybox;\n        uniform mat4 u_viewDirectionProjectionInverse;\n\n        in vec4 v_position;\n\n        // we need to declare an output for the fragment shader\n        out vec4 outColor;\n\n        void main() {\n        vec4 t = u_viewDirectionProjectionInverse * v_position;\n        // outColor = vec4(0,0,0,0);\n        outColor = texture(u_skybox, normalize(t.xyz / t.w));\n        }\n        ",e.exports.instance=this,document.getElementById("cdiv").innerHTML="finding webgl2...",!!t?(this.gl=t,this.app=n,a.setAttributePrefix("a_"),this.twglprograminfo=new Array(1),this.twglprograminfo[0]=a.createProgramInfo(t,[this.vsEnvironmentMap,this.fsEnvironmentMap]),document.getElementById("cdiv").innerHTML="cdiv environment shaders initialized",this.skyboxLocation=t.getUniformLocation(this.twglprograminfo[0].program,"u_skybox"),this.viewDirectionProjectionInverseLocation=t.getUniformLocation(this.twglprograminfo[0].program,"u_viewDirectionProjectionInverse"),document.getElementById("cdiv").innerHTML="BaseApp: skybox perspective prepared"):document.getElementById("cdiv").innerHTML="no webgl2"}onChangeColorValue(t){var n=e.exports.instance;null!=n.gl&&(n.gl.canvas.parentNode.style.backgroundColor=t)}createGUI(e,t){this.baseappParameters=e,this.gl.canvas.parentNode.style.backgroundColor=this.baseappParameters.color0;var n=new o.GUI({autoPlace:!1});(n.domElement.id="gui_drawimagespace",document.getElementById("linksdiv").append(n.domElement),n.close(),n.remember(e,t),n.add(e,"move"),n.add(e,"speed").min(.002).max(.06).step(.001),this.doShowBackgroundColorChoice)&&n.addColor(e,"color0").onChange(this.onChangeColorValue);return n}defaultTextureReadyCallback(e,t,n){console.log("Environment textureA isready.")}straightTextureCallback(e,t){console.log("Environment textureB isready.")}compileandconnectshaders(e,t,n,r,i){var a="",o=e.createShader(e.VERTEX_SHADER);null!=o?(e.shaderSource(o,n),e.compileShader(o)):a+="vertex shader create issue";var s=e.createShader(e.FRAGMENT_SHADER);if(null!=s?(e.shaderSource(s,r),e.compileShader(s)):a+="fragment shader create issue",a.length>0)document.getElementById(i).innerHTML=a;else{if(a="",e.attachShader(t,o),e.deleteShader(o),e.attachShader(t,s),e.deleteShader(s),e.linkProgram(t),e.getProgramParameter(t,e.LINK_STATUS))return!0;a+=`Link failed: ${e.getProgramInfoLog(t)}`;var l=e.getShaderInfoLog(o);l&&(a+=`${l}`);var u=e.getShaderInfoLog(s);u&&(a+=`${u}`);var c=a.replace(/(\r\n|\r|\n)/gi,"<br>");document.getElementById(i).innerHTML="shader issue..<br>"+c}}createEnvironmentMapGeo(e){this.vaoEnvironment=e.createVertexArray(),e.bindVertexArray(this.vaoEnvironment),this.positionAttributeLocation=e.getAttribLocation(this.twglprograminfo[0].program,"a_position"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer);var t=new Float32Array([1,-1,-1,-1,-1,1,1,-1,-1,1,1,1]);e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),this.restorePosAttributeContext(e,this.positionBuffer,this.positionAttributeLocation,2)}createEnvironmentMapTexture(e,t,n){var r=e.createTexture();e.bindTexture(e.TEXTURE_CUBE_MAP,r);var i="",a="",o="",s="",l="",u="";switch(t){case 0:i=parcelRequire("lHLPB"),a=parcelRequire("iAL2D"),o=parcelRequire("bMkXh"),s=parcelRequire("5M7kg"),l=parcelRequire("iIyXy"),u=parcelRequire("izBsq");break;case 1:i=parcelRequire("1EXRV"),a=parcelRequire("cqCjS"),o=parcelRequire("kRzu0"),s=parcelRequire("8l108"),l=parcelRequire("3MfYw"),u=parcelRequire("9RU1G");break;case 2:i=parcelRequire("3xkhP"),a=parcelRequire("kekoF"),o=parcelRequire("74QOb"),s=parcelRequire("dwugs"),l=parcelRequire("68m7w"),u=parcelRequire("3CS5u")}const c=[{target:e.TEXTURE_CUBE_MAP_POSITIVE_X,url:i},{target:e.TEXTURE_CUBE_MAP_NEGATIVE_X,url:s},{target:e.TEXTURE_CUBE_MAP_POSITIVE_Y,url:a},{target:e.TEXTURE_CUBE_MAP_NEGATIVE_Y,url:l},{target:e.TEXTURE_CUBE_MAP_POSITIVE_Z,url:o},{target:e.TEXTURE_CUBE_MAP_NEGATIVE_Z,url:u}];var h=0;
//!  this.texture= mytexture!;
return c.forEach((t=>{const{target:i,url:a}=t,o=e.RGBA,s=e.RGBA,l=e.UNSIGNED_BYTE;e.texImage2D(i,0,o,256,256,0,s,l,null);const u=new Image;new URL(a,window.location.href).origin!==window.location.origin&&(u.crossOrigin=""),u.src=a,u.addEventListener("load",(()=>{e.bindTexture(e.TEXTURE_CUBE_MAP,r),e.texImage2D(i,0,o,s,l,u),console.log("nImage="+h+"/"+c.length+" loaded: "+u.src),++h==c.length&&(e.generateMipmap(e.TEXTURE_CUBE_MAP),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),null!=n&&n(0,r))}))})),r}computeprojectionmatrices(e,t){var n=e.canvas.clientWidth/e.canvas.clientHeight,r=parcelRequire("hYurQ").m4.perspective(t,n,1,2e3),i=parcelRequire("hYurQ").m4.lookAt(this.cameraPosition,this.cameraTarget,[0,1,0]),a=parcelRequire("hYurQ").m4.inverse(i),o=parcelRequire("hYurQ").m4.copy(a);return o[12]=0,o[13]=0,o[14]=0,parcelRequire("hYurQ").m4.multiply(r,o)}restorePosAttributeContext(e,t,n,r){e.bindBuffer(e.ARRAY_BUFFER,t);var i=e.FLOAT;e.vertexAttribPointer(n,r,i,!1,0,0),e.enableVertexAttribArray(n)}renderenvironmentmap(e,t,n){var r=this.viewDirectionProjectionInverseLocation,i=this.skyboxLocation;e.bindVertexArray(this.vaoEnvironment),this.restorePosAttributeContext(e,this.positionBuffer,this.positionAttributeLocation,2),e.bindTexture(e.TEXTURE_CUBE_MAP,n);var a=this.computeprojectionmatrices(e,t),o=parcelRequire("hYurQ").m4.inverse(a);e.uniformMatrix4fv(r,!1,o),e.uniform1i(i,0),e.drawArrays(e.TRIANGLES,0,6)}createEnvironmentMapGeoTwgl(e){this.environmentBufferInfo=a.primitives.createXYQuadBufferInfo(e,300),this.vaoEnvironment=a.createVAOFromBufferInfo(e,this.twglprograminfo[0],this.environmentBufferInfo),e.bindVertexArray(this.vaoEnvironment)}renderenvironmentmapTwgl(e,t,n){var r=a.m4.inverse(this.computeprojectionmatrices(e,t));e.bindVertexArray(this.vaoEnvironment),a.setUniforms(this.twglprograminfo[0],{u_viewDirectionProjectionInverse:r,u_skybox:n}),a.drawBufferInfo(e,this.environmentBufferInfo),e.flush()}}})),parcelRequire.register("e93rA",(function(e,t){function n(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),a=Math.round(e.b),o=e.a,s=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+a+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+a+","+o+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+a+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+a+","+o+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+a+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+a+",a:"+o+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+",a:"+o+"}":"unknown format"}$parcel$defineInteropFlag(e.exports),$parcel$export(e.exports,"color",(()=>ue)),$parcel$export(e.exports,"controllers",(()=>ce)),$parcel$export(e.exports,"dom",(()=>he)),$parcel$export(e.exports,"gui",(()=>fe)),$parcel$export(e.exports,"GUI",(()=>de)),$parcel$export(e.exports,"default",(()=>pe));var r=Array.prototype.forEach,i=Array.prototype.slice,a={BREAK:{},extend:function(e){return this.each(i.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(i.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=i.call(arguments);return function(){for(var t=i.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(r&&e.forEach&&e.forEach===r)e.forEach(t,n);else if(e.length===e.length+0){var i,a=void 0;for(a=0,i=e.length;a<i;a++)if(a in e&&t.call(n,e[a],a)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,a=arguments;function o(){r=null,n||e.apply(i,a)}var s=n||!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)}},toArray:function(e){return e.toArray?e.toArray():i.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},o=[{litmus:a.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:n},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:n},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:n},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:n}}},{litmus:a.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:a.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:a.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(a.isNumber(e.r)&&a.isNumber(e.g)&&a.isNumber(e.b)&&a.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(a.isNumber(e.r)&&a.isNumber(e.g)&&a.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(a.isNumber(e.h)&&a.isNumber(e.s)&&a.isNumber(e.v)&&a.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(a.isNumber(e.h)&&a.isNumber(e.s)&&a.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],s=void 0,l=void 0,u=function(){l=!1;var e=arguments.length>1?a.toArray(arguments):arguments[0];return a.each(o,(function(t){if(t.litmus(e))return a.each(t.conversions,(function(t,n){if(s=t.read(e),!1===l&&!1!==s)return l=s,s.conversionName=n,s.conversion=t,a.BREAK})),a.BREAK})),l},c=void 0,h={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,a],[o,n,a],[a,n,s],[a,o,n],[s,a,n],[n,a,o]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),a=i-r,o=void 0;return 0===i?{h:NaN,s:0,v:0}:(o=e===i?(t-n)/a:t===i?2+(n-e)/a:4+(e-t)/a,(o/=6)<0&&(o+=1),{h:360*o,s:a/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(c=8*t)|e&~(255<<c)}},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},g=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},v=function(){function e(){if(d(this,e),this.__state=u.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return p(e,[{key:"toString",value:function(){return n(this)}},{key:"toHexString",value:function(){return n(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function b(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||v.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(v.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function x(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||v.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(v.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}v.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=h.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");a.extend(e.__state,h.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},v.recalculateHSV=function(e){var t=h.rgb_to_hsv(e.r,e.g,e.b);a.extend(e.__state,{s:t.s,v:t.v}),a.isNaN(t.h)?a.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},v.COMPONENTS=["r","g","b","h","s","v","hex","a"],b(v.prototype,"r",2),b(v.prototype,"g",1),b(v.prototype,"b",0),x(v.prototype,"h"),x(v.prototype,"s"),x(v.prototype,"v"),Object.defineProperty(v.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(v.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=h.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var y=function(){function e(t,n){d(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return p(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),w={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){a.each(e,(function(e){w[e]=t}))}));var R=/(\d+(\.\d+)?)px/;function E(e){if("0"===e||a.isUndefined(e))return 0;var t=e.match(R);return a.isNull(t)?0:parseFloat(t[1])}var A={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;a.isUndefined(i)&&(i=!0),a.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},o=w[t];if(!o)throw new Error("Event type "+t+" not supported.");var s=document.createEvent(o);switch(o){case"MouseEvents":var l=i.x||i.clientX||0,u=i.y||i.clientY||0;s.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,l,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=s.initKeyboardEvent||s.initKeyEvent;a.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(t,i.bubbles||!1,i.cancelable||!0)}a.defaults(s,r),e.dispatchEvent(s)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),A},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),A},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return A},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return A},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return E(t["border-left-width"])+E(t["border-right-width"])+E(t["padding-left"])+E(t["padding-right"])+E(t.width)},getHeight:function(e){var t=getComputedStyle(e);return E(t["border-top-width"])+E(t["border-bottom-width"])+E(t["padding-top"])+E(t["padding-bottom"])+E(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},T=function(e){function t(e,n){d(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),A.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return g(t,e),p(t,[{key:"setValue",value:function(e){var n=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(y),P=function(e){function t(e,n,r){d(this,t);var i=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r,s=i;if(i.__select=document.createElement("select"),a.isArray(o)){var l={};a.each(o,(function(e){l[e]=e})),o=l}return a.each(o,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)})),i.updateDisplay(),A.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;s.setValue(e)})),i.domElement.appendChild(i.__select),i}return g(t,e),p(t,[{key:"setValue",value:function(e){var n=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return A.isActive(this.__select)?this:(this.__select.value=this.getValue(),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(y),k=function(e){function t(e,n){d(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function a(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),A.bind(r.__input,"keyup",a),A.bind(r.__input,"change",a),A.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),A.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return g(t,e),p(t,[{key:"updateDisplay",value:function(){return A.isActive(this.__input)||(this.__input.value=this.getValue()),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(y);function M(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var S=function(e){function t(e,n,r){d(this,t);var i=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,a.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=M(i.__impliedStep),i}return g(t,e),p(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=M(e),this}}]),t}(y);var I=function(e){function t(e,n,r){d(this,t);var i=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var o=i,s=void 0;function l(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function u(e){var t=s-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),s=e.clientY}function c(){A.unbind(window,"mousemove",u),A.unbind(window,"mouseup",c),l()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),A.bind(i.__input,"change",(function(){var e=parseFloat(o.__input.value);a.isNaN(e)||o.setValue(e)})),A.bind(i.__input,"blur",(function(){l()})),A.bind(i.__input,"mousedown",(function(e){A.bind(window,"mousemove",u),A.bind(window,"mouseup",c),s=e.clientY})),A.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,l())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return g(t,e),p(t,[{key:"updateDisplay",value:function(){var e,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(e*r)/r),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(S);function C(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var B=function(e){function t(e,n,r,i,a){d(this,t);var o=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:a})),s=o;function l(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(C(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function u(){A.unbind(window,"mousemove",l),A.unbind(window,"mouseup",u),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(C(t,n.left,n.right,s.__min,s.__max))}function h(){A.unbind(window,"touchmove",c),A.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),A.bind(o.__background,"mousedown",(function(e){document.activeElement.blur(),A.bind(window,"mousemove",l),A.bind(window,"mouseup",u),l(e)})),A.bind(o.__background,"touchstart",(function(e){if(1!==e.touches.length)return;A.bind(window,"touchmove",c),A.bind(window,"touchend",h),c(e)})),A.addClass(o.__background,"slider"),A.addClass(o.__foreground,"slider-fg"),o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return g(t,e),p(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(S),L=function(e){function t(e,n,r){d(this,t);var i=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,A.bind(i.__button,"click",(function(e){return e.preventDefault(),a.fire(),!1})),A.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return g(t,e),p(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(y),O=function(e){function t(e,n){d(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new v(r.getValue()),r.__temp=new v(0);var i=r;r.domElement=document.createElement("div"),A.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",A.bind(r.__input,"keydown",(function(e){13===e.keyCode&&p.call(this)})),A.bind(r.__input,"blur",p),A.bind(r.__selector,"mousedown",(function(){A.addClass(this,"drag").bind(window,"mouseup",(function(){A.removeClass(i.__selector,"drag")}))})),A.bind(r.__selector,"touchstart",(function(){A.addClass(this,"drag").bind(window,"touchend",(function(){A.removeClass(i.__selector,"drag")}))}));var o,s=document.createElement("div");function l(e){g(e),A.bind(window,"mousemove",g),A.bind(window,"touchmove",g),A.bind(window,"mouseup",h),A.bind(window,"touchend",h)}function c(e){b(e),A.bind(window,"mousemove",b),A.bind(window,"touchmove",b),A.bind(window,"mouseup",f),A.bind(window,"touchend",f)}function h(){A.unbind(window,"mousemove",g),A.unbind(window,"touchmove",g),A.unbind(window,"mouseup",h),A.unbind(window,"touchend",h),m()}function f(){A.unbind(window,"mousemove",b),A.unbind(window,"touchmove",b),A.unbind(window,"mouseup",f),A.unbind(window,"touchend",f),m()}function p(){var e=u(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function m(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function g(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,a=n.clientY,o=(r-t.left)/(t.right-t.left),s=1-(a-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),o>1?o=1:o<0&&(o=0),i.__color.v=s,i.__color.s=o,i.setValue(i.__color.toOriginal()),!1}function b(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return a.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),a.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),a.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),a.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),a.extend(s.style,{width:"100%",height:"100%",background:"none"}),D(s,"top","rgba(0,0,0,0)","#000"),a.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),A.bind(r.__saturation_field,"mousedown",l),A.bind(r.__saturation_field,"touchstart",l),A.bind(r.__field_knob,"mousedown",l),A.bind(r.__field_knob,"touchstart",l),A.bind(r.__hue_field,"mousedown",c),A.bind(r.__hue_field,"touchstart",c),r.__saturation_field.appendChild(s),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return g(t,e),p(t,[{key:"updateDisplay",value:function(){var e=u(this.getValue());if(!1!==e){var t=!1;a.each(v.COMPONENTS,(function(n){if(!a.isUndefined(e[n])&&!a.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&a.extend(this.__color.__state,e)}a.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;a.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,D(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),a.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(y),F=["-moz-","-o-","-webkit-","-ms-",""];function D(e,t,n,r){e.style.background="",a.each(F,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "}))}var j=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}},U='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',N=function(e,t){var n=e[t];return a.isArray(arguments[2])||a.isObject(arguments[2])?new P(e,t,arguments[2]):a.isNumber(n)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?a.isNumber(arguments[4])?new B(e,t,arguments[2],arguments[3],arguments[4]):new B(e,t,arguments[2],arguments[3]):a.isNumber(arguments[4])?new I(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new I(e,t,{min:arguments[2],max:arguments[3]}):a.isString(n)?new k(e,t):a.isFunction(n)?new L(e,t,""):a.isBoolean(n)?new T(e,t):null};var $=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},q=function(){function e(){d(this,e),this.backgroundElement=document.createElement("div"),a.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),A.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),a.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;A.bind(this.backgroundElement,"click",(function(){t.hide()}))}return p(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),a.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",A.unbind(e.domElement,"webkitTransitionEnd",t),A.unbind(e.domElement,"transitionend",t),A.unbind(e.domElement,"oTransitionEnd",t)};A.bind(this.domElement,"webkitTransitionEnd",t),A.bind(this.domElement,"transitionend",t),A.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-A.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-A.getHeight(this.domElement)/2+"px"}}]),e}();j(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var z="Default",V=function(){try{return!!window.localStorage}catch(e){return!1}}(),H=void 0,Y=!0,G=void 0,W=!1,X=[],Q=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),A.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=a.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=a.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),a.isUndefined(r.load)?r.load={preset:z}:r.preset&&(r.load.preset=r.preset),a.isUndefined(r.parent)&&r.hideable&&X.push(this),r.resizable=a.isUndefined(r.parent)&&r.resizable,r.autoPlace&&a.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=V&&"true"===localStorage.getItem(ne(this,"isLocal")),s=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,oe(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,l&&(l.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?A.addClass(n.__ul,e.CLASS_CLOSED):A.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(e){V&&(o=e,e?A.bind(window,"unload",s):A.unbind(window,"unload",s),localStorage.setItem(ne(n,"isLocal"),e))}}}),a.isUndefined(r.parent)){if(this.closed=r.closed||!1,A.addClass(this.domElement,e.CLASS_MAIN),A.makeSelectable(this.domElement,!1),V&&o){n.useLocalStorage=!0;var u=localStorage.getItem(ne(this,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,A.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(A.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(A.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),A.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var c=document.createTextNode(r.name);A.addClass(c,"controller-name"),l=K(n,c);A.addClass(this.__ul,e.CLASS_CLOSED),A.addClass(l,"title"),A.bind(l,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(a.isUndefined(r.parent)&&(Y&&(G=document.createElement("div"),A.addClass(G,"dg"),A.addClass(G,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(G),Y=!1),G.appendChild(this.domElement),A.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||oe(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},A.bind(window,"resize",this.__resizeHandler),A.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),A.bind(this.__ul,"transitionend",this.__resizeHandler),A.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&function(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){A.removeClass(e.__closeButton,Q.CLASS_DRAG),A.unbind(window,"mousemove",n),A.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,A.addClass(e.__closeButton,Q.CLASS_DRAG),A.bind(window,"mousemove",n),A.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),a.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),A.bind(e.__resize_handle,"mousedown",i),A.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),s=function(){V&&"true"===localStorage.getItem(ne(n,"isLocal"))&&localStorage.setItem(ne(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,r.parent||((i=n.getRoot()).width+=1,a.defer((function(){i.width-=1})))};function K(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function J(e){A.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&A.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function Z(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function ee(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var a=n.load.remembered,o=void 0;if(a[e.preset])o=a[e.preset];else{if(!a.Default)return;o=a.Default}if(o[r]&&void 0!==o[r][t.property]){var s=o[r][t.property];t.initialValue=s,t.setValue(s)}}}}function te(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new O(t,n);else{var o=[t,n].concat(r.factoryArgs);i=N.apply(e,o)}r.before instanceof y&&(r.before=r.before.__li),ee(e,i),A.addClass(i.domElement,"c");var s=document.createElement("span");A.addClass(s,"property-name"),s.innerHTML=i.property;var l=document.createElement("div");l.appendChild(s),l.appendChild(i.domElement);var u=K(e,l,r.before);return A.addClass(u,Q.CLASS_CONTROLLER_ROW),i instanceof O?A.addClass(u,"color"):A.addClass(u,f(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,a.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),te(e,n.object,n.property,{before:r,factoryArgs:[a.toArray(arguments)]})}if(a.isArray(t)||a.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),te(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof B){var r=new I(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});a.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}})),A.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof I){var i=function(t){if(a.isNumber(n.__min)&&a.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=te(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return t};n.min=a.compose(i,n.min),n.max=a.compose(i,n.max)}else n instanceof T?(A.bind(t,"click",(function(){A.fakeEvent(n.__checkbox,"click")})),A.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof L?(A.bind(t,"click",(function(){A.fakeEvent(n.__button,"click")})),A.bind(t,"mouseover",(function(){A.addClass(n.__button,"hover")})),A.bind(t,"mouseout",(function(){A.removeClass(n.__button,"hover")}))):n instanceof O&&(A.addClass(t,"color"),n.updateDisplay=a.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=a.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&Z(e.getRoot(),!0),t}),n.setValue)}(e,u,i),e.__controllers.push(i),i}function ne(e,t){return document.location.href+"."+t}function re(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function ie(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ae(e){var t=e.__save_row=document.createElement("li");A.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),A.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",A.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",A.addClass(r,"button"),A.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",A.addClass(i,"button"),A.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",A.addClass(o,"button"),A.addClass(o,"revert");var s=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?a.each(e.load.remembered,(function(t,n){re(e,n,n===e.preset)})):re(e,z,!1),A.bind(s,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(s),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),V){var l=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(ne(0,"isLocal"))&&u.setAttribute("checked","checked"),ie(e,l),A.bind(u,"change",(function(){e.useLocalStorage=!e.useLocalStorage,ie(e,l)}))}var c=document.getElementById("dg-new-constructor");A.bind(c,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||H.hide()})),A.bind(n,"click",(function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),H.show(),c.focus(),c.select()})),A.bind(r,"click",(function(){e.save()})),A.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),A.bind(o,"click",(function(){e.revert()}))}function oe(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function se(e,t){var n={};return a.each(e.__rememberedObjects,(function(r,i){var o={},s=e.__rememberedObjectIndecesToControllers[i];a.each(s,(function(e,n){o[n]=t?e.initialValue:e.getValue()})),n[i]=o})),n}function le(e){0!==e.length&&$.call(window,(function(){le(e)})),a.each(e,(function(e){e.updateDisplay()}))}Q.toggleHide=function(){W=!W,a.each(X,(function(e){e.domElement.style.display=W?"none":""}))},Q.CLASS_AUTO_PLACE="a",Q.CLASS_AUTO_PLACE_CONTAINER="ac",Q.CLASS_MAIN="main",Q.CLASS_CONTROLLER_ROW="cr",Q.CLASS_TOO_TALL="taller-than-window",Q.CLASS_CLOSED="closed",Q.CLASS_CLOSE_BUTTON="close-button",Q.CLASS_CLOSE_TOP="close-top",Q.CLASS_CLOSE_BOTTOM="close-bottom",Q.CLASS_DRAG="drag",Q.DEFAULT_WIDTH=245,Q.TEXT_CLOSED="Close Controls",Q.TEXT_OPEN="Open Controls",Q._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||Q.toggleHide()},A.bind(window,"keydown",Q._keydownHandler,!1),a.extend(Q.prototype,{add:function(e,t){return te(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return te(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;a.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&G.removeChild(this.domElement);var e=this;a.each(this.__folders,(function(t){e.removeFolder(t)})),A.unbind(window,"keydown",Q._keydownHandler,!1),J(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new Q(t);this.__folders[e]=n;var r=K(this,n.domElement);return A.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],J(e);var t=this;a.each(e.__folders,(function(t){e.removeFolder(t)})),a.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=A.getOffset(e.__ul).top,n=0;a.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=A.getHeight(t))})),window.innerHeight-t-20<n?(A.addClass(e.domElement,Q.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(A.removeClass(e.domElement,Q.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&a.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:a.debounce((function(){this.onResize()}),50),remember:function(){if(a.isUndefined(H)&&((H=new q).domElement.innerHTML=U),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;a.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&ae(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&oe(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=se(this)),e.folders={},a.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=se(this),Z(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=se(this,!0)),this.load.remembered[e]=se(this),this.preset=e,re(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){a.each(this.__controllers,(function(t){this.getRoot().load.remembered?ee(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),a.each(this.__folders,(function(e){e.revert(e)})),e||Z(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&le(this.__listening)},updateDisplay:function(){a.each(this.__controllers,(function(e){e.updateDisplay()})),a.each(this.__folders,(function(e){e.updateDisplay()}))}});var ue={Color:v,math:h,interpret:u},ce={Controller:y,BooleanController:T,OptionController:P,StringController:k,NumberController:S,NumberControllerBox:I,NumberControllerSlider:B,FunctionController:L,ColorController:O},he={dom:A},fe={GUI:Q},de=Q,pe={color:ue,controllers:ce,dom:he,gui:fe,GUI:Q}})),parcelRequire.register("lHLPB",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("2GzXk"),import.meta.url).toString()})),parcelRequire.register("iAL2D",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("f6rLL"),import.meta.url).toString()})),parcelRequire.register("bMkXh",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("fvM1M"),import.meta.url).toString()})),parcelRequire.register("5M7kg",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("gGZjl"),import.meta.url).toString()})),parcelRequire.register("iIyXy",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("kgHfM"),import.meta.url).toString()})),parcelRequire.register("izBsq",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("9YRJL"),import.meta.url).toString()})),parcelRequire.register("1EXRV",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("kh3BV"),import.meta.url).toString()})),parcelRequire.register("cqCjS",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("nUMot"),import.meta.url).toString()})),parcelRequire.register("kRzu0",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("bctIz"),import.meta.url).toString()})),parcelRequire.register("8l108",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("7OBxY"),import.meta.url).toString()})),parcelRequire.register("3MfYw",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("8vVWB"),import.meta.url).toString()})),parcelRequire.register("9RU1G",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("6V2NX"),import.meta.url).toString()})),parcelRequire.register("3xkhP",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("97yIo"),import.meta.url).toString()})),parcelRequire.register("kekoF",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("8XRnE"),import.meta.url).toString()})),parcelRequire.register("74QOb",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("nDiHi"),import.meta.url).toString()})),parcelRequire.register("dwugs",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("hJgRS"),import.meta.url).toString()})),parcelRequire.register("68m7w",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("9L3Ut"),import.meta.url).toString()})),parcelRequire.register("3CS5u",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("a7j2h"),import.meta.url).toString()})),parcelRequire.register("6lBjJ",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MixedTextureScene=void 0;const a=i(parcelRequire("hYurQ"));e.exports.MixedTextureScene=class{constructor(e){this.twglprograminfo=null,this.sceneenv=2,this.matrixLocation=0,this.textureLocation1=0,this.textureLocation2=0,this.modelXRotationRadians=0,this.modelYRotationRadians=0,this.ctime=0,this.scenesize=40,this.vertexShaderSource="#version 300 es\n    \n    // an attribute is an input (in) to a vertex shader.\n    // It will receive data from a buffer\n    in vec4 a_position;\n    in vec2 a_texcoord;\n\n    // A matrix to transform the positions by\n    uniform mat4 u_matrix;\n\n    // a varying to pass the texture coordinates to the fragment shader\n    out vec2 v_texcoord;\n\n    // all shaders have a main function\n    void main() {\n      // Multiply the position by the matrix.\n      gl_Position = u_matrix * a_position;\n\n      // Pass the texcoord to the fragment shader.\n      v_texcoord = a_texcoord;\n    }\n    ",this.fragmentShaderSource="#version 300 es\n\n    precision highp float;\n\n    // Passed in from the vertex shader.\n    in vec2 v_texcoord;\n\n    // The texture.\n    uniform sampler2D u_texture1;\n    uniform sampler2D u_texture2;\n\n    // we need to declare an output for the fragment shader\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_texture1, v_texcoord)/2. + texture(u_texture2, v_texcoord)/2.;\n      //outColor = texture(u_texture2, v_texcoord);\n    }\n    ",this.twglprograminfo=new Array(2),this.twglprograminfo[1]=a.createProgramInfo(e,[this.vertexShaderSource,this.fragmentShaderSource])}defaultCamera(e,t){}extendGUI(e){e.add(this.animationParameters,"movetail"),e.add(this.animationParameters,"sling").min(9).max(120).step(1),e.add(this.animationParameters,"fov",5,85,1),e.updateDisplay()}static degToRad(e){return e*Math.PI/180}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}restorePositionAttributeContext(e,t,n,r){e.bindBuffer(e.ARRAY_BUFFER,t);var i=e.FLOAT;e.vertexAttribPointer(n,r,i,!1,0,0),e.enableVertexAttribArray(n)}initScene(e,t,n,r,i,a){this.animationParameters=t,this.matrixLocation=e.getUniformLocation(i.program,"u_matrix"),this.positionBuffer=e.createBuffer(),this.positionAttributeLocation=e.getAttribLocation(i.program,"a_position"),this.vao=e.createVertexArray(),e.bindVertexArray(this.vao),this.restorePositionAttributeContext(e,this.positionBuffer,this.positionAttributeLocation,3),e.bufferData(e.ARRAY_BUFFER,this.setGeometry(e),e.STATIC_DRAW);var o=e.createBuffer(),s=e.getAttribLocation(i.program,"a_texcoord");e.bindBuffer(e.ARRAY_BUFFER,o),e.enableVertexAttribArray(s);var l=e.FLOAT;e.vertexAttribPointer(s,2,l,!0,0,0),e.bufferData(e.ARRAY_BUFFER,this.setTexcoords(e),e.STATIC_DRAW),this.texture1=e.createTexture(),this.textureLocation1=e.getUniformLocation(i.program,"u_texture1"),e.bindTexture(e.TEXTURE_2D,this.texture1);const u=e.R8,c=e.RED,h=e.UNSIGNED_BYTE,f=new Uint8Array([128,64,128,0,192,0]);e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texImage2D(e.TEXTURE_2D,0,u,3,2,0,c,h,f),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.texture2=e.createTexture(),this.textureLocation2=e.getUniformLocation(i.program,"u_texture2"),e.bindTexture(e.TEXTURE_2D,this.texture2),console.log("=> Load texture bitmap");var d=parcelRequire("4r5aT");this.readimage=new Image,this.readimage.src=d,this.readimage.onload=()=>{var t=e.RGBA,n=e.RGBA,r=e.UNSIGNED_BYTE;e.texImage2D(e.TEXTURE_2D,0,t,n,r,this.readimage),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a(0)}}drawScene(e,t,n){e.bindVertexArray(this.vao),this.restorePositionAttributeContext(e,this.positionBuffer,this.positionAttributeLocation,3),e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,this.texture1),e.uniform1i(this.textureLocation1,0),e.activeTexture(e.TEXTURE0+1),e.bindTexture(e.TEXTURE_2D,this.texture2),e.uniform1i(this.textureLocation2,1);var r=n-this.ctime;this.ctime=n,this.animationParameters.movetail&&(this.modelYRotationRadians+=.1*this.animationParameters.b.speed*r,this.modelXRotationRadians+=.005*this.animationParameters.b.speed*this.animationParameters.sling*r);var i=parcelRequire("hYurQ").m4.rotateX(t.viewProjection,this.modelXRotationRadians);i=parcelRequire("hYurQ").m4.rotateY(i,this.modelYRotationRadians),e.uniformMatrix4fv(this.matrixLocation,!1,i);var a=e.TRIANGLES;e.drawArrays(a,0,36)}setGeometry(e){return new Float32Array([-10,-10,-10,-10,10,-10,10,-10,-10,-10,10,-10,10,10,-10,10,-10,-10,-10,-10,10,10,-10,10,-10,10,10,-10,10,10,10,-10,10,10,10,10,-10,10,-10,-10,10,10,10,10,-10,-10,10,10,10,10,10,10,10,-10,-10,-10,-10,10,-10,-10,-10,-10,10,-10,-10,10,10,-10,-10,10,-10,10,-10,-10,-10,-10,-10,10,-10,10,-10,-10,-10,10,-10,10,10,-10,10,-10,10,-10,-10,10,10,-10,10,-10,10,10,-10,10,10,10,-10,10,10,10])}setTexcoords(e){return new Float32Array([0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1])}}})),parcelRequire.register("4r5aT",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("bBQYX"),import.meta.url).toString()})),parcelRequire.register("fqOMx",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.LightScene=void 0;const a=i(parcelRequire("hYurQ"));var o=parcelRequire("4ptx5");class s extends o.BaseScene{constructor(e){super(),this.twglprograminfo=null,this.sceneenv=1,this.ctime=0,this.scenesize=60,this.vertexShaderSourceSpotLight="#version 300 es\n\n  // an attribute is an input (in) to a vertex shader.\n  // It will receive data from a buffer\n  in vec4 a_position;\n  in vec3 a_normal;\n  \n  // position of light\n  uniform vec3 u_lightWorldPosition;\n\n  // position of camera\n  uniform vec3 u_viewWorldPosition;  \n  \n  // projection matrix object->pixels\n  uniform mat4 u_worldViewProjection;\n\n  // object matrix\n  uniform mat4 u_world;\n\n  // inverse transpose of object matrix, turn normals before applying light\n  uniform mat4 u_worldInverseTranspose;\n  \n  // pass calculated values to the fragment shader\n  out vec3 v_normal;\n  out vec3 v_surfaceToLight;\n  out vec3 v_surfaceToView;\n  \n  // all shaders have a main function\n  void main() {\n    // Multiply the position by the matrix.\n    gl_Position = u_worldViewProjection * a_position;\n  \n    // orient the normals and pass to the fragment shader\n    v_normal = mat3(u_worldInverseTranspose) * a_normal;\n  \n    // compute the world position of the surface\n    vec3 surfaceWorldPosition = (u_world * a_position).xyz;\n  \n    // compute the vector of the surface to the light\n    // and pass it to the fragment shader\n    v_surfaceToLight = u_lightWorldPosition - surfaceWorldPosition;\n  \n    // compute the vector of the surface to the view/camera\n    // and pass it to the fragment shader\n    v_surfaceToView = u_viewWorldPosition - surfaceWorldPosition;\n  }\n  ",this.fragmentShaderSourceSpotLight="#version 300 es\n\n  precision highp float;\n  \n  // Passed in and varied from the vertex shader.\n  in vec3 v_normal;\n  in vec3 v_surfaceToLight;\n  in vec3 v_surfaceToView;\n  \n  uniform vec4 u_color;\n  uniform float u_shininess;\n  \n  uniform float u_innerLimit;          // in dot space\n  uniform float u_outerLimit;          // in dot space\n\n  uniform vec3 u_lightDirection;\n\n  uniform int u_typelight;\n\n  uniform vec3 u_reverseLightDirection; // directional light\n   \n  // we need to declare an output for the fragment shader\n  out vec4 outColor;\n\n  void maingreen() {\n    outColor = vec4(0.0,1.0,0.0,1.0);\n  }\n\n  void main() {\n    // because v_normal is a varying it's interpolated\n    // so it will not be a uint vector. Normalizing it\n    // will make it a unit vector again\n    vec3 normal = normalize(v_normal);\n  \n    vec3 surfaceToLightDirection = normalize(v_surfaceToLight);\n    vec3 surfaceToViewDirection = normalize(v_surfaceToView);\n    vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);\n  \n    if (u_typelight==2)\n    {\n      // spot light\n      float dotFromDirection = dot(surfaceToLightDirection, -u_lightDirection);\n      float inLight = smoothstep(u_outerLimit, u_innerLimit, dotFromDirection);\n      float light = inLight * dot(normal, surfaceToLightDirection);\n      float specular = inLight * pow(dot(normal, halfVector), u_shininess);\n    \n      outColor = u_color;\n    \n      // Lets multiply just the color portion (not the alpha)\n      // by the light\n      outColor.rgb *= light;\n    \n      // Just add in the specular\n      outColor.rgb += specular;\n    } else  if (u_typelight==1)\n    {\n       \n      // compute the light by taking the dot product\n      // of the normal to the light's reverse direction\n      float light = dot(normal, surfaceToLightDirection);\n      float specular = 0.0;\n      if (light > 0.0) {\n        specular = pow(dot(normal, halfVector), u_shininess);\n      }\n\n      vec3 outcol =   u_color.rgb;\n    \n      // Lets multiply just the color portion (not the alpha)\n      // by the light\n      outcol *= light;\n    \n      // Just add in the specular (white)\n      outcol += specular;\n\n      outColor = vec4(outcol,1.0);\n\n    } else\n    {\n      // compute the light by taking the dot product\n      // of the normal to the light's reverse direction\n      float dirlight = dot(normal, u_reverseLightDirection);\n\n     \n    \n      outColor = u_color;\n\n      outColor.rgb *=   dirlight * u_shininess/10.0 ;\n    }\n  }\n  ",s.instance=this,this.typelight=1,this.vertexShaderSource=this.vertexShaderSourceSpotLight,this.fragmentShaderSource=this.fragmentShaderSourceSpotLight,this.twglprograminfo=new Array(3),this.twglprograminfo[1]=a.createProgramInfo(e,[this.vertexShaderSourceSpotLight,this.fragmentShaderSourceSpotLight]),this.fieldOfViewRadians=60*Math.PI/180,this.fRotationRadians=0,this.lightRotationX=0,this.lightRotationY=0,this.lightDirection=[0,0,1],this.innerLimit=10*Math.PI/180,this.outerLimit=20*Math.PI/180}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}defaultCamera(e,t){}extendGUI(e){e.add(this.animationParameters,"shininess").min(0).max(20).step(.1),e.updateDisplay(),e.add(this.animationParameters,"typelight",["directed light","point light","spot light"]).onChange(this.onChangeTypeLightCombo),e.add(this.animationParameters,"fov",5,85,1)}onChangeTypeLightCombo(e){var t=e;"directed light"==t?s.instance.typelight=0:"point light"==t?s.instance.typelight=1:"spot light"==t&&(s.instance.typelight=2)}initScene(e,t,n,r,i,a){var o=i.program;this.animationParameters=t,this.viewWorldPositionLocation=e.getUniformLocation(o,"u_viewWorldPosition"),this.typelightLocation=e.getUniformLocation(o,"u_typelight"),this.colorLocation=e.getUniformLocation(o,"u_color"),this.shininessLocation=e.getUniformLocation(o,"u_shininess"),this.lightDirectionLocation=e.getUniformLocation(o,"u_lightDirection"),this.innerLimitLocation=e.getUniformLocation(o,"u_innerLimit"),this.outerLimitLocation=e.getUniformLocation(o,"u_outerLimit"),this.lightWorldPositionLocation=e.getUniformLocation(o,"u_lightWorldPosition"),this.reverseLightDirectionLocation=e.getUniformLocation(o,"u_reverseLightDirection"),this.initMatrixUniforms(e,o),this.initSingleObject(e,o,this.setGeometry,this.setNormals,a)}drawScene(e,t,n){var r=n-this.ctime;this.ctime=n,this.renderCameraSingleRotatingObjectPrologue(e,t,r),e.uniform4fv(this.colorLocation,[1,0,.2,1]),e.uniform1f(this.shininessLocation,this.animationParameters.shininess),e.uniform1i(this.typelightLocation,this.typelight),e.uniform3fv(this.reverseLightDirectionLocation,a.v3.normalize([1,0,0]));const i=[0,0,120];e.uniform3fv(this.lightWorldPositionLocation,i),e.uniform3fv(this.viewWorldPositionLocation,t.Position());var o=parcelRequire("hYurQ").m4.lookAt(i,[0,0,0],[0,0,1]);o=parcelRequire("hYurQ").m4.multiply(parcelRequire("hYurQ").m4.axisRotation([1,0,0],this.lightRotationX),o),o=parcelRequire("hYurQ").m4.multiply(parcelRequire("hYurQ").m4.axisRotation([0,1,0],this.lightRotationY),o),this.lightDirection=[-o[8],-o[9],-o[10]],e.uniform3fv(this.lightDirectionLocation,this.lightDirection),e.uniform1f(this.innerLimitLocation,Math.cos(this.innerLimit)),e.uniform1f(this.outerLimitLocation,Math.cos(this.outerLimit));var s=e.TRIANGLES;e.drawArrays(s,0,96)}setGeometry(e){var t=new Float32Array([0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0]),n=parcelRequire("hYurQ").m4.axisRotation([1,0,0],Math.PI);n=parcelRequire("hYurQ").m4.translate(n,[-50,-75,-15]);for(var r=0;r<t.length;r+=3){var i=parcelRequire("hYurQ").m4.transformPoint(n,[t[r+0],t[r+1],t[r+2],1]);t[r+0]=i[0],t[r+1]=i[1],t[r+2]=i[2]}e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}setNormals(e){var t=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]);e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}}e.exports.LightScene=s})),parcelRequire.register("4ptx5",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BaseScene=void 0;var n=parcelRequire("hYurQ");e.exports.BaseScene=class{constructor(){this.modelXRotationRadians=0,this.modelYRotationRadians=0}initMatrixUniforms(e,t){this.worldViewProjectionLocation=e.getUniformLocation(t,"u_worldViewProjection"),this.worldInverseTransposeLocation=e.getUniformLocation(t,"u_worldInverseTranspose"),this.worldLocation=e.getUniformLocation(t,"u_world")}restorePositionAttributeContext(e,t,n,r){e.bindBuffer(e.ARRAY_BUFFER,t);var i=e.FLOAT;e.vertexAttribPointer(n,r,i,!1,0,0),e.enableVertexAttribArray(n)}initSingleObject(e,t,n,r,i){this.vaoSingleObject=e.createVertexArray(),e.bindVertexArray(this.vaoSingleObject),this.positionAttributeLocation=e.getAttribLocation(t,"a_position");var a=e.getAttribLocation(t,"a_normal");e.enableVertexAttribArray(this.positionAttributeLocation),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),n(e);var o=3,s=e.FLOAT,l=!1,u=0,c=0;e.vertexAttribPointer(this.positionAttributeLocation,o,s,l,u,c);var h=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,h),r(e),e.enableVertexAttribArray(a);o=3,s=e.FLOAT,l=!1,u=0,c=0;e.vertexAttribPointer(a,o,s,l,u,c),i(0)}renderCameraSingleRotatingObjectPrologue(e,t,n){var r=t.viewProjection;this.renderMatrixSingleRotatingObjectPrologue(e,r,n),e.bindVertexArray(this.vaoSingleObject)}renderMatrixSingleRotatingObjectPrologue(e,t,r){this.animationParameters.b.move&&(this.modelYRotationRadians+=.05*this.animationParameters.b.speed*r,this.modelXRotationRadians+=.05*this.animationParameters.b.speed*r);var i=n.m4.axisRotation([1,0,0],this.modelXRotationRadians),a=n.m4.axisRotation([0,1,0],this.modelYRotationRadians),o=n.m4.multiply(i,a),s=n.m4.multiply(t,o);e.uniformMatrix4fv(this.worldLocation,!1,o),e.uniformMatrix4fv(this.worldViewProjectionLocation,!1,s);var l=n.m4.inverse(o),u=n.m4.transpose(l);e.uniformMatrix4fv(this.worldInverseTransposeLocation,!1,u)}}})),parcelRequire.register("4g5Nn",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ObjectListScene=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("1yvSL"));e.exports.ObjectListScene=class{constructor(e){this.twglprograminfo=null,this.scenesize=60,this.sceneenv=2,this.vertexShaderSource="#version 300 es\n\n    in vec4 a_position;\n    in vec4 a_color;\n    \n    uniform mat4 u_matrix;\n    \n    out vec4 v_color;\n    \n    void main() {\n      // Multiply the position by the matrix.\n      gl_Position = u_matrix * a_position;\n    \n      // Pass the color to the fragment shader.\n      v_color = a_color;\n    }\n  ",this.fragmentShaderSource="#version 300 es\n    precision highp float;\n    \n    // Passed in from the vertex shader.\n    in vec4 v_color;\n    \n    uniform vec4 u_colorMult;\n    uniform vec4 u_colorOffset;\n    \n    out vec4 outColor;\n    \n    void main() {\n        outColor = v_color * u_colorMult + u_colorOffset;\n    }\n  ",this.objectsToDraw=[],this.objects=[],this.speedpreset=.02,this.cx=0,this.cy=0,this.cz=10,this.vx=0,this.vy=0,this.vz=0,this.sjson='{\n  "draw": false,\n  "name": "point between feet",\n  "scaling": [1,1,1],\n  "translation":[0,0,0],\n  "children": [\n    {\n       "draw": true,\n       "name": "waist",\n       "scaling": [1,1,1],\n       "translation": [0, 0, 0],\n       "children": [\n         {\n           "draw": true,\n           "name": "torso",\n           "scaling": [1,1,1],\n           "translation": [0, 2, 0],\n           "children": [\n             {\n               "draw": true,\n               "name": "neck",\n               "scaling": [1,1,1],\n               "translation": [0, 1, 0],\n               "children": [\n                 {\n                   "draw": true,\n                   "name": "head",\n                   "scaling": [1,1,1],\n                   "translation": [0, 1, 0],\n                   "children": []\n                 }\n               ]\n             },\n             {\n               "draw": true,\n               "name": "left-arm",\n               "scaling": [1,1,1],\n               "translation": [-1, 0, 0],\n               "children": [\n                 {\n                   "draw": true,\n                   "name": "left-forearm",\n                   "scaling": [1,1,1],\n                   "translation": [-1, 0, 0],\n                   "children": [\n                     {\n                       "draw": true,\n                       "name": "left-hand",\n                       "scaling": [1,1,1],\n                       "translation": [-1, 0, 0],\n                       "children":[]\n                     }\n                   ]\n                 }\n               ]\n             },\n             {\n               "draw": true,\n               "name": "right-arm",\n               "scaling": [1,1,1],\n               "translation": [1, 0, 0],\n               "children": [\n                 {\n                   "draw": true,\n                   "name": "right-forearm",\n                   "scaling": [1,1,1],\n                   "translation": [1, 0, 0],\n                   "children": [\n                     {\n                       "draw": true,\n                       "name": "right-hand",\n                       "scaling": [1,1,1],\n                       "translation": [1, 0, 0],\n                       "children":[]\n                     }\n                   ]\n                 }\n               ]\n             }\n           ]\n         },\n         {\n           "draw": true,\n           "name": "left-leg",\n           "translation": [-1, -1, 0],\n           "children": [\n             {\n               "draw": true,\n               "name": "left-calf",\n               "scaling": [1,1,1],\n               "translation": [0, -1, 0],\n               "children": [\n                 {\n                   "draw": true,\n                   "name": "left-foot",\n                   "scaling": [1,1,1],\n                   "translation": [0, -1, 0],\n                   "children": []\n                 }\n               ]\n             }\n           ]\n         },\n         {\n           "draw": true,\n           "name": "right-leg",\n           "scaling": [1,1,1],\n           "translation": [1, -1, 0],\n           "children": [\n             {\n               "draw": true,\n               "name": "right-calf",\n               "scaling": [1,1,1],\n               "translation": [0, -1, 0],\n               "children": [\n                 {\n                   "draw": true,\n                   "name": "right-foot",\n                   "scaling": [1,1,1],\n                   "translation": [0, -1, 0],\n                   "children": []\n                 }\n               ]\n             }\n           ]\n         }\n       ]\n    }\n  ]\n}',this.twglprograminfo=new Array(2),this.twglprograminfo[1]=a.createProgramInfo(e,[this.vertexShaderSource,this.fragmentShaderSource])}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}extendGUI(e){}defaultCamera(e,t){}async FetchText(e){const t=await fetch(e);var n=await t.arrayBuffer();return new TextDecoder("utf-8").decode(n)}initScene(e,t,n,r,i,s){this.gl=e,this.animationParameters=null==this.animationParameters?t:this.animationParameters,(null==r?void 0:r.has("speed"))?(this.animationParameters.b.speed=+(null==r?void 0:r.get("speed")),console.log("specified: speedpreset="+this.animationParameters.b.speed)):console.log("not specified: speedpreset"),this.fieldOfViewRadians=60*Math.PI/180;var l=a.primitives.createCubeBufferInfo(e,1);this.nodeInfosByName=void 0;var u=new o.NodesProducer(i,l),c=(parcelRequire("kFMbZ"),JSON.parse(this.sjson));this.scenetree=u.makeNode(c),this.objects=u.objects,this.objectsToDraw=u.objectsToDraw,this.nodeInfosByName=u.nodeInfosByName,s(0)}setRotationAdjust(e,t,n,r){null!=e[t]&&(e[t].trs.rotation[n]=r)}drawScene(e,t,n){var r,i=t.viewProjection,o=.003*n*1;r=Math.abs(Math.sin(o));var s=this.nodeInfosByName;s["point between feet"].trs.translation[1]=r,this.setRotationAdjust(s,"point between feet",1,0),r=Math.sin(o),this.setRotationAdjust(s,"left-leg",0,r),this.setRotationAdjust(s,"right-leg",0,-r),r=.4*Math.sin(o+.1),this.setRotationAdjust(s,"left-calf",0,-r),this.setRotationAdjust(s,"right-calf",0,r),r=.4*Math.sin(o+.1),this.setRotationAdjust(s,"left-foot",0,-r),this.setRotationAdjust(s,"right-foot",0,r),r=.4*Math.sin(o),this.setRotationAdjust(s,"left-arm",2,r),this.setRotationAdjust(s,"right-arm",2,r),r=.4*Math.sin(o+.1),this.setRotationAdjust(s,"left-forearm",2,r),this.setRotationAdjust(s,"right-forearm",2,r),r=.4*Math.sin(o-.1),this.setRotationAdjust(s,"left-hand",2,r),this.setRotationAdjust(s,"right-hand",2,r),r=.4*Math.sin(o),this.setRotationAdjust(s,"waist",1,r),r=.2*Math.sin(o),this.setRotationAdjust(s,"torso",1,r),r=.4*Math.sin(o+.25),this.setRotationAdjust(s,"neck",1,r),r=.4*Math.sin(o+.5),this.setRotationAdjust(s,"head",1,r),r=.4*Math.cos(2*o),this.setRotationAdjust(s,"head",0,r);var l=parcelRequire("hYurQ").m4.translation([this.cx,this.cy,this.cz]);this.scenetree.updateWorldMatrix(l),this.cx+=1*this.vx/4,this.cy+=1*this.vy/4,this.cz+=1*this.vz/4,this.objects.forEach((e=>{e.drawInfo.uniforms.u_matrix=parcelRequire("hYurQ").m4.multiply(i,e.worldMatrix)})),a.drawObjectList(e,this.objectsToDraw)}}})),parcelRequire.register("1yvSL",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.NodesProducer=e.exports.Node=e.exports.NodeTransforms=void 0;var n=parcelRequire("hYurQ");class r{constructor(){this.translation=[0,0,0],this.rotation=[0,0,0],this.scale=[1,1,1]}getMatrix(e){e=e||n.m4.identity();var t=this.translation,r=this.rotation,i=this.scale;return n.m4.translation(t,e),n.m4.axisRotate(e,[1,0,0],r[0],e),n.m4.axisRotate(e,[0,1,0],r[1],e),n.m4.axisRotate(e,[0,0,1],r[2],e),n.m4.scale(e,i,e),e}}e.exports.NodeTransforms=r;class i{constructor(e){this.children=[],this.localMatrix=n.m4.identity(),this.worldMatrix=n.m4.identity(),this.parent=null,this.drawInfo=null,this.source=e}setParent(e){if(this.parent){var t=this.parent.children.indexOf(this);t>=0&&this.parent.children.splice(t,1)}e&&e.children.push(this),this.parent=e}updateWorldMatrix(e){var t=this.source;t&&t.getMatrix(this.localMatrix),e?n.m4.multiply(e,this.localMatrix,this.worldMatrix):n.m4.copy(this.localMatrix,this.worldMatrix);var r=this.worldMatrix;this.children.forEach((function(e){e.updateWorldMatrix(r)}))}}e.exports.Node=i;e.exports.NodesProducer=class{constructor(e,t){this.programInfo=e,this.cubeBufferInfo=t,this.nodeInfosByName={},this.objectsToDraw=[],this.objects=[],this.makeNode=e=>{var t=new r,n=new i(t);this.nodeInfosByName[e.name]={trs:t,node:n},t.rotation=[0,0,0],t.scale=e.scaling||t.scale,t.translation=e.translation||t.translation,!1!==e.draw&&(n.drawInfo={uniforms:{u_colorOffset:[0,0,.6,0],u_colorMult:[.4,.4,.4,1],u_matrix:void 0},programInfo:this.programInfo,bufferInfo:this.cubeBufferInfo},this.objectsToDraw.push(n.drawInfo),this.objects.push(n));return(e=>e?e.map(this.makeNode):[])(e.children).forEach((function(e){e.setParent(n)})),n}}}})),parcelRequire.register("kFMbZ",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("8dRE9"),import.meta.url).toString()})),parcelRequire.register("5AxOv",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Canvas3dTextureScene=void 0;const a=i(parcelRequire("hYurQ"));e.exports.Canvas3dTextureScene=class{constructor(e){this.twglprograminfo=null,this.scenesize=60,this.sceneenv=2,this.widthTextureToRenderOn=512,this.heighttextureToRenderOn=512,this.fieldOfViewRadians=60*Math.PI/180,this.vertexShaderSource="#version 300 es\n\n    // an attribute is an input (in) to a vertex shader.\n    // It will receive data from a buffer\n    in vec4 a_position;\n    in vec2 a_texcoord;\n\n    // default matrices\n    uniform mat4 u_worldViewProjection;\n    uniform mat4 u_world;\n    uniform mat4 u_worldInverseTranspose;\n\n    // a varying to pass the texture coordinates to the fragment shader\n    out vec2 v_texcoord;\n\n    // all shaders have a main function\n    void main() {\n      // Multiply the position by the matrix.\n      gl_Position = u_worldViewProjection * a_position;\n\n      // Pass the texcoord to the fragment shader.\n      v_texcoord = a_texcoord;\n    }\n    ",this.fragmentShaderSource="#version 300 es\n\n    precision highp float;\n\n    // Passed in from the vertex shader.\n    in vec2 v_texcoord;\n\n    // The texture.\n    uniform sampler2D u_texture;\n    uniform vec4 u_colorMult;\n\n    // we need to declare an output for the fragment shader\n    out vec4 outColor;\n\n    void main() {\n      outColor = vec4(texture(u_texture, v_texcoord).rrr, 1) * u_colorMult;\n    }\n    ",this.ctime=0,this.modelXRotationRadians=0,this.modelYRotationRadians=0,this.twglprograminfo=new Array(2),console.log("=> scene constructor 3dtexture"),this.twglprograminfo[1]=a.createProgramInfo(e,[this.vertexShaderSource,this.fragmentShaderSource]),console.log("<= scene constructor 3dtexture")}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}extendGUI(e){e.add(this.animationParameters,"fov",5,85,1)}defaultCamera(e,t){}restoreContext(e,t,n,r){e.bindBuffer(e.ARRAY_BUFFER,t);var i=e.FLOAT;e.vertexAttribPointer(n,r,i,!1,0,0),e.enableVertexAttribArray(n)}initScene(e,t,n,r,i,a){e.canvas;if(!e)return void console.log("ERROR: gl found null in canvas3dtexturescene.initScene()");console.log("=> canvas3dtexturescene.initScene()"),this.positionAttributeLocation=e.getAttribLocation(i.program,"a_position");var o=e.getAttribLocation(i.program,"a_texcoord");this.worldViewProjectionLocation=e.getUniformLocation(i.program,"u_worldViewProjection"),this.textureLocation=e.getUniformLocation(i.program,"u_texture"),this.colorMultLocation=e.getUniformLocation(i.program,"u_colorMult"),this.positionBuffer=e.createBuffer(),this.vao=e.createVertexArray(),e.bindVertexArray(this.vao),this.restoreContext(e,this.positionBuffer,this.positionAttributeLocation,3);var s=this.setGeometry(e);e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW);var l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l);var u=this.setTexcoords(e);e.bufferData(e.ARRAY_BUFFER,u,e.STATIC_DRAW),e.enableVertexAttribArray(o);var c=e.FLOAT;e.vertexAttribPointer(o,2,c,!0,0,0),this.textureOn3DCube=e.createTexture(),e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,this.textureOn3DCube);{const t=0,n=e.R8,r=3,i=2,a=0,o=e.RED,s=e.UNSIGNED_BYTE,l=new Uint8Array([128,64,128,0,192,0]);e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texImage2D(e.TEXTURE_2D,t,n,r,i,a,o,s,l)}e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.textureToRenderOn=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.textureToRenderOn);{const t=0,n=e.RGBA,r=0,i=e.RGBA,a=e.UNSIGNED_BYTE,o=null;e.texImage2D(e.TEXTURE_2D,t,n,this.widthTextureToRenderOn,this.heighttextureToRenderOn,r,i,a,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}this.fb=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.fb);const h=e.COLOR_ATTACHMENT0;e.framebufferTexture2D(e.FRAMEBUFFER,h,e.TEXTURE_2D,this.textureToRenderOn,0);const f=e.createTexture();e.bindTexture(e.TEXTURE_2D,f);{const t=0,n=e.DEPTH_COMPONENT24,r=0,i=e.DEPTH_COMPONENT,a=e.UNSIGNED_INT,o=null;e.texImage2D(e.TEXTURE_2D,t,n,this.widthTextureToRenderOn,this.heighttextureToRenderOn,r,i,a,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,f,t)}this.ctime=0,console.log("<= canvas3dtexturescene.initScene()"),a(-1)}drawCube(e,t,n,r){e.useProgram(t),e.bindVertexArray(this.vao);var i=parcelRequire("hYurQ").m4.perspective(this.fieldOfViewRadians,n,1,2e3),a=parcelRequire("hYurQ").m4.identity();if(null==r){var o=parcelRequire("hYurQ").m4.lookAt([0,0,2],[0,0,0],[0,1,0]),s=parcelRequire("hYurQ").m4.inverse(o);a=parcelRequire("hYurQ").m4.multiply(i,s)}else{n=e.canvas.clientWidth/e.canvas.clientHeight,i=parcelRequire("hYurQ").m4.perspective(this.fieldOfViewRadians,n,1,2e3),r.Position(),o=r.lookAt,s=parcelRequire("hYurQ").m4.inverse(o);a=parcelRequire("hYurQ").m4.multiply(i,s)}{var l=parcelRequire("hYurQ").m4.translate(a,[0,0,0]);l=parcelRequire("hYurQ").m4.axisRotate(l,[1,0,0],1*this.modelXRotationRadians),l=parcelRequire("hYurQ").m4.axisRotate(l,[0,1,0],1*this.modelYRotationRadians),e.uniformMatrix4fv(this.worldViewProjectionLocation,!1,l),e.uniform1i(this.textureLocation,0);const t=.6;e.uniform4fv(this.colorMultLocation,[.5*t+.5,1,1-t,1]);var u=e.TRIANGLES;e.drawArrays(u,0,36)}}drawScene(e,t,n){var r=(n*=.001)-this.ctime;this.ctime=n,this.modelYRotationRadians+=-.7*r,this.modelXRotationRadians+=-.4*r;{e.bindFramebuffer(e.FRAMEBUFFER,this.fb),e.bindTexture(e.TEXTURE_2D,this.textureOn3DCube),e.viewport(0,0,this.widthTextureToRenderOn,this.heighttextureToRenderOn),e.clearColor(.5,.7,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const t=this.widthTextureToRenderOn/this.heighttextureToRenderOn;this.drawCube(e,this.twglprograminfo[1].program,t,null)}{e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,this.textureToRenderOn),e.viewport(0,0,e.canvas.width,e.canvas.height);const n=e.canvas.clientWidth/e.canvas.clientHeight;this.drawCube(e,this.twglprograminfo[1].program,n,t)}}setGeometry(e){return new Float32Array([-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5])}setTexcoords(e){return new Float32Array([0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1])}}})),parcelRequire.register("4PVcZ",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DrawInstancedScene=void 0;const a=i(parcelRequire("hYurQ"));e.exports.DrawInstancedScene=class{constructor(e){this.twglprograminfo=null,this.scenesize=50,this.sceneenv=1,this.vertexShaderSource="#version 300 es\nin vec4 a_position;\nin vec4 color;\nin mat4 matrix;\nuniform mat4 world;\nuniform mat4 viewprojection;\nuniform mat4 view;\n\nout vec4 v_color;\n\nvoid main() {\n  gl_Position = viewprojection * world * matrix * a_position;\n  v_color = color;\n}\n",this.fragmentShaderSource="#version 300 es\nprecision highp float;\n\n// Passed in from the vertex shader.\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}\n",this.numVertices=12,this.numInstances=6,this.matrices=[],this.twglprograminfo=new Array(2),this.twglprograminfo[1]=a.createProgramInfo(e,[this.vertexShaderSource,this.fragmentShaderSource])}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}defaultCamera(e,t){}extendGUI(e){e.add(this.animationParameters,"movetail")}initScene(e,t,n,r,i,a){this.gl=e,n.camHeight=0,n.setYUpEye(),this.animationParameters=t,t.b.move=!1,t.movetail=!1;const o=e.getAttribLocation(i.program,"a_position"),s=e.getAttribLocation(i.program,"color"),l=e.getAttribLocation(i.program,"matrix");this.viewprojectionLoc=e.getUniformLocation(i.program,"viewprojection"),this.worldloc=e.getUniformLocation(i.program,"world"),this.numInstances=32,this.matrixData=new Float32Array(16*this.numInstances);for(let e=0;e<this.numInstances;++e){const t=64*e,n=16;this.matrices.push(new Float32Array(this.matrixData.buffer,t,n))}for(var u=[0,0,0],c=-20,h=[1,0,0,1],f=new Float32Array([0,c,0,0,c,30,.1,c,0,.1,c,0,0,c,30,.1,c,30]),d=0;d<this.numInstances;d++){var p=this.matrices[d];d%2==1?(parcelRequire("hYurQ").m4.axisRotation([0,1,0],-Math.PI/2,p),parcelRequire("hYurQ").m4.translate(p,[u[0]+2*Math.floor(d/2)*1,u[1],u[2]],p)):(parcelRequire("hYurQ").m4.axisRotation([0,1,0],0,p),parcelRequire("hYurQ").m4.translate(p,[u[0]-2*Math.floor(d/2)*1,u[1],u[2]],p))}var m=new Float32Array(4*this.numInstances);for(d=0;d<this.numInstances;d++)m[4*d]=h[0],m[4*d+1]=h[1],m[4*d+2]=h[2],m[4*d+3]=h[3];this.vao=e.createVertexArray();const g=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,g),e.bufferData(e.ARRAY_BUFFER,f,e.STATIC_DRAW),this.numVertices=f.length/3,e.bindVertexArray(this.vao),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,3,e.FLOAT,!1,0,0),this.matrixBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.matrixBuffer),e.bufferData(e.ARRAY_BUFFER,this.matrixData.byteLength,e.DYNAMIC_DRAW);for(let t=0;t<4;++t){const n=l+t;e.enableVertexAttribArray(n);const r=16*t;e.vertexAttribPointer(n,4,e.FLOAT,!1,64,r),e.vertexAttribDivisor(n,1)}const _=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,m,e.STATIC_DRAW),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,4,e.FLOAT,!1,0,0),e.vertexAttribDivisor(s,1),a(0)}drawScene(e,t,n){var r=parcelRequire("hYurQ").m4.identity();r=parcelRequire("hYurQ").m4.translation([16,-8,-16]),e.uniformMatrix4fv(this.worldloc,!1,r);var i=t.viewProjection;e.uniformMatrix4fv(this.viewprojectionLoc,!1,i),e.bindVertexArray(this.vao),e.bindBuffer(e.ARRAY_BUFFER,this.matrixBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.matrixData),e.drawArraysInstanced(e.TRIANGLES,0,this.numVertices,this.numInstances)}}})),parcelRequire.register("bHN59",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SkyBoxScene=void 0;const a=i(parcelRequire("hYurQ"));e.exports.SkyBoxScene=class{constructor(e,t){this.scenesize=40,this.sceneenv=1,this.vertexShaderSource="",this.fragmentShaderSource="",this.twglprograminfo=null,this.speedpreset=.05,(null==t?void 0:t.has("speed"))&&(this.speedpreset=+(null==t?void 0:t.get("speed")),console.log("specified: speedpreset="+this.speedpreset))}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}defaultCamera(e,t){}initScene(e,t,n,r,i,a){this.animationParameters=null==this.animationParameters?t:this.animationParameters,this.speedpreset&&(this.animationParameters.b.speed=this.speedpreset),a(0)}extendGUI(e){e.add(this.animationParameters,"fov",5,85,1)}drawScene(e,t,n){}}})),parcelRequire.register("i5pkR",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SkyBoxCubeScene=void 0;const a=i(parcelRequire("hYurQ"));e.exports.SkyBoxCubeScene=class{constructor(e){this.scenesize=40,this.sceneenv=1,this.vertexShaderSource="",this.fragmentShaderSource="",this.twglprograminfo=null,this.vsMirrorCube="#version 300 es\n    \n        in vec4 a_position;\n        in vec3 a_normal;\n        \n        uniform mat4 u_projection;\n        uniform mat4 u_view;\n        uniform mat4 u_world;\n        \n        out vec3 v_worldPosition;\n        out vec3 v_worldNormal;\n        \n        void main() {\n          // Multiply the position by the matrix.\n          gl_Position = u_projection * u_view * u_world * a_position;\n        \n          // send the view position to the fragment shader\n          v_worldPosition = (u_world * a_position).xyz;\n        \n          // orient the normals and pass to the fragment shader\n          v_worldNormal = mat3(u_world) * a_normal;\n        }\n        ",this.fsMirrorCube="#version 300 es\n        precision highp float;\n        \n        // Passed in from the vertex shader.\n        in vec3 v_worldPosition;\n        in vec3 v_worldNormal;\n        \n        // The texture.\n        uniform samplerCube u_texture;\n        \n        // The position of the camera\n        uniform vec3 u_worldCameraPosition;\n        \n        // we need to declare an output for the fragment shader\n        out vec4 outColor;\n        \n        void main() {\n          vec3 worldNormal = normalize(v_worldNormal);\n          vec3 eyeToSurfaceDir = normalize(v_worldPosition - u_worldCameraPosition);\n          vec3 direction = reflect(eyeToSurfaceDir,worldNormal);\n        \n          outColor = texture(u_texture, direction);\n        }\n        ",this.vertexShaderSource=this.vsMirrorCube,this.fragmentShaderSource=this.fsMirrorCube,this.twglprograminfo=new Array(2),this.twglprograminfo[1]=a.createProgramInfo(e,[this.vsMirrorCube,this.fsMirrorCube]),this.fieldOfViewRadians=60*Math.PI/180}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}defaultCamera(e,t){}createReflectingCubeGeo(e){this.reflectingCubeBufferInfo=a.primitives.createCubeBufferInfo(e,1.2),this.vaoCube=a.createVAOFromBufferInfo(e,this.twglprograminfo[1],this.reflectingCubeBufferInfo)}initScene(e,t,n,r,i,a){this.parameters=t,this.parameters.b.move=!1,this.createReflectingCubeGeo(e),a(0)}extendGUI(e){e.add(this.animationParameters,"fov",5,85,1)}restorePositionAttributeContext(e,t,n,r){e.bindBuffer(e.ARRAY_BUFFER,t);var i=e.FLOAT;e.vertexAttribPointer(n,r,i,!1,0,0),e.enableVertexAttribArray(n)}drawScene(e,t,n){var r;this.cameraTarget=[0,0,0],this.cameraPosition=[.1*t.Position()[0],.1*t.Position()[1],.1*t.Position()[2]];var i=e.canvas.clientWidth/e.canvas.clientHeight;this.projectionMatrix=a.m4.perspective(this.fieldOfViewRadians,i,1,2e3);var o=a.m4.lookAt(this.cameraPosition,this.cameraTarget,[0,1,0]);this.viewMatrix=a.m4.inverse(o);var s=null===(r=this.parameters)||void 0===r?void 0:r.movetail;this.worldMatrix=s?a.m4.axisRotation([0,1,0],this.parameters.b.speed*(n+.1)*.005):a.m4.translation([0,0,0]),null==this.viewMatrix&&(this.viewMatrix=a.m4.identity()),null==this.projectionMatrix&&(this.projectionMatrix=a.m4.identity()),e.depthFunc(e.LESS),e.bindVertexArray(this.vaoCube),a.setUniforms(this.twglprograminfo[1],{u_world:this.worldMatrix,u_view:this.viewMatrix,u_projection:this.projectionMatrix,u_texture:this.texture,u_worldCameraPosition:this.cameraPosition}),a.drawBufferInfo(e,this.reflectingCubeBufferInfo),e.flush()}}})),parcelRequire.register("04AkW",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.drawimagespace=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("e93rA")),s=i(parcelRequire("dC4mA"));class l extends s.BaseApp{constructor(e,t,n,r){super(e,t,n,r),this.imagespaceParameters={move:!1,teal:!1,speed:.4,texture:"geotriangle2",color0:"#00A000"},this.diffuseLocation=0,this.imageSizeLocation=0,this.tealLocation=0,this.aspectLocation=0,this.xshiftLocation=0,this.yshiftLocation=0,this.cxshift=0,this.cyshift=0,this.xzoomoffsetLocation=0,this.yzoomoffsetLocation=0,this.xzoomoffset=0,this.yzoomoffset=0,this.currentTexture="geotriangle2",this.ny=0,this.txtaspect=1,this.textures=null,this.textureaspects=new Map,this.vs="#version 300 es\n        precision highp float;\n        precision highp int;   \n        void main()\n        {\n          //show smaller, centered triangle gl_Position = vec4(1.f * float(uint(gl_VertexID) % 2u) - 0.5f, 1.f*float(uint(gl_VertexID) / 2u) - 0.5f, 1.0, 1.0);\n          //show half viewport triangle gl_Position = vec4(2.f * float(uint(gl_VertexID) % 2u) - 1.f, 2.f*float(uint(gl_VertexID) / 2u) - 1.f, 1.0, 1.0);\n          //show (the same) half viewport triangle  gl_Position = vec4(4.f * float(uint(gl_VertexID) % 2u) - 2.0f, 4.f*float(uint(gl_VertexID) / 2u) - 2.0f, 1.0, 1.0);\n          //show covering right side of viewport gl_Position = vec4(4.f * float(uint(gl_VertexID) % 2u) + 0.0f, 4.f*float(uint(gl_VertexID) / 2u) - 1.0f, 1.0, 1.0);\n          //show covering upper right square of viewport gl_Position = vec4(4.f * float(uint(gl_VertexID) % 2u) + 0.0f, 4.f*float(uint(gl_VertexID) / 2u) + 0.0f, 1.0, 1.0);\n          //show covering  entire viewport\n          gl_Position = vec4(4.f * float(uint(gl_VertexID) % 2u) - 1.0f,\n                             4.f * float(uint(gl_VertexID) / 2u) - 1.0f, \n                             1.0, 1.0);       \n        }",this.fs="#version 300 es\n        precision highp float;\n        precision highp int;\n        uniform sampler2D diffuse;\n        uniform vec2 u_imageSize;\n        uniform int u_teal; \n        uniform int u_xshift; \n        uniform int u_yshift; \n        uniform float u_aspect; \n        uniform float u_xzoomoffset    ;\n        uniform float u_yzoomoffset    ;\n          out vec4 color;\n        void main()\n        {\n          float px = u_aspect *(gl_FragCoord.x-float(u_xshift));\n          float py = gl_FragCoord.y-float(u_yshift);\n          px-=u_xzoomoffset;\n          py-=u_yzoomoffset;\n          vec2 texoffset1 = vec2(  px,  u_imageSize.y -py) / u_imageSize;\n          vec2 texcoord1 = texoffset1 + vec2(  u_xzoomoffset, u_yzoomoffset);\n\n          vec4 ccolor = texture(diffuse, texcoord1);\n          if ((py<u_imageSize.y && px<u_imageSize.x) || (u_teal ==1))\n            color=ccolor;\n        }",this.gui=null,l.instance=this,this.twglprograminfo=new Array(2),this.twglprograminfo[1]=a.createProgramInfo(e,[this.vs,this.fs])}prepareSurfaceTextures(e,t){this.textureaspects.set("checker",1),this.textureaspects.set("clover",1),this.textureaspects.set("zelenskyy",1),this.textureaspects.set("aristotle",1),this.textureaspects.set("flagofukraine",856/1288),this.textureaspects.set("flagofukraine2",1288/856),this.textureaspects.set("geotriangle",258/424),this.textureaspects.set("geotriangle2",.5),this.textureaspects.set("geotriangle2",.5),this.textureaspects.set("protractorT2",395/747);var n=parcelRequire("bIoW4"),r=parcelRequire("7rFnN"),i=parcelRequire("53UYj"),o=parcelRequire("ecCDE"),s=parcelRequire("jFGo5"),l=parcelRequire("eBx4i"),u=parcelRequire("fhKPK"),c=parcelRequire("jtJhK"),h=parcelRequire("bccvT");return this.textures=a.createTextures(e,{checker:{mag:e.NEAREST,min:e.LINEAR,src:[255,255,255,255,192,192,192,0,92,92,92,255,255,255,255,255]},clover:{src:i},zelenskyy:{src:o},gradient:{src:n},flagofukraine:{src:s},flagofukraine2:{src:l},geotriangle:{src:u},geotriangle2:{src:c},aristotle:{src:r},protractorT2:{src:h}}),"checker"==t?this.textures.checker:"clover"==t?this.textures.clover:"zelenskyy"==t?this.textures.zelenskyy:"gradient"==t?this.textures.gradient:"flagofukraine"==t?this.textures.flagofukraine:"flagofukraine2"==t?this.textures.flagofukraine2:"geotriangle"==t?this.textures.geotriangle:"geotriangle2"==t||"aristotle"==t?this.textures.geotriangle2:"protractorT2"==t?this.textures.protractorT2:void 0}onChangeTextureCombo(e){var t=l.instance;console.log("we are in texture=["+e+"] obj.speed="+t.imagespaceParameters.speed),t.currentTexture=e,console.log("set currentTexture to ["+e+"]"),t.ny="clover"==e?8:"geotriangle2"==e?2:4,console.log("this.textureaspects="+t.textureaspects),"geotriangle"==e&&(t.txtaspect=t.textureaspects.get("geotriangle")),"geotriangle2"==e&&(t.txtaspect=t.textureaspects.get("geotriangle2")),"flagofukraine"==e&&(t.txtaspect=t.textureaspects.get("flagofukraine")),"flagofukraine2"==e&&(t.txtaspect=t.textureaspects.get("flagofukraine2")),"clover"==e&&t.textureaspects.has("clover")&&(t.txtaspect=t.textureaspects.get("clover")),"aristotle"==e&&(t.txtaspect=t.textureaspects.get("aristotle")),"checker"==e&&(t.txtaspect=t.textureaspects.get("checker")),"zelenskyy"==e&&(t.txtaspect=t.textureaspects.get("zelenskyy")),"protractorT2"==e&&(t.txtaspect=t.textureaspects.get("protractorT2")),t.app.mouse.totaldelta=0}onChangeColorValue(e){console.log("we are in color=["+e+"]");var t=l.instance;null!=t.gl&&(t.gl.canvas.parentNode.style.backgroundColor=e)}initGUI(e){this.imagespaceParameters=e,this.gl.canvas.parentNode.style.backgroundColor=this.imagespaceParameters.color0;var t=new o.GUI({autoPlace:!1});return t.domElement.id="gui_drawimagespace",document.getElementById("linksdiv").append(t.domElement),t.close(),t.remember(this.imagespaceParameters),t.add(this.imagespaceParameters,"move"),t.add(this.imagespaceParameters,"teal"),t.add(this.imagespaceParameters,"speed").min(.2).max(1).step(.005),t.addColor(this.imagespaceParameters,"color0").onChange(this.onChangeColorValue),t.add(this.imagespaceParameters,"texture",["geotriangle2","zelenskyy","clover","checker","aristotle","protractorT2"]).onChange(this.onChangeTextureCombo),t.updateDisplay(),t}main(e,t){var n;this.prepareSurfaceTextures(e,"zelenskyy"),e.viewport(0,0,e.canvas.width,e.canvas.height),this.txtaspect=this.textureaspects.get("geotriangle2"),this.ny=1,console.log("this.twglprograminfo.length="+(null===(n=this.twglprograminfo)||void 0===n?void 0:n.length));var r=this.twglprograminfo[1].program;console.log("<assigned program"),this.diffuseLocation=e.getUniformLocation(r,"diffuse"),this.imageSizeLocation=e.getUniformLocation(r,"u_imageSize"),this.tealLocation=e.getUniformLocation(r,"u_teal"),this.xshiftLocation=e.getUniformLocation(r,"u_xshift"),this.yshiftLocation=e.getUniformLocation(r,"u_yshift"),this.aspectLocation=e.getUniformLocation(r,"u_aspect"),this.xzoomoffsetLocation=e.getUniformLocation(r,"u_xzoomoffset"),this.yzoomoffsetLocation=e.getUniformLocation(r,"u_yzoomoffset"),requestAnimationFrame((()=>this.render(0)))}readcolor(e){var t="#"==e[0]?e.substring(1):e;return{r:parseInt(t.substring(0,2),16)/256,g:parseInt(t.substring(2,4),16)/256,b:parseInt(t.substring(4,6),16)/256}}render(e){var t;if(null!=this.textures){var n=this.gl;a.resizeCanvasToDisplaySize(n.canvas),n.useProgram(this.twglprograminfo[1].program),n.viewport(0,0,n.canvas.width,n.canvas.height);var r=this.textures[this.currentTexture];if(null==r||null==r)return console.log("no texture"),void requestAnimationFrame((()=>this.render(++e)));n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),this.imagespaceParameters.teal?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE));var i=this.ny+(null===(t=this.app)||void 0===t?void 0:t.mouse.totaldelta)*l.zoomVelocity,o=i;n.uniform2f(this.imageSizeLocation,n.canvas.width/o,n.canvas.height/i);var s=n.canvas.height/n.canvas.width;n.uniform1f(this.aspectLocation,this.txtaspect/s),n.uniform1f(this.xzoomoffsetLocation,this.xzoomoffset),n.uniform1f(this.yzoomoffsetLocation,this.yzoomoffset),n.uniform1i(this.tealLocation,this.imagespaceParameters.teal?1:0),n.uniform1i(this.xshiftLocation,this.cxshift),n.uniform1i(this.yshiftLocation,this.cyshift),n.drawArrays(n.TRIANGLES,0,3),document.getElementById("cdiv").innerHTML="draw "+e+", xshift="+Math.round(this.cxshift)+", yshift="+this.cyshift+", xcoom="+this.xzoomoffset+", yzoom="+this.yzoomoffset+"<br> c.width="+n.canvas.width+"  c.height="+n.canvas.height+", texture="+this.currentTexture+" ny="+this.ny}else document.getElementById("cdiv").innerHTML="Initializing textures, time="+e;requestAnimationFrame((()=>this.render(++e)))}}e.exports.drawimagespace=l,l.zoomVelocity=.075,l.animationVelocity=.25})),parcelRequire.register("bIoW4",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("2Rj7r"),import.meta.url).toString()})),parcelRequire.register("7rFnN",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("jhoev"),import.meta.url).toString()})),parcelRequire.register("ecCDE",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("7YVFb"),import.meta.url).toString()})),parcelRequire.register("jFGo5",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("5wtVK"),import.meta.url).toString()})),parcelRequire.register("eBx4i",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("iXa3d"),import.meta.url).toString()})),parcelRequire.register("fhKPK",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("9Iun8"),import.meta.url).toString()})),parcelRequire.register("jtJhK",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("kP0ud"),import.meta.url).toString()})),parcelRequire.register("bccvT",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("ja1nt"),import.meta.url).toString()})),parcelRequire.register("fg1RG",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.skyboxcube=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("dC4mA")),s=i(parcelRequire("fhSLN")),l=i(parcelRequire("e93rA"));class u extends o.BaseApp{constructor(e,t,n,r){super(e,t,n,r),this.skyboxCubeParameters={movecube:!0,moveenv:!0,fieldOfViewDegrees:0,radiusCam:0,angVelocityCam:0,angVelocityCube:0},this.vsMirrorCube="#version 300 es\n    \n    in vec4 a_position;\n    in vec3 a_normal;\n    \n    uniform mat4 u_projection;\n    uniform mat4 u_view;\n    uniform mat4 u_world;\n    \n    out vec3 v_worldPosition;\n    out vec3 v_worldNormal;\n    \n    void main() {\n      // Multiply the position by the matrix.\n      gl_Position = u_projection * u_view * u_world * a_position;\n    \n      // send the view position to the fragment shader\n      v_worldPosition = (u_world * a_position).xyz;\n    \n      // orient the normals and pass to the fragment shader\n      v_worldNormal = mat3(u_world) * a_normal;\n    }\n    ",this.fsMirrorCube="#version 300 es\n    precision highp float;\n    \n    // Passed in from the vertex shader.\n    in vec3 v_worldPosition;\n    in vec3 v_worldNormal;\n    \n    // The texture.\n    uniform samplerCube u_texture;\n    \n    // The position of the camera\n    uniform vec3 u_worldCameraPosition;\n    \n    // we need to declare an output for the fragment shader\n    out vec4 outColor;\n    \n    void main() {\n      vec3 worldNormal = normalize(v_worldNormal);\n      vec3 eyeToSurfaceDir = normalize(v_worldPosition - u_worldCameraPosition);\n      vec3 direction = reflect(eyeToSurfaceDir,worldNormal);\n    \n      outColor = texture(u_texture, direction);\n    }\n    ";var i=this.twglprograminfo[0];this.twglprograminfo=new Array(2),this.twglprograminfo[0]=i,this.twglprograminfo[1]=a.createProgramInfo(e,[this.vsMirrorCube,this.fsMirrorCube])}createReflectingCubeGeo(e){this.reflectingCubeBufferInfo=a.primitives.createCubeBufferInfo(e,1.2),this.vaoCube=a.createVAOFromBufferInfo(e,this.twglprograminfo[1],this.reflectingCubeBufferInfo)}main(e,t){var n="";(n=t.get("movecube"))&&(this.skyboxCubeParameters.movecube="true"==n),(n=t.get("moveenv"))&&(this.skyboxCubeParameters.moveenv="true"==n),(n=t.get("fov"))&&(this.skyboxCubeParameters.fieldOfViewDegrees=+n),(n=t.get("vele"))&&(this.skyboxCubeParameters.angVelocityCam=+n),(n=t.get("velc"))&&(this.skyboxCubeParameters.angVelocityCube=+n),this.createReflectingCubeGeo(e),this.createEnvironmentMapGeoTwgl(e),this.skyboxtexture=this.createEnvironmentMapTexture(e,1,this.textureReadyCallback),this.cam=s.Camera.createCamera(e,t,s.Camera.CamYUp,.5,this.app),this.cam.zoominVelocity=.5,this.cam.setRadius(6),this.cam.translateEye([6,0,0]),requestAnimationFrame((()=>this.render(0)))}textureReadyCallback(e,t){console.log("SkyboxCube Environment texture isready.")}initGUI(e){this.skyboxCubeParameters=e;var t=new l.GUI({autoPlace:!1});return t.domElement.id="gui_drawimagespace",document.getElementById("linksdiv").append(t.domElement),t.close(),t.remember(this.skyboxCubeParameters),t.add(this.skyboxCubeParameters,"movecube"),t.add(this.skyboxCubeParameters,"moveenv"),t.add(this.skyboxCubeParameters,"fieldOfViewDegrees").min(20).max(80).step(.02),t.add(this.skyboxCubeParameters,"radiusCam").min(.1).max(20).step(.02),t.add(this.skyboxCubeParameters,"angVelocityCam").min(1e-4).max(.01).step(1e-4),t.add(this.skyboxCubeParameters,"angVelocityCube").min(.001).max(.01).step(1e-4),t.updateDisplay(),t}render(e){var t,n=this.gl;a.resizeCanvasToDisplaySize(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.enable(n.CULL_FACE),this.cameraPosition=this.skyboxCubeParameters.moveenv?[Math.cos(e*this.skyboxCubeParameters.angVelocityCam)*this.skyboxCubeParameters.radiusCam,0,Math.sin(e*this.skyboxCubeParameters.angVelocityCam)*this.skyboxCubeParameters.radiusCam]:[this.skyboxCubeParameters.radiusCam,0,0];var r=this.skyboxCubeParameters.fieldOfViewDegrees*Math.PI/180;if(this.cam){var i=this.cam;i.rotationVelocity=this.skyboxCubeParameters.angVelocityCam/(Math.PI/2-r),i.CamHandlingYUp(n,this.app,-1,-1),i.ReportEye(),this.skyboxCubeParameters.moveenv||(this.cameraPosition=null===(t=this.cam)||void 0===t?void 0:t.Position())}a.m4.inverse(this.computeprojectionmatrices(n,r));this.skyboxCubeParameters.movecube?this.worldMatrix=a.m4.axisRotation([1,0,0],e*this.skyboxCubeParameters.angVelocityCube):this.worldMatrix=a.m4.translation([0,0,0]),n.useProgram(this.twglprograminfo[0].program),this.renderenvironmentmapTwgl(n,r,this.skyboxtexture);var o=n.canvas.clientWidth/n.canvas.clientHeight;this.projectionMatrix=a.m4.perspective(r,o,1,2e3);var s=a.m4.lookAt(this.cameraPosition,this.cameraTarget,[0,1,0]);this.viewMatrix=a.m4.inverse(s),null==this.viewMatrix&&(this.viewMatrix=a.m4.identity()),null==this.projectionMatrix&&(this.projectionMatrix=a.m4.identity()),n.useProgram(this.twglprograminfo[1].program),n.bindVertexArray(this.vaoCube),a.setUniforms(this.twglprograminfo[1],{u_world:this.worldMatrix,u_view:this.viewMatrix,u_projection:this.projectionMatrix,u_texture:this.skyboxtexture,u_worldCameraPosition:this.cameraPosition}),a.drawBufferInfo(n,this.reflectingCubeBufferInfo),requestAnimationFrame((()=>this.render(++e)))}}e.exports.skyboxcube=u})),parcelRequire.register("c52G2",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ObjectList=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("1yvSL"));e.exports.ObjectList=class{constructor(){this.vs="#version 300 es\n\n  in vec4 a_position;\n  in vec4 a_color;\n  \n  uniform mat4 u_matrix;\n  \n  out vec4 v_color;\n  \n  void main() {\n    // Multiply the position by the matrix.\n    gl_Position = u_matrix * a_position;\n  \n    // Pass the color to the fragment shader.\n    v_color = a_color;\n  }\n  ",this.fs="#version 300 es\n  precision highp float;\n  \n  // Passed in from the vertex shader.\n  in vec4 v_color;\n  \n  uniform vec4 u_colorMult;\n  uniform vec4 u_colorOffset;\n  \n  out vec4 outColor;\n  \n  void main() {\n      outColor = v_color * u_colorMult + u_colorOffset;\n  }\n  ",this.objectsToDraw=[],this.objects=[],this.cx=0,this.cy=0,this.cz=-20,this.vx=0,this.vy=0,this.vz=.05}async FetchText(e){const t=await fetch(e);var n=await t.arrayBuffer();return new TextDecoder("utf-8").decode(n)}main(e){a.setAttributePrefix("a_"),this.gl=e,this.programInfo=a.createProgramInfo(e,[this.vs,this.fs]),this.fieldOfViewRadians=60*Math.PI/180;var t=a.primitives.createCubeBufferInfo(e,1);this.nodeInfosByName=void 0;var n=new o.NodesProducer(this.programInfo,t),r=parcelRequire("kFMbZ"),i=this.FetchText(r).then((e=>{console.log("mydata="+i+" s="+e);var t=JSON.parse(e);this.scene=n.makeNode(t),this.objects=n.objects,this.objectsToDraw=n.objectsToDraw,this.nodeInfosByName=n.nodeInfosByName}));requestAnimationFrame((e=>this.drawScene(e)))}drawScene(e){if(e*=.001,this.nodeInfosByName){var t=this.nodeInfosByName,n=this.gl;a.resizeCanvasToDisplaySize(n.canvas);var r=n.canvas.clientWidth/n.canvas.clientHeight;n.viewport(0,0,n.canvas.width,n.canvas.height),n.enable(n.CULL_FACE),n.enable(n.DEPTH_TEST),n.useProgram(this.programInfo.program);var i,o=parcelRequire("hYurQ").m4.perspective(this.fieldOfViewRadians,r,1,200),s=parcelRequire("hYurQ").m4.lookAt([14,3.5,10],[0,0,0],[0,1,0]),l=parcelRequire("hYurQ").m4.inverse(s),u=parcelRequire("hYurQ").m4.multiply(o,l),c=3*e;i=Math.abs(Math.sin(c)),t["point between feet"].trs.translation[1]=i,i=Math.sin(c),t["left-leg"].trs.rotation[0]=i,t["right-leg"].trs.rotation[0]=-i,i=.4*Math.sin(c+.1),t["left-calf"].trs.rotation[0]=-i,t["right-calf"].trs.rotation[0]=i,i=.4*Math.sin(c+.1),t["left-foot"].trs.rotation[0]=-i,t["right-foot"].trs.rotation[0]=i,i=.4*Math.sin(c),t["left-arm"].trs.rotation[0]=i,t["left-arm"].trs.rotation[1]=i,t["right-arm"].trs.rotation[2]=i,i=.4*Math.sin(c+.1),t["left-forearm"].trs.rotation[0]=i,t["left-forearm"].trs.rotation[1]=i,t["right-forearm"].trs.rotation[2]=i,i=.4*Math.sin(c-.1),t["left-hand"].trs.rotation[2]=i,t["right-hand"].trs.rotation[2]=i,t["left-hand"].trs.rotation[1]=i,t["right-hand"].trs.rotation[1]=i,i=.4*Math.sin(c),t.waist.trs.rotation[1]=i,i=.4*Math.sin(c),t.torso.trs.rotation[1]=i,i=.4*Math.sin(c+.25),t.neck.trs.rotation[1]=i,i=.4*Math.sin(c+.5),t.head.trs.rotation[1]=i,i=.4*Math.cos(2*c),t.head.trs.rotation[0]=i;var h=parcelRequire("hYurQ").m4.translation([-this.cx,this.cy,this.cz]);this.scene.updateWorldMatrix(h),this.cx+=3*this.vx/4,this.cy+=3*this.vy/4,this.cz+=3*this.vz/4,this.objects.forEach((e=>{e.drawInfo.uniforms.u_matrix=parcelRequire("hYurQ").m4.multiply(u,e.worldMatrix)})),a.drawObjectList(n,this.objectsToDraw),requestAnimationFrame((e=>this.drawScene(e)))}else requestAnimationFrame((e=>this.drawScene(e)))}}})),parcelRequire.register("ak2pE",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DrawInstanced=void 0;const a=i(parcelRequire("hYurQ"));e.exports.DrawInstanced=class{constructor(){this.vertexShaderSource="#version 300 es\nin vec4 a_position;\nin vec4 color;\nin mat4 matrix;\nuniform mat4 projection;\nuniform mat4 view;\n\nout vec4 v_color;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = projection * view * matrix * a_position;\n\n  // Pass the vertex color to the fragment shader.\n  v_color = color;\n}\n",this.fragmentShaderSource="#version 300 es\nprecision highp float;\n\n// Passed in from the vertex shader.\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}\n",this.numVertices=12,this.numInstances=5,this.matrices=[]}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}main(e){a.setAttributePrefix("a_"),this.gl=e;const t=a.createProgramInfo(e,[this.vertexShaderSource,this.fragmentShaderSource]);this.program=t.program;const n=e.getAttribLocation(this.program,"a_position"),r=e.getAttribLocation(this.program,"color"),i=e.getAttribLocation(this.program,"matrix");this.projectionLoc=e.getUniformLocation(this.program,"projection"),this.viewLoc=e.getUniformLocation(this.program,"view"),this.vao=e.createVertexArray(),e.bindVertexArray(this.vao);const o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-.1,.4,-.1,-.4,.1,-.4,-.1,.4,.1,-.4,.1,.4,-.4,-.1,.4,-.1,-.4,.1,-.4,.1,.4,-.1,.4,.1]),e.STATIC_DRAW),this.numVertices=12,e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),this.numInstances=5,this.matrixData=new Float32Array(16*this.numInstances);for(let e=0;e<this.numInstances;++e){const t=64*e,n=16;this.matrices.push(new Float32Array(this.matrixData.buffer,t,n))}this.matrixBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.matrixBuffer),e.bufferData(e.ARRAY_BUFFER,this.matrixData.byteLength,e.DYNAMIC_DRAW);for(let t=0;t<4;++t){const n=i+t;e.enableVertexAttribArray(n);const r=16*t;e.vertexAttribPointer(n,4,e.FLOAT,!1,64,r),e.vertexAttribDivisor(n,1)}const s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,1,0,1,0,1,0,0,1,1,1,0,1,1,0,1,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,4,e.FLOAT,!1,0,0),e.vertexAttribDivisor(r,1),requestAnimationFrame((()=>this.drawScene(0)))}drawScene(e){var t=this.gl;e*=.001,a.resizeCanvasToDisplaySize(t.canvas),t.viewport(0,0,t.canvas.width,t.canvas.height),t.useProgram(this.program);const n=t.canvas.clientWidth/t.canvas.clientHeight;t.uniformMatrix4fv(this.projectionLoc,!1,parcelRequire("hYurQ").m4.ortho(-n,n,-1,1,-1,1)),t.uniformMatrix4fv(this.viewLoc,!1,parcelRequire("hYurQ").m4.axisRotation([0,0,1],.1*e)),t.bindVertexArray(this.vao),this.matrices.forEach(((t,n)=>{parcelRequire("hYurQ").m4.translation([.25*n-.5,0,0],t),parcelRequire("hYurQ").m4.axisRotate(t,[0,0,1],e*(.1+.1*n),t)})),t.bindBuffer(t.ARRAY_BUFFER,this.matrixBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.matrixData),t.drawArraysInstanced(t.TRIANGLES,0,this.numVertices,this.numInstances),requestAnimationFrame((e=>this.drawScene(e)))}}})),parcelRequire.register("6zGIt",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Canvas3dTexture=void 0;const a=i(parcelRequire("hYurQ"));e.exports.Canvas3dTexture=class{constructor(){this.vertexShaderSource="#version 300 es\n\n// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nin vec4 a_position;\nin vec2 a_texcoord;\n\n// A matrix to transform the positions by\nuniform mat4 u_matrix;\n\n// a varying to pass the texture coordinates to the fragment shader\nout vec2 v_texcoord;\n\n// all shaders have a main function\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = u_matrix * a_position;\n\n  // Pass the texcoord to the fragment shader.\n  v_texcoord = a_texcoord;\n}\n",this.fragmentShaderSource="#version 300 es\n\nprecision highp float;\n\n// Passed in from the vertex shader.\nin vec2 v_texcoord;\n\n// The texture.\nuniform sampler2D u_texture;\nuniform vec4 u_colorMult;\n\n// we need to declare an output for the fragment shader\nout vec4 outColor;\n\nvoid main() {\n   outColor = vec4(texture(u_texture, v_texcoord).rrr, 1) * u_colorMult;\n}\n"}main(e){e.canvas;if(!e)return;var t=a.createProgramFromSources(e,[this.vertexShaderSource,this.fragmentShaderSource]),n=e.getAttribLocation(t,"a_position"),r=e.getAttribLocation(t,"a_texcoord"),i=e.getUniformLocation(t,"u_matrix"),o=e.getUniformLocation(t,"u_texture"),s=e.getUniformLocation(t,"u_colorMult"),l=e.createBuffer(),u=e.createVertexArray();e.bindVertexArray(u),e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,l),this.setGeometry(e);var c=3,h=e.FLOAT,f=!1,d=0,p=0;e.vertexAttribPointer(n,c,h,f,d,p);var m=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,m),this.setTexcoords(e),e.enableVertexAttribArray(r);c=2,h=e.FLOAT,f=!0,d=0,p=0;e.vertexAttribPointer(r,c,h,f,d,p);var g=e.createTexture();e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,g);{const t=0,n=e.R8,r=3,i=2,a=0,o=e.RED,s=e.UNSIGNED_BYTE,l=new Uint8Array([128,64,128,0,192,0]);e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texImage2D(e.TEXTURE_2D,t,n,r,i,a,o,s,l)}e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const _=256,v=256,b=e.createTexture();e.bindTexture(e.TEXTURE_2D,b);{const t=0,n=e.RGBA,r=0,i=e.RGBA,a=e.UNSIGNED_BYTE,o=null;e.texImage2D(e.TEXTURE_2D,t,n,_,v,r,i,a,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}const x=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,x);const y=e.COLOR_ATTACHMENT0;e.framebufferTexture2D(e.FRAMEBUFFER,y,e.TEXTURE_2D,b,0);const w=e.createTexture();e.bindTexture(e.TEXTURE_2D,w);{const t=0,n=e.DEPTH_COMPONENT24,r=0,i=e.DEPTH_COMPONENT,a=e.UNSIGNED_INT,o=null;e.texImage2D(e.TEXTURE_2D,t,n,_,v,r,i,a,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,w,t)}var R=60*Math.PI/180,E=0,A=0,T=0;function P(n){e.useProgram(t),e.bindVertexArray(u);var r=parcelRequire("hYurQ").m4.perspective(R,n,1,2e3),a=parcelRequire("hYurQ").m4.lookAt([0,0,2],[0,0,0],[0,1,0]),l=parcelRequire("hYurQ").m4.inverse(a),c=parcelRequire("hYurQ").m4.multiply(r,l);for(let t=-1;t<=1;++t){var h=parcelRequire("hYurQ").m4.translate(c,[.9*t,0,0]);h=parcelRequire("hYurQ").m4.axisRotate(h,[1,0,0],E*t),h=parcelRequire("hYurQ").m4.axisRotate(h,[0,1,0],A*t),e.uniformMatrix4fv(i,!1,h),e.uniform1i(o,0);const n=.5*t+.5;e.uniform4fv(s,[.5*n+.5,1,1-n,1]);var f=e.TRIANGLES;e.drawArrays(f,0,36)}}requestAnimationFrame((function t(n){var r=(n*=.001)-T;T=n,A+=-.7*r,E+=-.4*r,a.resizeCanvasToDisplaySize(e.canvas),e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST);e.bindFramebuffer(e.FRAMEBUFFER,x),e.bindTexture(e.TEXTURE_2D,g),e.viewport(0,0,_,v),e.clearColor(.5,.7,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);P(1);e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,b),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);P(e.canvas.clientWidth/e.canvas.clientHeight);requestAnimationFrame(t)}))}setGeometry(e){var t=new Float32Array([-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5]);e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}setTexcoords(e){e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1]),e.STATIC_DRAW)}}})),parcelRequire.register("jekDm",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MatObjScene=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("ikvii")),s=i(parcelRequire("hJ3FQ"));e.exports.MatObjScene=class{constructor(e,t,n){this.scenesize=40,this.sceneenv=2,this.vertexShaderSource="",this.fragmentShaderSource="",this.twglprograminfo=null,this.time=0,this.dtime=.01,this.vertexPositionAttributeLocation=0,this.normalAttributeLocation=0,this.texCoordAttributeLocation=0,this.texs=[],this.uniforms={u_lightWorldPos:[0,0,0],u_ambient:[0,0,0,1],u_specular:[0,0,0,1],u_emissive:[0,0,0,1],u_shininess:0,u_specularFactor:0,u_diffuse:this.texs[0],u_difflightintensity:0,u_speclightintensity:0},this.resolvedfilenames=new Map,this.resolvedtextures=new Map,this.imgs=[],this.imgsa=[],this.ctime=0,this.vs="#version 300 es\nuniform mat4 u_worldViewProjection;\nuniform vec3 u_lightWorldPos;\nuniform mat4 u_world;\nuniform mat4 u_viewInverse;\nuniform mat4 u_worldInverseTranspose;\n\n// ES3 convention\n//layout(location=0) in vec4 position;\n//layout(location=1) in vec3 normal;\n//layout(location=2) in vec2 texcoord;\n\nin vec4 position;\nin vec3 normal;\nin vec2 texcoord;\n\n// out, not varying\nout vec4 v_position;\nout  vec2 v_texCoord;\nout  vec3 v_normal;\nout  vec3 v_surfaceToLight;\nout  vec3 v_surfaceToView;\n\nvoid main() {\n  v_texCoord = texcoord;\n  v_position = u_worldViewProjection * position;\n  v_normal = (u_worldInverseTranspose * vec4(normal, 0)).xyz;\n  v_surfaceToLight = u_lightWorldPos - (u_world * position).xyz;\n  v_surfaceToView = (u_viewInverse[3] - (u_world * position)).xyz;\n  gl_Position = v_position;\n}\n",this.fs="#version 300 es\n precision mediump float;\n\n in vec4 v_position;\n in vec2 v_texCoord;\n in vec3 v_normal;\n in vec3 v_surfaceToLight;\n in vec3 v_surfaceToView;\n\n uniform vec3 u_lightDirection;\n uniform vec4 u_ambient;\n uniform sampler2D u_diffuse;\n uniform vec4 u_specular;\n uniform vec4 u_emissive;\n uniform float u_shininess;\n uniform float u_specularFactor;\n uniform float u_difflightintensity;\n uniform float u_speclightintensity;\n\n\n vec4 lit(float l ,float h, float m) {\n   return vec4(1.0,\n               max(l, 0.0),\n               (l > 0.0) ? pow(max(0.0, h), m) : 0.0,\n               1.0);\n }\n\n out vec4 glFragColor;\n\n void main() {\n  \n    vec3 normal = normalize(v_normal);\n    vec3 surfaceToViewDirection = normalize(v_surfaceToView);\n    vec3 halfVector = normalize(u_lightDirection + surfaceToViewDirection);\n\n    float fakeLight = dot(u_lightDirection, normal) * .5 + .5;\n    float specularLight = clamp(dot(normal, halfVector), 0.0, 1.0);\n\n\n  vec4 diffuseColor = texture(u_diffuse, v_texCoord);\n  float lightIntensity = dot(normalize(v_normal), normalize(v_surfaceToLight)); \n  lightIntensity = clamp( lightIntensity,0.0,u_difflightintensity);\n  vec4 ambientColor = u_ambient * 0.25;\n  diffuseColor = diffuseColor * lightIntensity;\n  float shininess = clamp(u_shininess / 10.0, 0.,u_speclightintensity);\n  vec4 emissiveColor = normalize(u_emissive) * shininess;\n  vec4 specColor = specularLight * u_specular;\n  vec4 outColor = diffuseColor + emissiveColor + specColor + ambientColor;\n  outColor[3] = 1.0;\n  glFragColor = outColor;\n }",console.log("=> Constructor MatObjScene - create programInfo"),this.twglprograminfo=new Array(3),this.twglprograminfo[1]=a.createProgramInfo(e,[this.vs,this.fs])}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}defaultCamera(e,t){var n=o.meshMinMax.maxx-o.meshMinMax.minx,r=o.meshMinMax.maxy-o.meshMinMax.miny,i=o.meshMinMax.maxz-o.meshMinMax.minz,a=Math.sqrt(n*n+r*r+i*i);t.translateTarget([(o.meshMinMax.maxx+o.meshMinMax.minx)/2,(o.meshMinMax.maxy+o.meshMinMax.miny)/2,(o.meshMinMax.maxz+o.meshMinMax.minz)/2]),t.zoominVelocity=a/40}initScene(e,t,n,r,i,a){this.getFiles(r).then((()=>{if(e.canvas.parentNode.style.backgroundColor=this.animationParameters.b.color0,o.mesh){var t=this.twglprograminfo[1].program;this.vertexPositionAttributeLocation=e.getAttribLocation(t,"position"),e.enableVertexAttribArray(this.vertexPositionAttributeLocation),this.normalAttributeLocation=e.getAttribLocation(t,"normal"),e.enableVertexAttribArray(this.normalAttributeLocation),this.texCoordAttributeLocation=e.getAttribLocation(t,"texcoord"),e.enableVertexAttribArray(this.texCoordAttributeLocation),console.log("obj/mtl mesh read ok"),o.CreateMeshWithBuffers(e),o.PrepareIndexBuffers(e),console.log("<= Prepare obj/mtl mesh <= buffers ok"),this.Prepare(e,a)}else console.log("ERROR: obj/mtl no mesh could be created.")}))}extendGUI(e){e.add(this.animationParameters,"fov",5,85,1)}async getFiles(e){var t=s.getFileNamesCube();null!=(null==e?void 0:e.get("koenigsegg"))&&(t=s.getFileNamesKoenigsEgg()),null!=(null==e?void 0:e.get("building"))&&(t=s.getFileNamesBuilding()),null!=(null==e?void 0:e.get("chair"))&&(t=s.getFileNamesChair()),null!=(null==e?void 0:e.get("chair2"))&&(t=s.getFileNamesChair2()),null!=(null==e?void 0:e.get("cat"))&&(t=s.getFileNamesCat()),null!=(null==e?void 0:e.get("plane"))&&(t=s.getFileNamesPlane()),null!=(null==e?void 0:e.get("rubik"))&&(t=s.getFileNamesRubik()),null!=(null==e?void 0:e.get("stone"))&&(t=s.getFileNamesStone()),null!=(null==e?void 0:e.get("greenhouse"))&&(t=s.getFileNamesGreenhouse()),console.log("=> await "+t.cobjname+" "+t.cmatname),await o.asyncFetchObjMtl(t.cobjname,t.cmatname),null!=t.cfiles&&t.cfiles.length>0?(console.log("<= await result"),console.log("see resolved files: "+t.cfiles.length),t.cfiles.forEach((({fName:e,fNameResolved:t})=>{this.resolvedfilenames.set(e,t),console.log("reg: "+e+" => "+t)}))):console.log("<= await no result")}LoadImage(e,t,n){var r=new Image;return r.src=t,r.onload=function(){n(e,r)},r}LoadImages(e,t,n,r){var i=new Image;return i.src=n[t],i.onload=()=>{console.log("load image: ["+n[t]),(t=this.imgs.push(i))<n.length?this.LoadImages(e,t,n,r):r(e,t)},i}Prepare(e,t){if(console.log("=> Prepare - get materials"),this.mats=o.mesh.materialsByIndex,null!=this.mats&&null!=this.mats){console.log("=> Prepare - found "+o.mesh.materialNames.length+" materials in mtl");for(var n=0;n<o.mesh.materialNames.length;n++){if(null!=this.mats[n]){console.log("found  material i="+n+" name="+o.mesh.materialNames[n]);for(var r=[],i=0;i<4;i++)r.push(255*this.mats[n].diffuse[0]),r.push(255*this.mats[n].diffuse[1]),r.push(255*this.mats[n].diffuse[2]),r.push(255);this.texs.push(a.createTexture(e,{min:e.NEAREST,mag:e.NEAREST,src:r}));var s=this.mats[n].mapDiffuse;null!=s.filename&&""!=s.filename&&console.log("Prepare - found material texture file reference: ["+s.filename+"]")}}var l=[],u=[];null!=this.resolvedfilenames.keys&&this.resolvedfilenames.forEach(((e,t)=>{console.log("Prepare "+t+" set texture file load: "+e),l.push(e),u.push(t)})),l.length>0?this.LoadImages(e,0,l,((e,n)=>{console.log("Found "+n+" file textures, expect "+l.length);for(var r=0;r<n;r++){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texStorage2D(e.TEXTURE_2D,1,e.RGB8,this.imgs[r].width,this.imgs[r].height),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGB,e.UNSIGNED_BYTE,this.imgs[r]),this.resolvedtextures.set(u[r],i),console.log("Prepare - register resolved texture "+r+" "+u[r]+" width="+this.imgs[r].width+" height="+this.imgs[r].height)}console.log("Prepare - texture itemSize="+o.meshWithBuffers.textureBuffer.itemSize),console.log("Prepare - finish, there are "+n+" file textures"),t(1),this.time=0,a.resizeCanvasToDisplaySize(e.canvas)}
//!      requestAnimationFrame(() => this.render(0));  
)):(console.log("Prepare - no textures, > requestAnimationFrame()"),this.time=0,a.resizeCanvasToDisplaySize(e.canvas),t(1)),console.log("Prepare - return")}}prepareMaterial(e){var t=this.texs[e],n=this.mats[e],r="";if(null==n.mapDiffuse)r="UNDEFINED TEXTURE",console.log(r);else if(n.mapDiffuse.filename.length>0){var i=this.resolvedtextures.get(n.mapDiffuse.filename);this.uniforms.u_diffuse=null==i||null==i?t:t=i}else this.uniforms.u_diffuse=t=this.texs[e];return this.uniforms.u_emissive=[n.emissive[0],n.emissive[1],n.emissive[2],1],this.uniforms.u_ambient=[n.ambient[0],n.ambient[1],n.ambient[2],1],this.uniforms.u_specular=[n.specular[0],n.specular[1],n.specular[2],1],this.uniforms.u_shininess=n.illumination,this.uniforms.u_difflightintensity=1,t}drawScene(e,t,n){if(this.ctime=n,null!=t&&null!=this.twglprograminfo[1].program){this.uniforms.u_lightWorldPos=t.lightpos,this.uniforms.u_difflightintensity=t.difflightintensity,this.uniforms.u_speclightintensity=t.speclightintensity;for(var r=parcelRequire("hYurQ").m4.identity(),i=0;i<this.texs.length;i++)if(null!=this.mats[i]){var s=this.prepareMaterial(i);a.setUniforms(this.twglprograminfo[1],this.uniforms),a.setUniforms(this.twglprograminfo[1],{u_viewInverse:t.lookAt,u_world:r,u_worldInverseTranspose:parcelRequire("hYurQ").m4.transpose(parcelRequire("hYurQ").m4.inverse(r)),u_worldViewProjection:parcelRequire("hYurQ").m4.multiply(t.viewProjection,r)}),o.renderIndexBuffer(e,this.vertexPositionAttributeLocation,this.normalAttributeLocation,this.texCoordAttributeLocation,i,2,s)}else console.log("undefined material i="+i);
//!   requestAnimationFrame(() => this.render(this.dtime)); 
}}}})),parcelRequire.register("ikvii",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.GetDeclaredObjMtl=e.exports.asyncFetchObjMtl=e.exports.FetchImage=e.exports.PrepareIndexBuffers=e.exports.renderIndexBuffer=e.exports.render=e.exports.NumElements=e.exports.CreateMeshWithBuffers=e.exports.meshWithBuffers=e.exports.meshMinMax=e.exports.mesh=void 0;const a=i(parcelRequire("fsvQH"));function o(e,t,n,r){const i=e.createBuffer(),a=t===e.ARRAY_BUFFER?Float32Array:Uint16Array;return e.bindBuffer(t,i),e.bufferData(t,new a(n),e.STATIC_DRAW),i.itemSize=r,i.numItems=n.length/r,i}var s;e.exports.CreateMeshWithBuffers=function(t){e.exports.meshWithBuffers=a.initMeshBuffers(t,e.exports.mesh),console.log("meshWithBuffers.vertexBuffer.numItems="+e.exports.meshWithBuffers.vertexBuffer.numItems),console.log("meshWithBuffers.vertexBuffer.vertices.length="+e.exports.meshWithBuffers.vertices.values.length),console.log("meshWithBuffers.vertexBuffer.vertices.values.length="+e.exports.meshWithBuffers.vertices.values.length),console.log("meshWithBuffers.normalBuffer.numItems="+e.exports.meshWithBuffers.normalBuffer.numItems),console.log("meshWithBuffers.indices.length="+e.exports.meshWithBuffers.indices.length),console.log("meshWithBuffers.indexBuffer.numItems="+e.exports.meshWithBuffers.indexBuffer.numItems),console.log("meshWithBuffers.textureBuffer.numItems="+e.exports.meshWithBuffers.textureBuffer.numItems)},e.exports.NumElements=function(){return null===e.exports.meshWithBuffers||void 0===e.exports.meshWithBuffers?void 0:e.exports.meshWithBuffers.indexBuffer.numItems},e.exports.render=function(t,n,r,i,a){t.bindBuffer(t.ARRAY_BUFFER,e.exports.meshWithBuffers.vertexBuffer),t.vertexAttribPointer(n,e.exports.meshWithBuffers.vertexBuffer.itemSize,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e.exports.meshWithBuffers.normalBuffer),t.vertexAttribPointer(r,e.exports.meshWithBuffers.normalBuffer.itemSize,t.FLOAT,!1,0,0);var s=o(t,t.ELEMENT_ARRAY_BUFFER,e.exports.mesh.indicesPerMaterial[a],1);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),e.exports.mesh.textures.length?(t.enableVertexAttribArray(i),t.bindBuffer(t.ARRAY_BUFFER,e.exports.meshWithBuffers.textureBuffer),t.vertexAttribPointer(i,e.exports.meshWithBuffers.textureBuffer.itemSize,t.FLOAT,!1,0,0)):t.disableVertexAttribArray(i),t.drawElements(t.TRIANGLES,e.exports.mesh.indicesPerMaterial[a].length,t.UNSIGNED_SHORT,0)};var l=[];function u(){var t={smatreport:"",smeshreport:""};t.smeshreport+="mesh.indices.length="+e.exports.mesh.indices.length+" mesh.vertices.length="+e.exports.mesh.vertices.length+" mesh.vertexNormals.length="+e.exports.mesh.vertexNormals.length+"<br />",t.smeshreport+="mesh.vertexMaterialIndices.length="+e.exports.mesh.vertexMaterialIndices.length;var n=s.materials;for(let e in n){var r=n[e];t.smatreport+=r.name+" dif="+r.diffuse+" amb="+r.ambient+" emis="+r.emissive+" spec="+r.specular+" mapamb="+r.mapDiffuse.filename+" ill="+r.illumination+"<br/>"}return e.exports.meshMinMax=function(){var t,n=1e8,r=-1e8,i=1e8,a=-1e8,o=1e8,s=-1e8;for(t=0;t<e.exports.mesh.vertices.length;t+=3)e.exports.mesh.vertices[t+0]<n&&(n=e.exports.mesh.vertices[t+0]),e.exports.mesh.vertices[t+1]<i&&(i=e.exports.mesh.vertices[t+1]),e.exports.mesh.vertices[t+2]<o&&(o=e.exports.mesh.vertices[t+2]),e.exports.mesh.vertices[t+0]>r&&(r=e.exports.mesh.vertices[t+0]),e.exports.mesh.vertices[t+1]>a&&(a=e.exports.mesh.vertices[t+1]),e.exports.mesh.vertices[t+2]>s&&(s=e.exports.mesh.vertices[t+2]);return{minx:n,maxx:r,miny:i,maxy:a,minz:o,maxz:s}}(),t.smeshreport+="<br/>",t.smeshreport+="minx="+e.exports.meshMinMax.minx+", maxx="+e.exports.meshMinMax.maxx+"<br />",t.smeshreport+="miny="+e.exports.meshMinMax.miny+", maxy="+e.exports.meshMinMax.maxy+"<br />",t.smeshreport+="minz="+e.exports.meshMinMax.minz+", maxz="+e.exports.meshMinMax.maxz+"<br />",t}async function c(e){const t=await fetch(e);var n=await t.arrayBuffer();return new TextDecoder("utf-8").decode(n)}e.exports.renderIndexBuffer=function(t,n,r,i,a,o,s){t.bindBuffer(t.ARRAY_BUFFER,e.exports.meshWithBuffers.vertexBuffer),t.vertexAttribPointer(n,e.exports.meshWithBuffers.vertexBuffer.itemSize,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e.exports.meshWithBuffers.normalBuffer),t.vertexAttribPointer(r,e.exports.meshWithBuffers.normalBuffer.itemSize,t.FLOAT,!1,0,0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,l[a]),t.bindTexture(t.TEXTURE_2D,s),t.enableVertexAttribArray(i),t.bindBuffer(t.ARRAY_BUFFER,e.exports.meshWithBuffers.textureBuffer),t.vertexAttribPointer(i,o,t.FLOAT,!1,0,0),t.drawElements(t.TRIANGLES,e.exports.mesh.indicesPerMaterial[a].length,t.UNSIGNED_SHORT,0)},e.exports.PrepareIndexBuffers=function(t){for(var n=0;n<e.exports.mesh.materialNames.length;n++)l.push(o(t,t.ELEMENT_ARRAY_BUFFER,e.exports.mesh.indicesPerMaterial[n],1))},e.exports.FetchImage=async function(e){return(await fetch(e)).arrayBuffer()},e.exports.asyncFetchObjMtl=async function(t,n){var r=await c(t),i=await c(n);if(s=new(parcelRequire("fsvQH").MaterialLibrary)(i)){var a=s.materials.Material;null!=a&&console.log("ambient="+a.ambient+" diffuse="+a.diffuse+" specular="+a.specular);var o={enableWTextureCoord:!1,calcTangentsAndBitangents:!1,materials:s.materials};if(e.exports.mesh=new(parcelRequire("fsvQH").Mesh)(r,o),e.exports.mesh){e.exports.mesh.addMaterialLibrary(s);var l=u();const t=document.querySelector("#cdiv");t&&(t.innerHTML="<style> thead {color: green;} tbody {color: blue;}tfoot {color: red;}table, th, td { border: 1px solid black;}</style><table><thead><tr><th style='horizontal-align:left'>MTL Material</th><th>OBJ Mesh</th></tr></thead><tbody><tr><td style='vertical-align:top;width:600px'>"+l.smatreport+"</td><td style='vertical-align:top'>"+l.smeshreport+"</td></tr></tbody></table>")}else console.log("object file  "+t+" could not be read.")}else console.log("materials file "+n+" could not be read")},e.exports.GetDeclaredObjMtl=function(){console.log("strings fetched");var t=f,n=h;if(a)if(s=new(parcelRequire("fsvQH").MaterialLibrary)(n)){var r=s.materials.Material;console.log("Found material: "+r),null!=r&&console.log("ambient="+r.ambient+" diffuse="+r.diffuse+" specular="+r.specular+" l.illum="+r.illumination);var i={enableWTextureCoord:!1,calcTangentsAndBitangents:!1,materials:s.materials};if(e.exports.mesh=new(parcelRequire("fsvQH").Mesh)(t,i),e.exports.mesh){e.exports.mesh.addMaterialLibrary(s);var o=u();const t=document.querySelector("#cdiv");t&&(t.innerHTML="<style> thead {color: green;} tbody {color: blue;}tfoot {color: red;}table, th, td { border: 1px solid black;}</style><table><thead><tr><th style='horizontal-align:left'>MTL Material</th><th>OBJ Mesh</th></tr></thead><tbody><tr><td style='vertical-align:top;width:auto'>"+o.smatreport+"</td><td style='width:600px;vertical-align:top'>"+o.smeshreport+"</td></tr></tbody></table>")}else console.log("Cube obj in memory could not be read.")}else console.log("Cube obj materials could not be read");else console.log("OBJ import library not accessible")};const h="# Blender MTL File: 'None'\n# Material Count: 11\n\nnewmtl Material\nNs 323.999994\nKa 1.000000 1.000000 0.000000\nKd 0.500000 0.500000 1.000000\nKs 0.500000 0.500000 1.000000\nKe 0.0 1.0 0.0\nNi 1.000000\nd 1.000000\nillum 6\n\nnewmtl Material2\nNs 323.999994\nKa 0.000000 1.000000 0.000000\nKd 1.000000 0.500000 1.000000\nKs 1.000000 1.000000 0.000000\nKe 0.0 1.0 0.0\nNi 1.000000\nd 1.000000\nillum 6\n",f="# Blender v2.80 (sub 75) OBJ File: ''\n# www.blender.org\nmtllib cube2.mtl\no Cube\nv 1.000000 1.000000 -1.000000\nv 1.000000 -1.000000 -1.000000\nv 1.000000 1.000000 1.000000\nv 1.000000 -1.000000 1.000000\nv -1.000000 1.000000 -1.000000\nv -1.000000 -1.000000 -1.000000\nv -1.000000 1.000000 1.000000\nv -1.000000 -1.000000 1.000000\nv 4.000000 1.000000 -1.000000\nv 4.000000 -1.000000 -1.000000\nv 4.000000 1.000000 1.000000\nv 4.000000 -1.000000 1.000000\nv 3.000000 1.000000 -1.000000\nv 3.000000 -1.000000 -1.000000\nv 3.000000 1.000000 1.000000\nv 3.000000 -1.000000 1.000000\nvt 0.375000 0.000000\nvt 0.625000 0.000000\nvt 0.625000 0.250000\nvt 0.375000 0.250000\nvt 0.375000 0.250000\nvt 0.625000 0.250000\nvt 0.625000 0.500000\nvt 0.375000 0.500000\nvt 0.625000 0.750000\nvt 0.375000 0.750000\nvt 0.625000 0.750000\nvt 0.625000 1.000000\nvt 0.375000 1.000000\nvt 0.125000 0.500000\nvt 0.375000 0.500000\nvt 0.375000 0.750000\nvt 0.125000 0.750000\nvt 0.625000 0.500000\nvt 0.875000 0.500000\nvt 0.875000 0.750000\nvn 0.0000 1.0000 0.0000\nvn 0.0000 0.0000 1.0000\nvn -1.0000 0.0000 0.0000\nvn 0.0000 -1.0000 0.0000\nvn 1.0000 0.0000 0.0000\nvn 0.0000 0.0000 -1.0000\nusemtl Material\ns off\nf 1/1/1 5/2/1 7/3/1 3/4/1\nf 4/5/2 3/6/2 7/7/2 8/8/2\nf 8/8/3 7/7/3 5/9/3 6/10/3\nf 6/10/4 2/11/4 4/12/4 8/13/4\nf 2/14/5 1/15/5 3/16/5 4/17/5\nf 6/18/6 5/19/6 1/20/6 2/11/6\nusemtl Material2\nf 9/1/1 13/2/1 15/3/1 11/4/1\nf 12/5/2 11/6/2 15/7/2 16/8/2\nf 16/8/3 15/7/3 13/9/3 14/10/3\nf 14/10/4 10/11/4 12/12/4 16/13/4\nf 10/14/5 9/15/5 11/16/5 12/17/5\nf 14/18/6 13/19/6 9/20/6 10/11/6\n"})),parcelRequire.register("fsvQH",(function(module,exports){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}({"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! exports provided: OBJ, Attribute, DuplicateAttributeException, Layout, Material, MaterialLibrary, Mesh, TYPES, downloadModels, downloadMeshes, initMeshBuffers, deleteMeshBuffers, version */function(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OBJ", function() { return OBJ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "version", function() { return version; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Mesh", function() { return _mesh__WEBPACK_IMPORTED_MODULE_0__["default"]; });\n\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["Material"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"]; });\n\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"]; });\n\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./src/utils.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"]; });\n\n\n\n\n\nconst version = "2.0.3";\nconst OBJ = {\n    Attribute: _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"],\n    DuplicateAttributeException: _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"],\n    Layout: _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"],\n    Material: _material__WEBPACK_IMPORTED_MODULE_1__["Material"],\n    MaterialLibrary: _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"],\n    Mesh: _mesh__WEBPACK_IMPORTED_MODULE_0__["default"],\n    TYPES: _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"],\n    downloadModels: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"],\n    downloadMeshes: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"],\n    initMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"],\n    deleteMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"],\n    version,\n};\n/**\n * @namespace\n */\n\n\n\n//# sourceURL=webpack:///./src/index.ts?')},"./src/layout.ts":
/*!***********************!*\
  !*** ./src/layout.ts ***!
  \***********************/
/*! exports provided: TYPES, DuplicateAttributeException, Attribute, Layout */function(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return DuplicateAttributeException; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return Attribute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return Layout; });\nvar TYPES;\n(function (TYPES) {\n    TYPES["BYTE"] = "BYTE";\n    TYPES["UNSIGNED_BYTE"] = "UNSIGNED_BYTE";\n    TYPES["SHORT"] = "SHORT";\n    TYPES["UNSIGNED_SHORT"] = "UNSIGNED_SHORT";\n    TYPES["FLOAT"] = "FLOAT";\n})(TYPES || (TYPES = {}));\n/**\n * An exception for when two or more of the same attributes are found in the\n * same layout.\n * @private\n */\nclass DuplicateAttributeException extends Error {\n    /**\n     * Create a DuplicateAttributeException\n     * @param {Attribute} attribute - The attribute that was found more than\n     *        once in the {@link Layout}\n     */\n    constructor(attribute) {\n        super(`found duplicate attribute: ${attribute.key}`);\n    }\n}\n/**\n * Represents how a vertex attribute should be packed into an buffer.\n * @private\n */\nclass Attribute {\n    /**\n     * Create an attribute. Do not call this directly, use the predefined\n     * constants.\n     * @param {string} key - The name of this attribute as if it were a key in\n     *        an Object. Use the camel case version of the upper snake case\n     *        const name.\n     * @param {number} size - The number of components per vertex attribute.\n     *        Must be 1, 2, 3, or 4.\n     * @param {string} type - The data type of each component for this\n     *        attribute. Possible values:<br/>\n     *        "BYTE": signed 8-bit integer, with values in [-128, 127]<br/>\n     *        "SHORT": signed 16-bit integer, with values in\n     *            [-32768, 32767]<br/>\n     *        "UNSIGNED_BYTE": unsigned 8-bit integer, with values in\n     *            [0, 255]<br/>\n     *        "UNSIGNED_SHORT": unsigned 16-bit integer, with values in\n     *            [0, 65535]<br/>\n     *        "FLOAT": 32-bit floating point number\n     * @param {boolean} normalized - Whether integer data values should be\n     *        normalized when being casted to a float.<br/>\n     *        If true, signed integers are normalized to [-1, 1].<br/>\n     *        If true, unsigned integers are normalized to [0, 1].<br/>\n     *        For type "FLOAT", this parameter has no effect.\n     */\n    constructor(key, size, type, normalized = false) {\n        this.key = key;\n        this.size = size;\n        this.type = type;\n        this.normalized = normalized;\n        switch (type) {\n            case "BYTE":\n            case "UNSIGNED_BYTE":\n                this.sizeOfType = 1;\n                break;\n            case "SHORT":\n            case "UNSIGNED_SHORT":\n                this.sizeOfType = 2;\n                break;\n            case "FLOAT":\n                this.sizeOfType = 4;\n                break;\n            default:\n                throw new Error(`Unknown gl type: ${type}`);\n        }\n        this.sizeInBytes = this.sizeOfType * size;\n    }\n}\n/**\n * A class to represent the memory layout for a vertex attribute array. Used by\n * {@link Mesh}\'s TBD(...) method to generate a packed array from mesh data.\n * <p>\n * Layout can sort of be thought of as a C-style struct declaration.\n * {@link Mesh}\'s TBD(...) method will use the {@link Layout} instance to\n * pack an array in the given attribute order.\n * <p>\n * Layout also is very helpful when calling a WebGL context\'s\n * <code>vertexAttribPointer</code> method. If you\'ve created a buffer using\n * a Layout instance, then the same Layout instance can be used to determine\n * the size, type, normalized, stride, and offset parameters for\n * <code>vertexAttribPointer</code>.\n * <p>\n * For example:\n * <pre><code>\n *\n * const index = glctx.getAttribLocation(shaderProgram, "pos");\n * glctx.vertexAttribPointer(\n *   layout.position.size,\n *   glctx[layout.position.type],\n *   layout.position.normalized,\n *   layout.position.stride,\n *   layout.position.offset);\n * </code></pre>\n * @see {@link Mesh}\n */\nclass Layout {\n    /**\n     * Create a Layout object. This constructor will throw if any duplicate\n     * attributes are given.\n     * @param {Array} ...attributes - An ordered list of attributes that\n     *        describe the desired memory layout for each vertex attribute.\n     *        <p>\n     *\n     * @see {@link Mesh}\n     */\n    constructor(...attributes) {\n        this.attributes = attributes;\n        this.attributeMap = {};\n        let offset = 0;\n        let maxStrideMultiple = 0;\n        for (const attribute of attributes) {\n            if (this.attributeMap[attribute.key]) {\n                throw new DuplicateAttributeException(attribute);\n            }\n            // Add padding to satisfy WebGL\'s requirement that all\n            // vertexAttribPointer calls have an offset that is a multiple of\n            // the type size.\n            if (offset % attribute.sizeOfType !== 0) {\n                offset += attribute.sizeOfType - (offset % attribute.sizeOfType);\n                console.warn("Layout requires padding before " + attribute.key + " attribute");\n            }\n            this.attributeMap[attribute.key] = {\n                attribute: attribute,\n                size: attribute.size,\n                type: attribute.type,\n                normalized: attribute.normalized,\n                offset: offset,\n            };\n            offset += attribute.sizeInBytes;\n            maxStrideMultiple = Math.max(maxStrideMultiple, attribute.sizeOfType);\n        }\n        // Add padding to the end to satisfy WebGL\'s requirement that all\n        // vertexAttribPointer calls have a stride that is a multiple of the\n        // type size. Because we\'re putting differently sized attributes into\n        // the same buffer, it must be padded to a multiple of the largest\n        // type size.\n        if (offset % maxStrideMultiple !== 0) {\n            offset += maxStrideMultiple - (offset % maxStrideMultiple);\n            console.warn("Layout requires padding at the back");\n        }\n        this.stride = offset;\n        for (const attribute of attributes) {\n            this.attributeMap[attribute.key].stride = this.stride;\n        }\n    }\n}\n// Geometry attributes\n/**\n * Attribute layout to pack a vertex\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.POSITION = new Attribute("position", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.NORMAL = new Attribute("normal", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n *\n * @see {@link Layout}\n */\nLayout.TANGENT = new Attribute("tangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s bitangent x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n * @see {@link Layout}\n */\nLayout.BITANGENT = new Attribute("bitangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s texture coordinates\' u & v as floats\n *\n * @see {@link Layout}\n */\nLayout.UV = new Attribute("uv", 2, TYPES.FLOAT);\n// Material attributes\n/**\n * Attribute layout to pack an unsigned short to be interpreted as a the index\n * into a {@link Mesh}\'s materials list.\n * <p>\n * The intention of this value is to send all of the {@link Mesh}\'s materials\n * into multiple shader uniforms and then reference the current one by this\n * vertex attribute.\n * <p>\n * example glsl code:\n *\n * <pre><code>\n *  // this is bound using MATERIAL_INDEX\n *  attribute int materialIndex;\n *\n *  struct Material {\n *    vec3 diffuse;\n *    vec3 specular;\n *    vec3 specularExponent;\n *  };\n *\n *  uniform Material materials[MAX_MATERIALS];\n *\n *  // ...\n *\n *  vec3 diffuse = materials[materialIndex];\n *\n * </code></pre>\n * TODO: More description & test to make sure subscripting by attributes even\n * works for webgl\n *\n * @see {@link Layout}\n */\nLayout.MATERIAL_INDEX = new Attribute("materialIndex", 1, TYPES.SHORT);\nLayout.MATERIAL_ENABLED = new Attribute("materialEnabled", 1, TYPES.UNSIGNED_SHORT);\nLayout.AMBIENT = new Attribute("ambient", 3, TYPES.FLOAT);\nLayout.DIFFUSE = new Attribute("diffuse", 3, TYPES.FLOAT);\nLayout.SPECULAR = new Attribute("specular", 3, TYPES.FLOAT);\nLayout.SPECULAR_EXPONENT = new Attribute("specularExponent", 3, TYPES.FLOAT);\nLayout.EMISSIVE = new Attribute("emissive", 3, TYPES.FLOAT);\nLayout.TRANSMISSION_FILTER = new Attribute("transmissionFilter", 3, TYPES.FLOAT);\nLayout.DISSOLVE = new Attribute("dissolve", 1, TYPES.FLOAT);\nLayout.ILLUMINATION = new Attribute("illumination", 1, TYPES.UNSIGNED_SHORT);\nLayout.REFRACTION_INDEX = new Attribute("refractionIndex", 1, TYPES.FLOAT);\nLayout.SHARPNESS = new Attribute("sharpness", 1, TYPES.FLOAT);\nLayout.MAP_DIFFUSE = new Attribute("mapDiffuse", 1, TYPES.SHORT);\nLayout.MAP_AMBIENT = new Attribute("mapAmbient", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR = new Attribute("mapSpecular", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR_EXPONENT = new Attribute("mapSpecularExponent", 1, TYPES.SHORT);\nLayout.MAP_DISSOLVE = new Attribute("mapDissolve", 1, TYPES.SHORT);\nLayout.ANTI_ALIASING = new Attribute("antiAliasing", 1, TYPES.UNSIGNED_SHORT);\nLayout.MAP_BUMP = new Attribute("mapBump", 1, TYPES.SHORT);\nLayout.MAP_DISPLACEMENT = new Attribute("mapDisplacement", 1, TYPES.SHORT);\nLayout.MAP_DECAL = new Attribute("mapDecal", 1, TYPES.SHORT);\nLayout.MAP_EMISSIVE = new Attribute("mapEmissive", 1, TYPES.SHORT);\n\n\n//# sourceURL=webpack:///./src/layout.ts?')},"./src/material.ts":
/*!*************************!*\
  !*** ./src/material.ts ***!
  \*************************/
/*! exports provided: Material, MaterialLibrary */function(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return Material; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return MaterialLibrary; });\n/**\n * The Material class.\n */\nclass Material {\n    constructor(name) {\n        this.name = name;\n        /**\n         * Constructor\n         * @param {String} name the unique name of the material\n         */\n        // The values for the following attibutes\n        // are an array of R, G, B normalized values.\n        // Ka - Ambient Reflectivity\n        this.ambient = [0, 0, 0];\n        // Kd - Defuse Reflectivity\n        this.diffuse = [0, 0, 0];\n        // Ks\n        this.specular = [0, 0, 0];\n        // Ke\n        this.emissive = [0, 0, 0];\n        // Tf\n        this.transmissionFilter = [0, 0, 0];\n        // d\n        this.dissolve = 0;\n        // valid range is between 0 and 1000\n        this.specularExponent = 0;\n        // either d or Tr; valid values are normalized\n        this.transparency = 0;\n        // illum - the enum of the illumination model to use\n        this.illumination = 0;\n        // Ni - Set to "normal" (air).\n        this.refractionIndex = 1;\n        // sharpness\n        this.sharpness = 0;\n        // map_Kd\n        this.mapDiffuse = emptyTextureOptions();\n        // map_Ka\n        this.mapAmbient = emptyTextureOptions();\n        // map_Ks\n        this.mapSpecular = emptyTextureOptions();\n        // map_Ns\n        this.mapSpecularExponent = emptyTextureOptions();\n        // map_d\n        this.mapDissolve = emptyTextureOptions();\n        // map_aat\n        this.antiAliasing = false;\n        // map_bump or bump\n        this.mapBump = emptyTextureOptions();\n        // disp\n        this.mapDisplacement = emptyTextureOptions();\n        // decal\n        this.mapDecal = emptyTextureOptions();\n        // map_Ke\n        this.mapEmissive = emptyTextureOptions();\n        // refl - when the reflection type is a cube, there will be multiple refl\n        //        statements for each side of the cube. If it\'s a spherical\n        //        reflection, there should only ever be one.\n        this.mapReflections = [];\n    }\n}\nconst SENTINEL_MATERIAL = new Material("sentinel");\n/**\n * https://en.wikipedia.org/wiki/Wavefront_.obj_file\n * http://paulbourke.net/dataformats/mtl/\n */\nclass MaterialLibrary {\n    constructor(data) {\n        this.data = data;\n        /**\n         * Constructs the Material Parser\n         * @param mtlData the MTL file contents\n         */\n        this.currentMaterial = SENTINEL_MATERIAL;\n        this.materials = {};\n        this.parse();\n    }\n    /* eslint-disable camelcase */\n    /* the function names here disobey camelCase conventions\n     to make parsing/routing easier. see the parse function\n     documentation for more information. */\n    /**\n     * Creates a new Material object and adds to the registry.\n     * @param tokens the tokens associated with the directive\n     */\n    parse_newmtl(tokens) {\n        const name = tokens[0];\n        // console.info(\'Parsing new Material:\', name);\n        this.currentMaterial = new Material(name);\n        this.materials[name] = this.currentMaterial;\n    }\n    /**\n     * See the documenation for parse_Ka below for a better understanding.\n     *\n     * Given a list of possible color tokens, returns an array of R, G, and B\n     * color values.\n     *\n     * @param tokens the tokens associated with the directive\n     * @return {*} a 3 element array containing the R, G, and B values\n     * of the color.\n     */\n    parseColor(tokens) {\n        if (tokens[0] == "spectral") {\n            throw new Error("The MTL parser does not support spectral curve files. You will " +\n                "need to convert the MTL colors to either RGB or CIEXYZ.");\n        }\n        if (tokens[0] == "xyz") {\n            throw new Error("The MTL parser does not currently support XYZ colors. Either convert the " +\n                "XYZ values to RGB or create an issue to add support for XYZ");\n        }\n        // from my understanding of the spec, RGB values at this point\n        // will either be 3 floats or exactly 1 float, so that\'s the check\n        // that i\'m going to perform here\n        if (tokens.length == 3) {\n            const [x, y, z] = tokens;\n            return [parseFloat(x), parseFloat(y), parseFloat(z)];\n        }\n        // Since tokens at this point has a length of 3, we\'re going to assume\n        // it\'s exactly 1, skipping the check for 2.\n        const value = parseFloat(tokens[0]);\n        // in this case, all values are equivalent\n        return [value, value, value];\n    }\n    /**\n     * Parse the ambient reflectivity\n     *\n     * A Ka directive can take one of three forms:\n     *   - Ka r g b\n     *   - Ka spectral file.rfl\n     *   - Ka xyz x y z\n     * These three forms are mutually exclusive in that only one\n     * declaration can exist per material. It is considered a syntax\n     * error otherwise.\n     *\n     * The "Ka" form specifies the ambient reflectivity using RGB values.\n     * The "g" and "b" values are optional. If only the "r" value is\n     * specified, then the "g" and "b" values are assigned the value of\n     * "r". Values are normally in the range 0.0 to 1.0. Values outside\n     * of this range increase or decrease the reflectivity accordingly.\n     *\n     * The "Ka spectral" form specifies the ambient reflectivity using a\n     * spectral curve. "file.rfl" is the name of the ".rfl" file containing\n     * the curve data. "factor" is an optional argument which is a multiplier\n     * for the values in the .rfl file and defaults to 1.0 if not specified.\n     *\n     * The "Ka xyz" form specifies the ambient reflectivity using CIEXYZ values.\n     * "x y z" are the values of the CIEXYZ color space. The "y" and "z" arguments\n     * are optional and take on the value of the "x" component if only "x" is\n     * specified. The "x y z" values are normally in the range of 0.0 to 1.0 and\n     * increase or decrease ambient reflectivity accordingly outside of that\n     * range.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ka(tokens) {\n        this.currentMaterial.ambient = this.parseColor(tokens);\n    }\n    /**\n     * Diffuse Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ka" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Kd(tokens) {\n        this.currentMaterial.diffuse = this.parseColor(tokens);\n    }\n    /**\n     * Spectral Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ks(tokens) {\n        this.currentMaterial.specular = this.parseColor(tokens);\n    }\n    /**\n     * Emissive\n     *\n     * The amount and color of light emitted by the object.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ke(tokens) {\n        this.currentMaterial.emissive = this.parseColor(tokens);\n    }\n    /**\n     * Transmission Filter\n     *\n     * Any light passing through the object is filtered by the transmission\n     * filter, which only allows specific colors to pass through. For example, Tf\n     * 0 1 0 allows all of the green to pass through and filters out all of the\n     * red and blue.\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Tf" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Tf(tokens) {\n        this.currentMaterial.transmissionFilter = this.parseColor(tokens);\n    }\n    /**\n     * Specifies the dissolve for the current material.\n     *\n     * Statement: d [-halo] `factor`\n     *\n     * Example: "d 0.5"\n     *\n     * The factor is the amount this material dissolves into the background. A\n     * factor of 1.0 is fully opaque. This is the default when a new material is\n     * created. A factor of 0.0 is fully dissolved (completely transparent).\n     *\n     * Unlike a real transparent material, the dissolve does not depend upon\n     * material thickness nor does it have any spectral character. Dissolve works\n     * on all illumination models.\n     *\n     * The dissolve statement allows for an optional "-halo" flag which indicates\n     * that a dissolve is dependent on the surface orientation relative to the\n     * viewer. For example, a sphere with the following dissolve, "d -halo 0.0",\n     * will be fully dissolved at its center and will appear gradually more opaque\n     * toward its edge.\n     *\n     * "factor" is the minimum amount of dissolve applied to the material. The\n     * amount of dissolve will vary between 1.0 (fully opaque) and the specified\n     * "factor". The formula is:\n     *\n     *    dissolve = 1.0 - (N*v)(1.0-factor)\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_d(tokens) {\n        // this ignores the -halo option as I can\'t find any documentation on what\n        // it\'s supposed to be.\n        this.currentMaterial.dissolve = parseFloat(tokens.pop() || "0");\n    }\n    /**\n     * The "illum" statement specifies the illumination model to use in the\n     * material. Illumination models are mathematical equations that represent\n     * various material lighting and shading effects.\n     *\n     * The illumination number can be a number from 0 to 10. The following are\n     * the list of illumination enumerations and their summaries:\n     * 0. Color on and Ambient off\n     * 1. Color on and Ambient on\n     * 2. Highlight on\n     * 3. Reflection on and Ray trace on\n     * 4. Transparency: Glass on, Reflection: Ray trace on\n     * 5. Reflection: Fresnel on and Ray trace on\n     * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on\n     * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on\n     * 8. Reflection on and Ray trace off\n     * 9. Transparency: Glass on, Reflection: Ray trace off\n     * 10. Casts shadows onto invisible surfaces\n     *\n     * Example: "illum 2" to specify the "Highlight on" model\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_illum(tokens) {\n        this.currentMaterial.illumination = parseInt(tokens[0]);\n    }\n    /**\n     * Optical Density (AKA Index of Refraction)\n     *\n     * Statement: Ni `index`\n     *\n     * Example: Ni 1.0\n     *\n     * Specifies the optical density for the surface. `index` is the value\n     * for the optical density. The values can range from 0.001 to 10.  A value of\n     * 1.0 means that light does not bend as it passes through an object.\n     * Increasing the optical_density increases the amount of bending. Glass has\n     * an index of refraction of about 1.5. Values of less than 1.0 produce\n     * bizarre results and are not recommended\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ni(tokens) {\n        this.currentMaterial.refractionIndex = parseFloat(tokens[0]);\n    }\n    /**\n     * Specifies the specular exponent for the current material. This defines the\n     * focus of the specular highlight.\n     *\n     * Statement: Ns `exponent`\n     *\n     * Example: "Ns 250"\n     *\n     * `exponent` is the value for the specular exponent. A high exponent results\n     * in a tight, concentrated highlight. Ns Values normally range from 0 to\n     * 1000.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ns(tokens) {\n        this.currentMaterial.specularExponent = parseInt(tokens[0]);\n    }\n    /**\n     * Specifies the sharpness of the reflections from the local reflection map.\n     *\n     * Statement: sharpness `value`\n     *\n     * Example: "sharpness 100"\n     *\n     * If a material does not have a local reflection map defined in its material\n     * defintions, sharpness will apply to the global reflection map defined in\n     * PreView.\n     *\n     * `value` can be a number from 0 to 1000. The default is 60. A high value\n     * results in a clear reflection of objects in the reflection map.\n     *\n     * Tip: sharpness values greater than 100 introduce aliasing effects in\n     * flat surfaces that are viewed at a sharp angle.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_sharpness(tokens) {\n        this.currentMaterial.sharpness = parseInt(tokens[0]);\n    }\n    /**\n     * Parses the -cc flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -cc flag\n     * @param options the Object of all image options\n     */\n    parse_cc(values, options) {\n        options.colorCorrection = values[0] == "on";\n    }\n    /**\n     * Parses the -blendu flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendu flag\n     * @param options the Object of all image options\n     */\n    parse_blendu(values, options) {\n        options.horizontalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -blendv flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendv flag\n     * @param options the Object of all image options\n     */\n    parse_blendv(values, options) {\n        options.verticalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -boost flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -boost flag\n     * @param options the Object of all image options\n     */\n    parse_boost(values, options) {\n        options.boostMipMapSharpness = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -mm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -mm flag\n     * @param options the Object of all image options\n     */\n    parse_mm(values, options) {\n        options.modifyTextureMap.brightness = parseFloat(values[0]);\n        options.modifyTextureMap.contrast = parseFloat(values[1]);\n    }\n    /**\n     * Parses and sets the -o, -s, and -t  u, v, and w values\n     *\n     * @param values the values passed to the -o, -s, -t flag\n     * @param {Object} option the Object of either the -o, -s, -t option\n     * @param {Integer} defaultValue the Object of all image options\n     */\n    parse_ost(values, option, defaultValue) {\n        while (values.length < 3) {\n            values.push(defaultValue.toString());\n        }\n        option.u = parseFloat(values[0]);\n        option.v = parseFloat(values[1]);\n        option.w = parseFloat(values[2]);\n    }\n    /**\n     * Parses the -o flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -o flag\n     * @param options the Object of all image options\n     */\n    parse_o(values, options) {\n        this.parse_ost(values, options.offset, 0);\n    }\n    /**\n     * Parses the -s flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -s flag\n     * @param options the Object of all image options\n     */\n    parse_s(values, options) {\n        this.parse_ost(values, options.scale, 1);\n    }\n    /**\n     * Parses the -t flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -t flag\n     * @param options the Object of all image options\n     */\n    parse_t(values, options) {\n        this.parse_ost(values, options.turbulence, 0);\n    }\n    /**\n     * Parses the -texres flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -texres flag\n     * @param options the Object of all image options\n     */\n    parse_texres(values, options) {\n        options.textureResolution = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -clamp flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -clamp flag\n     * @param options the Object of all image options\n     */\n    parse_clamp(values, options) {\n        options.clamp = values[0] == "on";\n    }\n    /**\n     * Parses the -bm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -bm flag\n     * @param options the Object of all image options\n     */\n    parse_bm(values, options) {\n        options.bumpMultiplier = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -imfchan flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -imfchan flag\n     * @param options the Object of all image options\n     */\n    parse_imfchan(values, options) {\n        options.imfChan = values[0];\n    }\n    /**\n     * This only exists for relection maps and denotes the type of reflection.\n     *\n     * @param values the values passed to the -type flag\n     * @param options the Object of all image options\n     */\n    parse_type(values, options) {\n        options.reflectionType = values[0];\n    }\n    /**\n     * Parses the texture\'s options and returns an options object with the info\n     *\n     * @param tokens all of the option tokens to pass to the texture\n     * @return {Object} a complete object of objects to apply to the texture\n     */\n    parseOptions(tokens) {\n        const options = emptyTextureOptions();\n        let option;\n        let values;\n        const optionsToValues = {};\n        tokens.reverse();\n        while (tokens.length) {\n            // token is guaranteed to exists here, hence the explicit "as"\n            const token = tokens.pop();\n            if (token.startsWith("-")) {\n                option = token.substr(1);\n                optionsToValues[option] = [];\n            }\n            else if (option) {\n                optionsToValues[option].push(token);\n            }\n        }\n        for (option in optionsToValues) {\n            if (!optionsToValues.hasOwnProperty(option)) {\n                continue;\n            }\n            values = optionsToValues[option];\n            const optionMethod = this[`parse_${option}`];\n            if (optionMethod) {\n                optionMethod.bind(this)(values, options);\n            }\n        }\n        return options;\n    }\n    /**\n     * Parses the given texture map line.\n     *\n     * @param tokens all of the tokens representing the texture\n     * @return a complete object of objects to apply to the texture\n     */\n    parseMap(tokens) {\n        // according to wikipedia:\n        // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)\n        // there is at least one vendor that places the filename before the options\n        // rather than after (which is to spec). All options start with a \'-\'\n        // so if the first token doesn\'t start with a \'-\', we\'re going to assume\n        // it\'s the name of the map file.\n        let optionsString;\n        let filename = "";\n        if (!tokens[0].startsWith("-")) {\n            [filename, ...optionsString] = tokens;\n        }\n        else {\n            filename = tokens.pop();\n            optionsString = tokens;\n        }\n        const options = this.parseOptions(optionsString);\n        options.filename = filename.replace(/\\\\/g, "/");\n        return options;\n    }\n    /**\n     * Parses the ambient map.\n     *\n     * @param tokens list of tokens for the map_Ka direcive\n     */\n    parse_map_Ka(tokens) {\n        this.currentMaterial.mapAmbient = this.parseMap(tokens);\n    }\n    /**\n     * Parses the diffuse map.\n     *\n     * @param tokens list of tokens for the map_Kd direcive\n     */\n    parse_map_Kd(tokens) {\n        this.currentMaterial.mapDiffuse = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular map.\n     *\n     * @param tokens list of tokens for the map_Ks direcive\n     */\n    parse_map_Ks(tokens) {\n        this.currentMaterial.mapSpecular = this.parseMap(tokens);\n    }\n    /**\n     * Parses the emissive map.\n     *\n     * @param tokens list of tokens for the map_Ke direcive\n     */\n    parse_map_Ke(tokens) {\n        this.currentMaterial.mapEmissive = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular exponent map.\n     *\n     * @param tokens list of tokens for the map_Ns direcive\n     */\n    parse_map_Ns(tokens) {\n        this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);\n    }\n    /**\n     * Parses the dissolve map.\n     *\n     * @param tokens list of tokens for the map_d direcive\n     */\n    parse_map_d(tokens) {\n        this.currentMaterial.mapDissolve = this.parseMap(tokens);\n    }\n    /**\n     * Parses the anti-aliasing option.\n     *\n     * @param tokens list of tokens for the map_aat direcive\n     */\n    parse_map_aat(tokens) {\n        this.currentMaterial.antiAliasing = tokens[0] == "on";\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the map_bump direcive\n     */\n    parse_map_bump(tokens) {\n        this.currentMaterial.mapBump = this.parseMap(tokens);\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the bump direcive\n     */\n    parse_bump(tokens) {\n        this.parse_map_bump(tokens);\n    }\n    /**\n     * Parses the disp map.\n     *\n     * @param tokens list of tokens for the disp direcive\n     */\n    parse_disp(tokens) {\n        this.currentMaterial.mapDisplacement = this.parseMap(tokens);\n    }\n    /**\n     * Parses the decal map.\n     *\n     * @param tokens list of tokens for the map_decal direcive\n     */\n    parse_decal(tokens) {\n        this.currentMaterial.mapDecal = this.parseMap(tokens);\n    }\n    /**\n     * Parses the refl map.\n     *\n     * @param tokens list of tokens for the refl direcive\n     */\n    parse_refl(tokens) {\n        this.currentMaterial.mapReflections.push(this.parseMap(tokens));\n    }\n    /**\n     * Parses the MTL file.\n     *\n     * Iterates line by line parsing each MTL directive.\n     *\n     * This function expects the first token in the line\n     * to be a valid MTL directive. That token is then used\n     * to try and run a method on this class. parse_[directive]\n     * E.g., the `newmtl` directive would try to call the method\n     * parse_newmtl. Each parsing function takes in the remaining\n     * list of tokens and updates the currentMaterial class with\n     * the attributes provided.\n     */\n    parse() {\n        const lines = this.data.split(/\\r?\\n/);\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const [directive, ...tokens] = line.split(/\\s/);\n            const parseMethod = this[`parse_${directive}`];\n            if (!parseMethod) {\n                console.warn(`Don\'t know how to parse the directive: "${directive}"`);\n                continue;\n            }\n            // console.log(`Parsing "${directive}" with tokens: ${tokens}`);\n            parseMethod.bind(this)(tokens);\n        }\n        // some cleanup. These don\'t need to be exposed as public data.\n        delete this.data;\n        this.currentMaterial = SENTINEL_MATERIAL;\n    }\n}\nfunction emptyTextureOptions() {\n    return {\n        colorCorrection: false,\n        horizontalBlending: true,\n        verticalBlending: true,\n        boostMipMapSharpness: 0,\n        modifyTextureMap: {\n            brightness: 0,\n            contrast: 1,\n        },\n        offset: { u: 0, v: 0, w: 0 },\n        scale: { u: 1, v: 1, w: 1 },\n        turbulence: { u: 0, v: 0, w: 0 },\n        clamp: false,\n        textureResolution: null,\n        bumpMultiplier: 1,\n        imfChan: null,\n        filename: "",\n    };\n}\n\n\n//# sourceURL=webpack:///./src/material.ts?')},"./src/mesh.ts":
/*!*********************!*\
  !*** ./src/mesh.ts ***!
  \*********************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Mesh; });\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n\n/**\n * The main Mesh class. The constructor will parse through the OBJ file data\n * and collect the vertex, vertex normal, texture, and face information. This\n * information can then be used later on when creating your VBOs. See\n * OBJ.initMeshBuffers for an example of how to use the newly created Mesh\n */\nclass Mesh {\n    /**\n     * Create a Mesh\n     * @param {String} objectData - a string representation of an OBJ file with\n     *     newlines preserved.\n     * @param {Object} options - a JS object containing valid options. See class\n     *     documentation for options.\n     * @param {bool} options.enableWTextureCoord - Texture coordinates can have\n     *     an optional "w" coordinate after the u and v coordinates. This extra\n     *     value can be used in order to perform fancy transformations on the\n     *     textures themselves. Default is to truncate to only the u an v\n     *     coordinates. Passing true will provide a default value of 0 in the\n     *     event that any or all texture coordinates don\'t provide a w value.\n     *     Always use the textureStride attribute in order to determine the\n     *     stride length of the texture coordinates when rendering the element\n     *     array.\n     * @param {bool} options.calcTangentsAndBitangents - Calculate the tangents\n     *     and bitangents when loading of the OBJ is completed. This adds two new\n     *     attributes to the Mesh instance: `tangents` and `bitangents`.\n     */\n    constructor(objectData, options) {\n        this.name = "";\n        this.indicesPerMaterial = [];\n        this.materialsByIndex = {};\n        this.tangents = [];\n        this.bitangents = [];\n        options = options || {};\n        options.materials = options.materials || {};\n        options.enableWTextureCoord = !!options.enableWTextureCoord;\n        // the list of unique vertex, normal, texture, attributes\n        this.vertexNormals = [];\n        this.textures = [];\n        // the indicies to draw the faces\n        this.indices = [];\n        this.textureStride = options.enableWTextureCoord ? 3 : 2;\n        /*\n        The OBJ file format does a sort of compression when saving a model in a\n        program like Blender. There are at least 3 sections (4 including textures)\n        within the file. Each line in a section begins with the same string:\n          * \'v\': indicates vertex section\n          * \'vn\': indicates vertex normal section\n          * \'f\': indicates the faces section\n          * \'vt\': indicates vertex texture section (if textures were used on the model)\n        Each of the above sections (except for the faces section) is a list/set of\n        unique vertices.\n\n        Each line of the faces section contains a list of\n        (vertex, [texture], normal) groups.\n\n        **Note:** The following documentation will use a capital "V" Vertex to\n        denote the above (vertex, [texture], normal) groups whereas a lowercase\n        "v" vertex is used to denote an X, Y, Z coordinate.\n\n        Some examples:\n            // the texture index is optional, both formats are possible for models\n            // without a texture applied\n            f 1/25 18/46 12/31\n            f 1//25 18//46 12//31\n\n            // A 3 vertex face with texture indices\n            f 16/92/11 14/101/22 1/69/1\n\n            // A 4 vertex face\n            f 16/92/11 40/109/40 38/114/38 14/101/22\n\n        The first two lines are examples of a 3 vertex face without a texture applied.\n        The second is an example of a 3 vertex face with a texture applied.\n        The third is an example of a 4 vertex face. Note: a face can contain N\n        number of vertices.\n\n        Each number that appears in one of the groups is a 1-based index\n        corresponding to an item from the other sections (meaning that indexing\n        starts at one and *not* zero).\n\n        For example:\n            `f 16/92/11` is saying to\n              - take the 16th element from the [v] vertex array\n              - take the 92nd element from the [vt] texture array\n              - take the 11th element from the [vn] normal array\n            and together they make a unique vertex.\n        Using all 3+ unique Vertices from the face line will produce a polygon.\n\n        Now, you could just go through the OBJ file and create a new vertex for\n        each face line and WebGL will draw what appears to be the same model.\n        However, vertices will be overlapped and duplicated all over the place.\n\n        Consider a cube in 3D space centered about the origin and each side is\n        2 units long. The front face (with the positive Z-axis pointing towards\n        you) would have a Top Right vertex (looking orthogonal to its normal)\n        mapped at (1,1,1) The right face would have a Top Left vertex (looking\n        orthogonal to its normal) at (1,1,1) and the top face would have a Bottom\n        Right vertex (looking orthogonal to its normal) at (1,1,1). Each face\n        has a vertex at the same coordinates, however, three distinct vertices\n        will be drawn at the same spot.\n\n        To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`\n        groups), while iterating through the face lines, when a group is encountered\n        the whole group string (\'16/92/11\') is checked to see if it exists in the\n        packed.hashindices object, and if it doesn\'t, the indices it specifies\n        are used to look up each attribute in the corresponding attribute arrays\n        already created. The values are then copied to the corresponding unpacked\n        array (flattened to play nice with WebGL\'s ELEMENT_ARRAY_BUFFER indexing),\n        the group string is added to the hashindices set and the current unpacked\n        index is used as this hashindices value so that the group of elements can\n        be reused. The unpacked index is incremented. If the group string already\n        exists in the hashindices object, its corresponding value is the index of\n        that group and is appended to the unpacked indices array.\n       */\n        const verts = [];\n        const vertNormals = [];\n        const textures = [];\n        const materialNamesByIndex = [];\n        const materialIndicesByName = {};\n        // keep track of what material we\'ve seen last\n        let currentMaterialIndex = -1;\n        let currentObjectByMaterialIndex = 0;\n        // unpacking stuff\n        const unpacked = {\n            verts: [],\n            norms: [],\n            textures: [],\n            hashindices: {},\n            indices: [[]],\n            materialIndices: [],\n            index: 0,\n        };\n        const VERTEX_RE = /^v\\s/;\n        const NORMAL_RE = /^vn\\s/;\n        const TEXTURE_RE = /^vt\\s/;\n        const FACE_RE = /^f\\s/;\n        const WHITESPACE_RE = /\\s+/;\n        const USE_MATERIAL_RE = /^usemtl/;\n        // array of lines separated by the newline\n        const lines = objectData.split("\\n");\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const elements = line.split(WHITESPACE_RE);\n            elements.shift();\n            if (VERTEX_RE.test(line)) {\n                // if this is a vertex\n                verts.push(...elements);\n            }\n            else if (NORMAL_RE.test(line)) {\n                // if this is a vertex normal\n                vertNormals.push(...elements);\n            }\n            else if (TEXTURE_RE.test(line)) {\n                let coords = elements;\n                // by default, the loader will only look at the U and V\n                // coordinates of the vt declaration. So, this truncates the\n                // elements to only those 2 values. If W texture coordinate\n                // support is enabled, then the texture coordinate is\n                // expected to have three values in it.\n                if (elements.length > 2 && !options.enableWTextureCoord) {\n                    coords = elements.slice(0, 2);\n                }\n                else if (elements.length === 2 && options.enableWTextureCoord) {\n                    // If for some reason W texture coordinate support is enabled\n                    // and only the U and V coordinates are given, then we supply\n                    // the default value of 0 so that the stride length is correct\n                    // when the textures are unpacked below.\n                    coords.push("0");\n                }\n                textures.push(...coords);\n            }\n            else if (USE_MATERIAL_RE.test(line)) {\n                const materialName = elements[0];\n                // check to see if we\'ve ever seen it before\n                if (!(materialName in materialIndicesByName)) {\n                    // new material we\'ve never seen\n                    materialNamesByIndex.push(materialName);\n                    materialIndicesByName[materialName] = materialNamesByIndex.length - 1;\n                    // push new array into indices\n                    // already contains an array at index zero, don\'t add\n                    if (materialIndicesByName[materialName] > 0) {\n                        unpacked.indices.push([]);\n                    }\n                }\n                // keep track of the current material index\n                currentMaterialIndex = materialIndicesByName[materialName];\n                // update current index array\n                currentObjectByMaterialIndex = currentMaterialIndex;\n            }\n            else if (FACE_RE.test(line)) {\n                // if this is a face\n                /*\n                split this face into an array of Vertex groups\n                for example:\n                   f 16/92/11 14/101/22 1/69/1\n                becomes:\n                  [\'16/92/11\', \'14/101/22\', \'1/69/1\'];\n                */\n                const triangles = triangulate(elements);\n                for (const triangle of triangles) {\n                    for (let j = 0, eleLen = triangle.length; j < eleLen; j++) {\n                        const hash = triangle[j] + "," + currentMaterialIndex;\n                        if (hash in unpacked.hashindices) {\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                        }\n                        else {\n                            /*\n                        Each element of the face line array is a Vertex which has its\n                        attributes delimited by a forward slash. This will separate\n                        each attribute into another array:\n                            \'19/92/11\'\n                        becomes:\n                            Vertex = [\'19\', \'92\', \'11\'];\n                        where\n                            Vertex[0] is the vertex index\n                            Vertex[1] is the texture index\n                            Vertex[2] is the normal index\n                         Think of faces having Vertices which are comprised of the\n                         attributes location (v), texture (vt), and normal (vn).\n                         */\n                            const vertex = triangle[j].split("/");\n                            // it\'s possible for faces to only specify the vertex\n                            // and the normal. In this case, vertex will only have\n                            // a length of 2 and not 3 and the normal will be the\n                            // second item in the list with an index of 1.\n                            const normalIndex = vertex.length - 1;\n                            /*\n                         The verts, textures, and vertNormals arrays each contain a\n                         flattend array of coordinates.\n\n                         Because it gets confusing by referring to Vertex and then\n                         vertex (both are different in my descriptions) I will explain\n                         what\'s going on using the vertexNormals array:\n\n                         vertex[2] will contain the one-based index of the vertexNormals\n                         section (vn). One is subtracted from this index number to play\n                         nice with javascript\'s zero-based array indexing.\n\n                         Because vertexNormal is a flattened array of x, y, z values,\n                         simple pointer arithmetic is used to skip to the start of the\n                         vertexNormal, then the offset is added to get the correct\n                         component: +0 is x, +1 is y, +2 is z.\n\n                         This same process is repeated for verts and textures.\n                         */\n                            // Vertex position\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 0]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 1]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 2]);\n                            // Vertex textures\n                            if (textures.length) {\n                                const stride = options.enableWTextureCoord ? 3 : 2;\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 0]);\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 1]);\n                                if (options.enableWTextureCoord) {\n                                    unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 2]);\n                                }\n                            }\n                            // Vertex normals\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 0]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 1]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 2]);\n                            // Vertex material indices\n                            unpacked.materialIndices.push(currentMaterialIndex);\n                            // add the newly created Vertex to the list of indices\n                            unpacked.hashindices[hash] = unpacked.index;\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                            // increment the counter\n                            unpacked.index += 1;\n                        }\n                    }\n                }\n            }\n        }\n        this.vertices = unpacked.verts;\n        this.vertexNormals = unpacked.norms;\n        this.textures = unpacked.textures;\n        this.vertexMaterialIndices = unpacked.materialIndices;\n        this.indices = unpacked.indices[currentObjectByMaterialIndex];\n        this.indicesPerMaterial = unpacked.indices;\n        this.materialNames = materialNamesByIndex;\n        this.materialIndices = materialIndicesByName;\n        this.materialsByIndex = {};\n        if (options.calcTangentsAndBitangents) {\n            this.calculateTangentsAndBitangents();\n        }\n    }\n    /**\n     * Calculates the tangents and bitangents of the mesh that forms an orthogonal basis together with the\n     * normal in the direction of the texture coordinates. These are useful for setting up the TBN matrix\n     * when distorting the normals through normal maps.\n     * Method derived from: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/\n     *\n     * This method requires the normals and texture coordinates to be parsed and set up correctly.\n     * Adds the tangents and bitangents as members of the class instance.\n     */\n    calculateTangentsAndBitangents() {\n        console.assert(!!(this.vertices &&\n            this.vertices.length &&\n            this.vertexNormals &&\n            this.vertexNormals.length &&\n            this.textures &&\n            this.textures.length), "Missing attributes for calculating tangents and bitangents");\n        const unpacked = {\n            tangents: [...new Array(this.vertices.length)].map(_ => 0),\n            bitangents: [...new Array(this.vertices.length)].map(_ => 0),\n        };\n        // Loop through all faces in the whole mesh\n        const indices = this.indices;\n        const vertices = this.vertices;\n        const normals = this.vertexNormals;\n        const uvs = this.textures;\n        for (let i = 0; i < indices.length; i += 3) {\n            const i0 = indices[i + 0];\n            const i1 = indices[i + 1];\n            const i2 = indices[i + 2];\n            const x_v0 = vertices[i0 * 3 + 0];\n            const y_v0 = vertices[i0 * 3 + 1];\n            const z_v0 = vertices[i0 * 3 + 2];\n            const x_uv0 = uvs[i0 * 2 + 0];\n            const y_uv0 = uvs[i0 * 2 + 1];\n            const x_v1 = vertices[i1 * 3 + 0];\n            const y_v1 = vertices[i1 * 3 + 1];\n            const z_v1 = vertices[i1 * 3 + 2];\n            const x_uv1 = uvs[i1 * 2 + 0];\n            const y_uv1 = uvs[i1 * 2 + 1];\n            const x_v2 = vertices[i2 * 3 + 0];\n            const y_v2 = vertices[i2 * 3 + 1];\n            const z_v2 = vertices[i2 * 3 + 2];\n            const x_uv2 = uvs[i2 * 2 + 0];\n            const y_uv2 = uvs[i2 * 2 + 1];\n            const x_deltaPos1 = x_v1 - x_v0;\n            const y_deltaPos1 = y_v1 - y_v0;\n            const z_deltaPos1 = z_v1 - z_v0;\n            const x_deltaPos2 = x_v2 - x_v0;\n            const y_deltaPos2 = y_v2 - y_v0;\n            const z_deltaPos2 = z_v2 - z_v0;\n            const x_uvDeltaPos1 = x_uv1 - x_uv0;\n            const y_uvDeltaPos1 = y_uv1 - y_uv0;\n            const x_uvDeltaPos2 = x_uv2 - x_uv0;\n            const y_uvDeltaPos2 = y_uv2 - y_uv0;\n            const rInv = x_uvDeltaPos1 * y_uvDeltaPos2 - y_uvDeltaPos1 * x_uvDeltaPos2;\n            const r = 1.0 / Math.abs(rInv < 0.0001 ? 1.0 : rInv);\n            // Tangent\n            const x_tangent = (x_deltaPos1 * y_uvDeltaPos2 - x_deltaPos2 * y_uvDeltaPos1) * r;\n            const y_tangent = (y_deltaPos1 * y_uvDeltaPos2 - y_deltaPos2 * y_uvDeltaPos1) * r;\n            const z_tangent = (z_deltaPos1 * y_uvDeltaPos2 - z_deltaPos2 * y_uvDeltaPos1) * r;\n            // Bitangent\n            const x_bitangent = (x_deltaPos2 * x_uvDeltaPos1 - x_deltaPos1 * x_uvDeltaPos2) * r;\n            const y_bitangent = (y_deltaPos2 * x_uvDeltaPos1 - y_deltaPos1 * x_uvDeltaPos2) * r;\n            const z_bitangent = (z_deltaPos2 * x_uvDeltaPos1 - z_deltaPos1 * x_uvDeltaPos2) * r;\n            // Gram-Schmidt orthogonalize\n            //t = glm::normalize(t - n * glm:: dot(n, t));\n            const x_n0 = normals[i0 * 3 + 0];\n            const y_n0 = normals[i0 * 3 + 1];\n            const z_n0 = normals[i0 * 3 + 2];\n            const x_n1 = normals[i1 * 3 + 0];\n            const y_n1 = normals[i1 * 3 + 1];\n            const z_n1 = normals[i1 * 3 + 2];\n            const x_n2 = normals[i2 * 3 + 0];\n            const y_n2 = normals[i2 * 3 + 1];\n            const z_n2 = normals[i2 * 3 + 2];\n            // Tangent\n            const n0_dot_t = x_tangent * x_n0 + y_tangent * y_n0 + z_tangent * z_n0;\n            const n1_dot_t = x_tangent * x_n1 + y_tangent * y_n1 + z_tangent * z_n1;\n            const n2_dot_t = x_tangent * x_n2 + y_tangent * y_n2 + z_tangent * z_n2;\n            const x_resTangent0 = x_tangent - x_n0 * n0_dot_t;\n            const y_resTangent0 = y_tangent - y_n0 * n0_dot_t;\n            const z_resTangent0 = z_tangent - z_n0 * n0_dot_t;\n            const x_resTangent1 = x_tangent - x_n1 * n1_dot_t;\n            const y_resTangent1 = y_tangent - y_n1 * n1_dot_t;\n            const z_resTangent1 = z_tangent - z_n1 * n1_dot_t;\n            const x_resTangent2 = x_tangent - x_n2 * n2_dot_t;\n            const y_resTangent2 = y_tangent - y_n2 * n2_dot_t;\n            const z_resTangent2 = z_tangent - z_n2 * n2_dot_t;\n            const magTangent0 = Math.sqrt(x_resTangent0 * x_resTangent0 + y_resTangent0 * y_resTangent0 + z_resTangent0 * z_resTangent0);\n            const magTangent1 = Math.sqrt(x_resTangent1 * x_resTangent1 + y_resTangent1 * y_resTangent1 + z_resTangent1 * z_resTangent1);\n            const magTangent2 = Math.sqrt(x_resTangent2 * x_resTangent2 + y_resTangent2 * y_resTangent2 + z_resTangent2 * z_resTangent2);\n            // Bitangent\n            const n0_dot_bt = x_bitangent * x_n0 + y_bitangent * y_n0 + z_bitangent * z_n0;\n            const n1_dot_bt = x_bitangent * x_n1 + y_bitangent * y_n1 + z_bitangent * z_n1;\n            const n2_dot_bt = x_bitangent * x_n2 + y_bitangent * y_n2 + z_bitangent * z_n2;\n            const x_resBitangent0 = x_bitangent - x_n0 * n0_dot_bt;\n            const y_resBitangent0 = y_bitangent - y_n0 * n0_dot_bt;\n            const z_resBitangent0 = z_bitangent - z_n0 * n0_dot_bt;\n            const x_resBitangent1 = x_bitangent - x_n1 * n1_dot_bt;\n            const y_resBitangent1 = y_bitangent - y_n1 * n1_dot_bt;\n            const z_resBitangent1 = z_bitangent - z_n1 * n1_dot_bt;\n            const x_resBitangent2 = x_bitangent - x_n2 * n2_dot_bt;\n            const y_resBitangent2 = y_bitangent - y_n2 * n2_dot_bt;\n            const z_resBitangent2 = z_bitangent - z_n2 * n2_dot_bt;\n            const magBitangent0 = Math.sqrt(x_resBitangent0 * x_resBitangent0 +\n                y_resBitangent0 * y_resBitangent0 +\n                z_resBitangent0 * z_resBitangent0);\n            const magBitangent1 = Math.sqrt(x_resBitangent1 * x_resBitangent1 +\n                y_resBitangent1 * y_resBitangent1 +\n                z_resBitangent1 * z_resBitangent1);\n            const magBitangent2 = Math.sqrt(x_resBitangent2 * x_resBitangent2 +\n                y_resBitangent2 * y_resBitangent2 +\n                z_resBitangent2 * z_resBitangent2);\n            unpacked.tangents[i0 * 3 + 0] += x_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 1] += y_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 2] += z_resTangent0 / magTangent0;\n            unpacked.tangents[i1 * 3 + 0] += x_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 1] += y_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 2] += z_resTangent1 / magTangent1;\n            unpacked.tangents[i2 * 3 + 0] += x_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 1] += y_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 2] += z_resTangent2 / magTangent2;\n            unpacked.bitangents[i0 * 3 + 0] += x_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 1] += y_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 2] += z_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i1 * 3 + 0] += x_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 1] += y_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 2] += z_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i2 * 3 + 0] += x_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 1] += y_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 2] += z_resBitangent2 / magBitangent2;\n            // TODO: check handedness\n        }\n        this.tangents = unpacked.tangents;\n        this.bitangents = unpacked.bitangents;\n    }\n    /**\n     * @param layout - A {@link Layout} object that describes the\n     * desired memory layout of the generated buffer\n     * @return The packed array in the ... TODO\n     */\n    makeBufferData(layout) {\n        const numItems = this.vertices.length / 3;\n        const buffer = new ArrayBuffer(layout.stride * numItems);\n        buffer.numItems = numItems;\n        const dataView = new DataView(buffer);\n        for (let i = 0, vertexOffset = 0; i < numItems; i++) {\n            vertexOffset = i * layout.stride;\n            // copy in the vertex data in the order and format given by the\n            // layout param\n            for (const attribute of layout.attributes) {\n                const offset = vertexOffset + layout.attributeMap[attribute.key].offset;\n                switch (attribute.key) {\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].POSITION.key:\n                        dataView.setFloat32(offset, this.vertices[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].UV.key:\n                        dataView.setFloat32(offset, this.textures[i * 2], true);\n                        dataView.setFloat32(offset + 4, this.textures[i * 2 + 1], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].NORMAL.key:\n                        dataView.setFloat32(offset, this.vertexNormals[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].MATERIAL_INDEX.key:\n                        dataView.setInt16(offset, this.vertexMaterialIndices[i], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].AMBIENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.ambient[0], true);\n                        dataView.setFloat32(offset + 4, material.ambient[1], true);\n                        dataView.setFloat32(offset + 8, material.ambient[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DIFFUSE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.diffuse[0], true);\n                        dataView.setFloat32(offset + 4, material.diffuse[1], true);\n                        dataView.setFloat32(offset + 8, material.diffuse[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specular[0], true);\n                        dataView.setFloat32(offset + 4, material.specular[1], true);\n                        dataView.setFloat32(offset + 8, material.specular[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR_EXPONENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specularExponent, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].EMISSIVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.emissive[0], true);\n                        dataView.setFloat32(offset + 4, material.emissive[1], true);\n                        dataView.setFloat32(offset + 8, material.emissive[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].TRANSMISSION_FILTER.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.transmissionFilter[0], true);\n                        dataView.setFloat32(offset + 4, material.transmissionFilter[1], true);\n                        dataView.setFloat32(offset + 8, material.transmissionFilter[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DISSOLVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.dissolve, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ILLUMINATION.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.illumination, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].REFRACTION_INDEX.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.refractionIndex, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SHARPNESS.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.sharpness, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ANTI_ALIASING.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.antiAliasing ? 1 : 0, true);\n                        break;\n                    }\n                }\n            }\n        }\n        return buffer;\n    }\n    makeIndexBufferData() {\n        const buffer = new Uint16Array(this.indices);\n        buffer.numItems = this.indices.length;\n        return buffer;\n    }\n    makeIndexBufferDataForMaterials(...materialIndices) {\n        const indices = new Array().concat(...materialIndices.map(mtlIdx => this.indicesPerMaterial[mtlIdx]));\n        const buffer = new Uint16Array(indices);\n        buffer.numItems = indices.length;\n        return buffer;\n    }\n    addMaterialLibrary(mtl) {\n        for (const name in mtl.materials) {\n            if (!(name in this.materialIndices)) {\n                // This material is not referenced by the mesh\n                continue;\n            }\n            const material = mtl.materials[name];\n            // Find the material index for this material\n            const materialIndex = this.materialIndices[material.name];\n            // Put the material into the materialsByIndex object at the right\n            // spot as determined when the obj file was parsed\n            this.materialsByIndex[materialIndex] = material;\n        }\n    }\n}\nfunction* triangulate(elements) {\n    if (elements.length <= 3) {\n        yield elements;\n    }\n    else if (elements.length === 4) {\n        yield [elements[0], elements[1], elements[2]];\n        yield [elements[2], elements[3], elements[0]];\n    }\n    else {\n        for (let i = 1; i < elements.length - 1; i++) {\n            yield [elements[0], elements[i], elements[i + 1]];\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/mesh.ts?')},"./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! exports provided: downloadModels, downloadMeshes, initMeshBuffers, deleteMeshBuffers */function(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return downloadModels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return downloadMeshes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return initMeshBuffers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return deleteMeshBuffers; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n\n\nfunction downloadMtlTextures(mtl, root) {\n    const mapAttributes = [\n        "mapDiffuse",\n        "mapAmbient",\n        "mapSpecular",\n        "mapDissolve",\n        "mapBump",\n        "mapDisplacement",\n        "mapDecal",\n        "mapEmissive",\n    ];\n    if (!root.endsWith("/")) {\n        root += "/";\n    }\n    const textures = [];\n    for (const materialName in mtl.materials) {\n        if (!mtl.materials.hasOwnProperty(materialName)) {\n            continue;\n        }\n        const material = mtl.materials[materialName];\n        for (const attr of mapAttributes) {\n            const mapData = material[attr];\n            if (!mapData || !mapData.filename) {\n                continue;\n            }\n            const url = root + mapData.filename;\n            textures.push(fetch(url)\n                .then(response => {\n                if (!response.ok) {\n                    throw new Error();\n                }\n                return response.blob();\n            })\n                .then(function (data) {\n                const image = new Image();\n                image.src = URL.createObjectURL(data);\n                mapData.texture = image;\n                return new Promise(resolve => (image.onload = resolve));\n            })\n                .catch(() => {\n                console.error(`Unable to download texture: ${url}`);\n            }));\n        }\n    }\n    return Promise.all(textures);\n}\nfunction getMtl(modelOptions) {\n    if (!(typeof modelOptions.mtl === "string")) {\n        return modelOptions.obj.replace(/\\.obj$/, ".mtl");\n    }\n    return modelOptions.mtl;\n}\n/**\n * Accepts a list of model request objects and returns a Promise that\n * resolves when all models have been downloaded and parsed.\n *\n * The list of model objects follow this interface:\n * {\n *  obj: \'path/to/model.obj\',\n *  mtl: true | \'path/to/model.mtl\',\n *  downloadMtlTextures: true | false\n *  mtlTextureRoot: \'/models/suzanne/maps\'\n *  name: \'suzanne\'\n * }\n *\n * The `obj` attribute is required and should be the path to the\n * model\'s .obj file relative to the current repo (absolute URLs are\n * suggested).\n *\n * The `mtl` attribute is optional and can either be a boolean or\n * a path to the model\'s .mtl file relative to the current URL. If\n * the value is `true`, then the path and basename given for the `obj`\n * attribute is used replacing the .obj suffix for .mtl\n * E.g.: {obj: \'models/foo.obj\', mtl: true} would search for \'models/foo.mtl\'\n *\n * The `name` attribute is optional and is a human friendly name to be\n * included with the parsed OBJ and MTL files. If not given, the base .obj\n * filename will be used.\n *\n * The `downloadMtlTextures` attribute is a flag for automatically downloading\n * any images found in the MTL file and attaching them to each Material\n * created from that file. For example, if material.mapDiffuse is set (there\n * was data in the MTL file), then material.mapDiffuse.texture will contain\n * the downloaded image. This option defaults to `true`. By default, the MTL\'s\n * URL will be used to determine the location of the images.\n *\n * The `mtlTextureRoot` attribute is optional and should point to the location\n * on the server that this MTL\'s texture files are located. The default is to\n * use the MTL file\'s location.\n *\n * @returns {Promise} the result of downloading the given list of models. The\n * promise will resolve with an object whose keys are the names of the models\n * and the value is its Mesh object. Each Mesh object will automatically\n * have its addMaterialLibrary() method called to set the given MTL data (if given).\n */\nfunction downloadModels(models) {\n    const finished = [];\n    for (const model of models) {\n        if (!model.obj) {\n            throw new Error(\'"obj" attribute of model object not set. The .obj file is required to be set \' +\n                "in order to use downloadModels()");\n        }\n        const options = {\n            indicesPerMaterial: !!model.indicesPerMaterial,\n            calcTangentsAndBitangents: !!model.calcTangentsAndBitangents,\n        };\n        // if the name is not provided, dervive it from the given OBJ\n        let name = model.name;\n        if (!name) {\n            const parts = model.obj.split("/");\n            name = parts[parts.length - 1].replace(".obj", "");\n        }\n        const namePromise = Promise.resolve(name);\n        const meshPromise = fetch(model.obj)\n            .then(response => response.text())\n            .then(data => {\n            return new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data, options);\n        });\n        let mtlPromise;\n        // Download MaterialLibrary file?\n        if (model.mtl) {\n            const mtl = getMtl(model);\n            mtlPromise = fetch(mtl)\n                .then(response => response.text())\n                .then((data) => {\n                const material = new _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"](data);\n                if (model.downloadMtlTextures !== false) {\n                    let root = model.mtlTextureRoot;\n                    if (!root) {\n                        // get the directory of the MTL file as default\n                        root = mtl.substr(0, mtl.lastIndexOf("/"));\n                    }\n                    // downloadMtlTextures returns a Promise that\n                    // is resolved once all of the images it\n                    // contains are downloaded. These are then\n                    // attached to the map data objects\n                    return Promise.all([Promise.resolve(material), downloadMtlTextures(material, root)]);\n                }\n                return Promise.all([Promise.resolve(material), undefined]);\n            })\n                .then((value) => {\n                return value[0];\n            });\n        }\n        const parsed = [namePromise, meshPromise, mtlPromise];\n        finished.push(Promise.all(parsed));\n    }\n    return Promise.all(finished).then(ms => {\n        // the "finished" promise is a list of name, Mesh instance,\n        // and MaterialLibary instance. This unpacks and returns an\n        // object mapping name to Mesh (Mesh points to MTL).\n        const models = {};\n        for (const model of ms) {\n            const [name, mesh, mtl] = model;\n            mesh.name = name;\n            if (mtl) {\n                mesh.addMaterialLibrary(mtl);\n            }\n            models[name] = mesh;\n        }\n        return models;\n    });\n}\n/**\n * Takes in an object of `mesh_name`, `\'/url/to/OBJ/file\'` pairs and a callback\n * function. Each OBJ file will be ajaxed in and automatically converted to\n * an OBJ.Mesh. When all files have successfully downloaded the callback\n * function provided will be called and passed in an object containing\n * the newly created meshes.\n *\n * **Note:** In order to use this function as a way to download meshes, a\n * webserver of some sort must be used.\n *\n * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh\'s OBJ file\n *\n * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object\n *\n * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { \'<mesh_name>\': OBJ.Mesh }\n *\n */\nfunction downloadMeshes(nameAndURLs, completionCallback, meshes) {\n    if (meshes === undefined) {\n        meshes = {};\n    }\n    const completed = [];\n    for (const mesh_name in nameAndURLs) {\n        if (!nameAndURLs.hasOwnProperty(mesh_name)) {\n            continue;\n        }\n        const url = nameAndURLs[mesh_name];\n        completed.push(fetch(url)\n            .then(response => response.text())\n            .then(data => {\n            return [mesh_name, new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data)];\n        }));\n    }\n    Promise.all(completed).then(ms => {\n        for (const [name, mesh] of ms) {\n            meshes[name] = mesh;\n        }\n        return completionCallback(meshes);\n    });\n}\nfunction _buildBuffer(gl, type, data, itemSize) {\n    const buffer = gl.createBuffer();\n    const arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;\n    gl.bindBuffer(type, buffer);\n    gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);\n    buffer.itemSize = itemSize;\n    buffer.numItems = data.length / itemSize;\n    return buffer;\n}\n/**\n * Takes in the WebGL context and a Mesh, then creates and appends the buffers\n * to the mesh object as attributes.\n *\n * @param {WebGLRenderingContext} gl the `canvas.getContext(\'webgl\')` context instance\n * @param {Mesh} mesh a single `OBJ.Mesh` instance\n *\n * The newly created mesh attributes are:\n *\n * Attrbute | Description\n * :--- | ---\n * **normalBuffer**       |contains the model&#39;s Vertex Normals\n * normalBuffer.itemSize  |set to 3 items\n * normalBuffer.numItems  |the total number of vertex normals\n * |\n * **textureBuffer**      |contains the model&#39;s Texture Coordinates\n * textureBuffer.itemSize |set to 2 items\n * textureBuffer.numItems |the number of texture coordinates\n * |\n * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)\n * vertexBuffer.itemSize  |set to 3 items\n * vertexBuffer.numItems  |the total number of vertices\n * |\n * **indexBuffer**        |contains the indices of the faces\n * indexBuffer.itemSize   |is set to 1\n * indexBuffer.numItems   |the total number of indices\n *\n * A simple example (a lot of steps are missing, so don\'t copy and paste):\n *\n *     const gl   = canvas.getContext(\'webgl\'),\n *         mesh = OBJ.Mesh(obj_file_data);\n *     // compile the shaders and create a shader program\n *     const shaderProgram = gl.createProgram();\n *     // compilation stuff here\n *     ...\n *     // make sure you have vertex, vertex normal, and texture coordinate\n *     // attributes located in your shaders and attach them to the shader program\n *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");\n *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n *\n *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");\n *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);\n *\n *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");\n *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *\n *     // create and initialize the vertex, vertex normal, and texture coordinate buffers\n *     // and save on to the mesh object\n *     OBJ.initMeshBuffers(gl, mesh);\n *\n *     // now to render the mesh\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     // it\'s possible that the mesh doesn\'t contain\n *     // any texture coordinates (e.g. suzanne.obj in the development branch).\n *     // in this case, the texture vertexAttribArray will need to be disabled\n *     // before the call to drawElements\n *     if(!mesh.textures.length){\n *       gl.disableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *     }\n *     else{\n *       // if the texture vertexAttribArray has been previously\n *       // disabled, then it needs to be re-enabled\n *       gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);\n *       gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     }\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *\n *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);\n *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);\n */\nfunction initMeshBuffers(gl, mesh) {\n    mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);\n    mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);\n    mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);\n    mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);\n    return mesh;\n}\nfunction deleteMeshBuffers(gl, mesh) {\n    gl.deleteBuffer(mesh.normalBuffer);\n    gl.deleteBuffer(mesh.textureBuffer);\n    gl.deleteBuffer(mesh.vertexBuffer);\n    gl.deleteBuffer(mesh.indexBuffer);\n}\n\n\n//# sourceURL=webpack:///./src/utils.ts?')},0:
/*!****************************!*\
  !*** multi ./src/index.ts ***!
  \****************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! /home/aaron/google_drive/projects/webgl-obj-loader/src/index.ts */"./src/index.ts");\n\n\n//# sourceURL=webpack:///multi_./src/index.ts?')}})},module.exports=t()})),parcelRequire.register("hJ3FQ",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getFileNamesChair=e.exports.getFileNamesChair2=e.exports.getFileNamesMario=e.exports.getFileNamesPlane=e.exports.getFileNamesCube=e.exports.getFileNamesRubik=e.exports.getFileNamesCat=e.exports.getFileNamesGreenhouse=e.exports.getFileNamesBuilding=e.exports.getFileNamesStone=e.exports.getFileNamesKoenigsEgg=void 0,e.exports.getFileNamesKoenigsEgg=function(){return{cobjname:parcelRequire("51ks4"),cmatname:parcelRequire("finWC"),cfiles:[]}},e.exports.getFileNamesStone=function(){var e=[];return e.push({fName:"stone12021_01.jpg",fNameResolved:parcelRequire("eRoll")}),{cobjname:parcelRequire("apWGv"),cmatname:parcelRequire("igQG5"),cfiles:e}},e.exports.getFileNamesBuilding=function(){var e=[];return e.push({fName:"stone12021_01.png",fNameResolved:parcelRequire("k30DK")}),{cobjname:parcelRequire("aycMb"),cmatname:parcelRequire("2HruT"),cfiles:e}},e.exports.getFileNamesGreenhouse=function(){var e=[];return e.push({fName:"greenhouse_flooring.png",fNameResolved:parcelRequire("552vB")}),{cobjname:parcelRequire("j8kYw"),cmatname:parcelRequire("8cjVu"),cfiles:e}},e.exports.getFileNamesCat=function(){return{cobjname:parcelRequire("iOyYV"),cmatname:parcelRequire("g2tvl"),cfiles:[]}},e.exports.getFileNamesRubik=function(){return{cobjname:parcelRequire("3dhUH"),cmatname:parcelRequire("7chmj"),cfiles:[]}},e.exports.getFileNamesCube=function(){var e=[];return e.push({fName:"clover.jpg",fNameResolved:parcelRequire("4r5aT")}),e.push({fName:"Di-3d.png",fNameResolved:parcelRequire("bhXdy")}),e.push({fName:"stone12021_01.png",fNameResolved:parcelRequire("k30DK")}),e.push({fName:"zelenskyycube.jpg",fNameResolved:parcelRequire("gdtlH")}),{cobjname:parcelRequire("2Zdrg"),cmatname:parcelRequire("5no8V"),cfiles:e}},e.exports.getFileNamesPlane=function(){return{cobjname:parcelRequire("aUtfb"),cmatname:parcelRequire("hirml"),cfiles:[]}},e.exports.getFileNamesMario=function(){return{cobjname:parcelRequire("jS9Ud"),cmatname:parcelRequire("ieUhX"),cfiles:[]}},e.exports.getFileNamesChair2=function(){return{cobjname:parcelRequire("kaNxb"),cmatname:parcelRequire("cQP7L"),cfiles:[]}},e.exports.getFileNamesChair=function(){return{cobjname:parcelRequire("aRduX"),cmatname:parcelRequire("kUDHJ"),cfiles:[]}}})),parcelRequire.register("51ks4",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("6PgzS"),import.meta.url).toString()})),parcelRequire.register("finWC",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("60cko"),import.meta.url).toString()})),parcelRequire.register("eRoll",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("8xZ2z"),import.meta.url).toString()})),parcelRequire.register("apWGv",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("eboVq"),import.meta.url).toString()})),parcelRequire.register("igQG5",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("hz1n0"),import.meta.url).toString()})),parcelRequire.register("k30DK",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("hcBGW"),import.meta.url).toString()})),parcelRequire.register("aycMb",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("2LZpn"),import.meta.url).toString()})),parcelRequire.register("2HruT",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("c4xr2"),import.meta.url).toString()})),parcelRequire.register("552vB",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("jMrs0"),import.meta.url).toString()})),parcelRequire.register("j8kYw",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("AVisJ"),import.meta.url).toString()})),parcelRequire.register("8cjVu",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("34o5p"),import.meta.url).toString()})),parcelRequire.register("iOyYV",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("8nsRv"),import.meta.url).toString()})),parcelRequire.register("g2tvl",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("8AGZq"),import.meta.url).toString()})),parcelRequire.register("3dhUH",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("blKb5"),import.meta.url).toString()})),parcelRequire.register("7chmj",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("8Hpek"),import.meta.url).toString()})),parcelRequire.register("bhXdy",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("4oCYv"),import.meta.url).toString()})),parcelRequire.register("gdtlH",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("997AU"),import.meta.url).toString()})),parcelRequire.register("2Zdrg",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("kbyiL"),import.meta.url).toString()})),parcelRequire.register("5no8V",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("4bJu0"),import.meta.url).toString()})),parcelRequire.register("aUtfb",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("4FRpf"),import.meta.url).toString()})),parcelRequire.register("hirml",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("jiDYV"),import.meta.url).toString()})),parcelRequire.register("jS9Ud",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("jZwQ5"),import.meta.url).toString()})),parcelRequire.register("ieUhX",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("9y2fl"),import.meta.url).toString()})),parcelRequire.register("kaNxb",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("ekcUo"),import.meta.url).toString()})),parcelRequire.register("cQP7L",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("sRAJS"),import.meta.url).toString()})),parcelRequire.register("aRduX",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("96Uk1"),import.meta.url).toString()})),parcelRequire.register("kUDHJ",(function(e,t){e.exports=new URL(parcelRequire("27Lyk").resolve("79O20"),import.meta.url).toString()})),parcelRequire.register("lHumV",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SkeletonScene=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("6LPK0"));var s=parcelRequire("696EE");class l{constructor(e,t,n,r){this.scenesize=40,this.sceneenv=2,this.vertexShaderSource="",this.fragmentShaderSource="",this.twglprograminfo=null,this.bufferInfo=null,this.skinVAO=null,this.phase0=0,l.instance=this,this.twglprograminfo=new Array(2),this.twglprograminfo[1]=a.createProgramInfo(e,[o.vsSkeleton,o.fsSkeleton])}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}defaultCamera(e,t){}extendGUI(e){e.add(this.animationParameters,"fov",5,85,1),e.add(this.animationParameters,"movetail")}initScene(e,t,n,r,i,o){var l;null!=(l=r.get("phase2"))&&(this.phase0=+l),this.afish=new s.FishVTranslated(1,.2,.3,0,1,.005,.5,2.5,"zelenskyy"),this.afish.forwardspeed=0,this.afish.prepareSurfaceTextures(e,"zelenskyy"),this.afish.mesh=this.afish.prepareMesh(e,r,1),this.afish.numBones=this.afish.mesh.type==e.TRIANGLE_STRIP?this.afish.mesh.nsegments/this.afish.mesh.bonediv:this.afish.mesh.nsegments,this.afish.createBoneTexture(e,0,r),this.afish.createSurfaceTexture(e),this.uniforms=this.afish.createUniforms(e,r),this.bufferInfo=a.createBufferInfoFromArrays(e,this.afish.mesh.arrays),this.skinVAO=a.createVAOFromBufferInfo(e,this.twglprograminfo[1],this.bufferInfo),o(0)}drawScene(e,t,n){var r=this.uniforms;r.viewprojection=t.viewProjection,e.bindVertexArray(this.skinVAO),this.afish.forwardspeed=0,this.afish.computeBone(n,!1,this.animationParameters.movetail),this.afish.prepareBoneTexture(e,this.afish.bindPoseInv2),r.world=parcelRequire("hYurQ").m4.translate(parcelRequire("hYurQ").m4.identity(),[20,-20,0]),a.setUniforms(this.twglprograminfo[1],r),a.drawBufferInfo(e,this.bufferInfo,this.afish.mesh.type),r.world=parcelRequire("hYurQ").m4.translate(parcelRequire("hYurQ").m4.identity(),[-15,0,0]),a.setUniforms(this.twglprograminfo[1],r),a.drawBufferInfo(e,this.bufferInfo,this.afish.mesh.type),this.afish.computeBone(n,!1,this.animationParameters.movetail),this.afish.prepareBoneTexture(e,this.afish.bindPoseInv2),r.world=parcelRequire("hYurQ").m4.translate(parcelRequire("hYurQ").m4.identity(),[50,-10,10]),a.setUniforms(this.twglprograminfo[1],r),a.drawBufferInfo(e,this.bufferInfo,this.afish.mesh.type),r.world=parcelRequire("hYurQ").m4.translate(parcelRequire("hYurQ").m4.identity(),[-50,5,-10]),a.setUniforms(this.twglprograminfo[1],r),a.drawBufferInfo(e,this.bufferInfo,this.afish.mesh.type)}}e.exports.SkeletonScene=l})),parcelRequire.register("6LPK0",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BoneAnimation=e.exports.fsSkeleton=e.exports.vsSkeleton=void 0;var a=parcelRequire("hYurQ");const o=i(parcelRequire("jav8w"));e.exports.vsSkeleton="#version 300 es\n\n// camera\nuniform mat4 viewprojection;\nuniform vec3 lightWorldPos;\nuniform mat4 world;\nuniform mat4 viewInverse;\nuniform mat4 worldInverseTranspose;\n\nin vec4 a_position;\nin vec4 a_weight;\nin uvec4 a_boneNdx;\nin vec2 a_texcoord;\n \nuniform mat4 projection;\nuniform mat4 view;\n\nuniform sampler2D boneMatrixTexture;\n\nuniform float numBones;\n\nout vec2 v_texCoord;\n\nmat4 m4ident =  mat4(1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1);\nmat4 m4zero =  mat4(0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0);\n\nmat4 getBoneMatrix(uint boneNdx) {\n  if (boneNdx>99998u) return m4zero;\n  return mat4(\n    texelFetch(boneMatrixTexture, ivec2(0, boneNdx), 0),\n    texelFetch(boneMatrixTexture, ivec2(1, boneNdx), 0),\n    texelFetch(boneMatrixTexture, ivec2(2, boneNdx), 0),\n    texelFetch(boneMatrixTexture, ivec2(3, boneNdx), 0));\n}\n\nvoid main() {\n  v_texCoord = a_texcoord;\n  vec4 bonemovedskinpos = (getBoneMatrix(a_boneNdx[0]) * a_position * a_weight[0] + getBoneMatrix(a_boneNdx[1]) * a_position * a_weight[1]);\n  gl_Position = viewprojection * world * bonemovedskinpos;\n }\n",e.exports.fsSkeleton="#version 300 es\nprecision mediump float;\n//precision highp float;\nuniform vec4 color;\nin vec2 v_texCoord;\nout vec4 outColor;\nuniform sampler2D surfaceTexture;\n\nvoid main () {\n  vec4 cColor =  texture(surfaceTexture, v_texCoord);\n  outColor=cColor; \n  // * vec4(0.5,0.5,0.5,1);\n}\n";e.exports.BoneAnimation=class{constructor(){this.bindPose=[],this.bones=[],this.boneMatrices=[],this.px=0,this.py=0,this.pz=0,this.scale=1,this.bindPoseInv2=[],this.phase0=0,this.mesh=new o.StridedMesh(1,1,1),this.uniforms={world:[],projection:[],viewprojection:[],view:[],surfaceTexture:{},boneMatrixTexture:{},color:[]},this.bufferInfo=null,this.skinVAO=null}setNumBones(e){this.numBones=this.mesh.type==e.TRIANGLE_STRIP?this.mesh.nsegments/this.mesh.bonediv:this.mesh.nsegments}mat4report(e){var t=e.toString();return t.split(",").forEach((e=>{e.substring(0,5)+","})),t}prepareBoneInv(e){var t=0;return console.log("prepareBoneInv - bindpose"),e.forEach((e=>{this.mat4report(e),console.log(t+"] ["+e.toString()+"] "),t++})),e.map((function(e){return a.m4.inverse(e)}))}prepareBoneMatrices(e,t){if(null!=this.numBones){this.boneArray=new Float32Array(16*this.numBones),this.boneMatrixTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.boneMatrixTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let e=0;e<this.numBones;++e)this.boneMatrices.push(new Float32Array(this.boneArray.buffer,64*e,16)),this.bindPose.push(a.m4.identity()),this.bones.push(a.m4.identity())}}prepareBoneTexture(e,t){null==t?this.bones.forEach(((e,t)=>{a.m4.multiply(e,a.m4.identity(),this.boneMatrices[t])})):this.bones.forEach(((e,n)=>{a.m4.multiply(e,t[n],this.boneMatrices[n])})),e.bindTexture(e.TEXTURE_2D,this.boneMatrixTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,4,this.numBones,0,e.RGBA,e.FLOAT,this.boneArray)}}})),parcelRequire.register("jav8w",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.StridedMesh=void 0;const a=i(parcelRequire("73zRh"));class o extends a.StridedMesh0{constructor(e,t,n){super(),this.segmentsize=.18*n,this.nsegments=t,this.nrows=e,this.arrays={position:{numComponents:0,data:new Float32Array},boneNdx:this.buildBoneIndex(this.nrows,this.nsegments),weight:this.buildBoneWeights(this.nrows,this.nsegments),indices:this.buildIndicesStridedTriangleStrip(this.nrows,this.nsegments),texcoord:this.buildTexCoords(this.nrows,this.nsegments)}}buildPositions(e,t,n){for(var r=[],i=0,a=0,o=0,s=0;s<t;s++)for(var l=0;l<n;l++){var u=Math.PI/4*(s-t/2)/t;u=1-Math.cos(u),i=l*this.segmentsize,a=s*this.segmentsize,o=88*u*this.segmentsize,r.push([i,a,o])}return{numComponents:3,data:this.floatStraighten("Positions",3,r)}}buildCylPositions(e,t,n,r,i){for(var a=[],o=0,s=0,l=0,u=0,c=2*Math.PI/(t-1),h=0;h<t;h++){for(var f=0;f<n;f++){var d=Math.PI/4*(h-t/2)/t;d=1-Math.cos(d),o=f*this.segmentsize,s=this.segmentsize*Math.sin(u)*r,l=this.segmentsize*Math.cos(u)*i,a.push([o,s,l])}u+=c}return{numComponents:3,data:this.floatStraighten("Positions",3,a)}}buildFishVPositions(e,t,n){for(var r=[],i=0,a=0,o=0,s=0,l=2*Math.PI/(t-1),u=20,c=n/4,h=3*n/4,f=u/c,d=0;d<t;d++){u=1;for(var p=0;p<n;p++){var m=Math.PI/4*(d-t/2)/t;m=1-Math.cos(m),i=p*this.segmentsize,p<c&&(u+=f);var g=p-h;if(g<0)a=this.segmentsize*Math.cos(-s)*u,o=this.segmentsize*Math.sin(-s)*u;else{var _=1-g/c;a=this.segmentsize*Math.cos(-s)*u*_,o=this.segmentsize*Math.sin(-s)*u*(2-_)}r.push([i,a,o])}s+=l}return{numComponents:3,data:this.floatStraighten("Positions",3,r)}}buildFishHPositions(e,t,n){for(var r=[],i=0,a=0,o=0,s=0,l=2*Math.PI/(t-1),u=20,c=n/4,h=3*n/4,f=u/c,d=0;d<t;d++){u=1;for(var p=0;p<n;p++){var m=Math.PI/4*(d-t/2)/t;m=1-Math.cos(m),i=p*this.segmentsize,p<c&&(u+=f);var g=p-h;if(g<0)a=this.segmentsize*Math.sin(s)*u,o=this.segmentsize*Math.cos(s)*u;else{var _=1-g/c;a=this.segmentsize*Math.sin(s)*u*(2-_),o=this.segmentsize*Math.cos(s)*u*_}r.push([i,a,o])}s+=l}return{numComponents:3,data:this.floatStraighten("Positions",3,r)}}getFishHPositions(){return this.buildFishHPositions(this.nsegments,this.nrows,this.nsegments)}getFishVPositions(){return this.buildFishVPositions(this.nsegments,this.nrows,this.nsegments)}getCylPositions(e,t){return this.buildCylPositions(this.nsegments,this.nrows,this.nsegments,e,t)}buildIndicesStridedTriangleStrip(e,t){for(var n=[],r=1,i=t;r<e;){for(var a=0,o=0,s=i-t;a<t;)o=s,this.degen&&0==a&&n.push(o),n.push(o),o=i,n.push(o),i++,s++,a++;this.degen&&n.push(o),r++}return{numComponents:1,data:this.intArray("Indices",n)}}buildBoneIndex(e,t){for(var n=[],r=0,i=0,a=0;a<e;a++)for(var o=0;o<t;o++)o%2==0&&(this.bonediv>=2?(r=o/this.bonediv,i=99999,n.push([r,i,99999,99999]),i=1+o/this.bonediv,n.push([r,i,99999,99999])):(r=o,i=99999,n.push([r,i,99999,99999]),r=o+1,i=99999,n.push([r,i,99999,99999])));return{numComponents:4,data:this.intStraighten("BoneIndex",4,n)}}buildTexCoords(e,t){for(var n=0,r=[],i=0;i<e;){for(n=0;n<t;n++){var a=n/+t.toFixed(4),o=i/+e.toFixed(4);r.push([a,o])}i++}var s=new Float32Array(2*r.length);console.log("=>copy texcoords len="+r.length+" stride="+t+" nrows="+e);for(n=0;n<r.length;n++)for(var l=0;l<2;l++)s[2*n+l]=r[n][l];return console.log("texcoords buffer: len="+s.length),console.log(s),{numComponents:2,data:s}}buildBoneWeights(e,t){for(var n=[],r=0;r<e;r++)for(var i=0;i<t;i++)i%2==0&&(n.push([1,0,0,0]),n.push([.5,.5,0,0]));return{numComponents:4,data:this.floatStraighten("BoneWeights",4,n)}}}e.exports.StridedMesh=o})),parcelRequire.register("73zRh",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.StridedMesh0=void 0;e.exports.StridedMesh0=class{constructor(){this.nrows=0,this.nsegments=0,this.arrays={position:{numComponents:0,data:new Float32Array},boneNdx:{numComponents:0,data:new Uint32Array},weight:{numComponents:0,data:new Float32Array},texcoord:{numComponents:0,data:new Float32Array},indices:{numComponents:0,data:new Uint32Array}},this.degen=!0,this.segmentsize=1,this.bonediv=2,this.type=0}floatStraighten(e,t,n){var r=new Float32Array(n.length*t);console.log(">floatstraighten"+t+" "+e+" wdata.length="+n.length);for(var i=0;i<n.length;i++)for(var a=0;a<t;a++)r[i*t+a]=n[i][a];return console.log("<floatstraighten"+t+" "+e+": len="+r.length),r}intStraighten(e,t,n){var r=new Uint32Array(n.length*t);console.log(">intstraighten"+t+" "+e+" wdata.length="+n.length);for(var i=0;i<n.length;i++)for(var a=0;a<t;a++)r[i*t+a]=n[i][a];return console.log("<intstraighten"+t+" "+e+": len="+r.length),r}intArray(e,t){var n=new Uint32Array(t.length);console.log(">intArray "+e+" wdata.length="+t.length);for(var r=0;r<t.length;r++)n[r]=t[r];return console.log("<intArray "+e+": len="+n.length),n}}})),parcelRequire.register("696EE",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FishVTranslated=void 0;var a=parcelRequire("hYurQ");const o=i(parcelRequire("jav8w")),s=i(parcelRequire("a6pCn")),l=i(parcelRequire("5kt28"));class u extends l.Fish{prepareMesh(e,t,n){this.scale=n;var r=this.numberDictPar(t,"stride",80),i=this.numberDictPar(t,"numrows",80);if("strip"==this.stringDictPar(t,"mesh","strip")){var a=new o.StridedMesh(i,r,n);return a.arrays.position=a.getFishVPositions(),a.type=e.TRIANGLE_STRIP,a}var l=new s.StridedMesh(i,r);return l.arrays.position=l.getFishVPositions(),l.type=e.TRIANGLES,l}computeBoneMatrices(e,t){for(var n=0,r=this.ampl/e.length,i=2*this.arange*Math.PI,o=0;o<e.length;o++){var s=a.m4.identity(),l=o,u=i*((l/=e.length)*t),c=i*(l*t);a.m4.translate(s,[this.px,this.py+10*n*Math.cos(.5*u),this.pz+n*Math.sin(1*c)],e[o]),this.py+=0,this.pz+=0,n+=this.size*r}}}e.exports.FishVTranslated=u})),parcelRequire.register("a6pCn",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.StridedMesh=void 0;const a=i(parcelRequire("73zRh"));class o extends a.StridedMesh0{getFishHPositions(){return this.build3DTrianglesPositions(this.nsegments,this.nrows,this.nsegments)}getFishPPositions(){return this.build3DTrianglesPositions(this.nsegments,this.nrows,this.nsegments)}getFishVPositions(){return this.build3DTrianglesPositions(this.nsegments,this.nrows,this.nsegments)}constructor(e,t){super(),this.segmentsize=.1,this.nsegments=t,this.nrows=e,this.arrays={position:this.build3DTrianglesPositions(this.nsegments,this.nrows,this.nsegments),boneNdx:this.buildBoneTrianglesNDX(this.nsegments,this.nrows,this.nsegments),weight:this.buildWeightsTriangles(this.nsegments,this.nrows,this.nsegments),indices:this.buildIndicesTriangles(this.nsegments,this.nrows,this.nsegments),texcoord:this.buildTexCoordTriangles(this.nsegments,this.nrows,this.nsegments)}}buildWeightsTriangles(e,t,n){for(var r=0,i=[],a=0;a<t;){for(r=0;r<n;r++)for(var o=0;o<6;o++)i.push([1,0,0,0]);a++}var s=new Float32Array(4*i.length);console.log("=>copy weights len="+i.length+" stride="+n+" nrows="+t);for(r=0;r<i.length;r++)for(o=0;o<4;o++)s[4*r+o]=i[r][o];return console.log("NDX weights buffer: len="+s.length),{numComponents:4,data:s}}buildTexCoordTriangles(e,t,n){for(var r=0,i=[],a=0;a<t;){for(r=0;r<n;r++)for(var o=r/+n.toFixed(4),s=a/+t.toFixed(4),l=0;l<6;l++)i.push([o,s]);a++}var u=new Float32Array(2*i.length);console.log("=>copy texcoords len="+i.length+" stride="+n+" nrows="+t);for(r=0;r<i.length;r++)for(l=0;l<2;l++)u[2*r+l]=i[r][l];return console.log("texcoords buffer: len="+u.length),console.log(u),{numComponents:2,data:u}}buildIndicesTriangles(e,t,n){for(var r=[],i=0,a=0;i<t;){for(var o=0;o<n;o++)for(var s=0;s<6;s++)r.push(a++);i++}var l=new Uint32Array(r.length);for(o=0;o<r.length;o++)l[o]=r[o];return console.log("indices: len="+l.length),console.log(l),{numComponents:1,data:l}}buildBoneTrianglesNDX(e,t,n){for(var r=[],i=0;i<t;){for(var a=0;a<n;a++)for(var o=0;o<6;o++)r.push([a/this.bonediv,99999,99999,99999]);i++}var s=new Uint32Array(4*r.length);i=0,console.log("ndxdat4.len="+r.length),console.log(r);for(a=0;a<r.length;a++)for(o=0;o<4;o++)s[4*a+o]=r[a][o];return console.log("NDX indices buffer: len="+s.length),console.log(s),{numComponents:4,data:s}}build3DTrianglesPositions(e,t,n){var r,i,a,o=[],s=0,l=0,u=0;u*=r=this.segmentsize;for(var c=0;c<t;c++){var h=Math.PI/4*(c-t/2)/t;s=8*(h=1-Math.cos(h));for(var f=0;f<n;f++)i=r*f,a=r*c,l=r*s,o.push(i),o.push(a),o.push(l),o.push(i),o.push(a+r),o.push(l+u),o.push(i+r),o.push(a+r),o.push(l+u),o.push(i+r),o.push(a+r),o.push(l+u),o.push(i+r),o.push(a),o.push(l),o.push(i),o.push(a),o.push(l);l+=u}for(var d=new Float32Array(o.length),p=0;p<o.length;p++)d[p]=o[p];return console.log("positions: len="+d.length+" nvect="+d.length/3),console.log(d),{numComponents:3,data:d}}}e.exports.StridedMesh=o})),parcelRequire.register("5kt28",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Fish=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("6LPK0"));class s extends o.BoneAnimation{constructor(e,t,n,r,i,a,o,s,l){super(),this.size=e,this.r1=t,this.r2=n,this.forwardspeed=r,this.phase0=i,this.deltaphase=a,this.arange=o,this.ampl=s,this.surfacetexturefile=l,this.EndOfBoneTrans=parcelRequire("hYurQ").m4.identity()}computeBone(e,t,n){const r=n?.01*this.mesh.bonediv*Math.PI*Math.sin(e*this.deltaphase):0;this.computeBoneMatrices(this.bones,r+this.phase0)}prepareSurfaceTextures(e,t){var n=parcelRequire("bIoW4"),r=parcelRequire("53UYj"),i=parcelRequire("ecCDE"),o=parcelRequire("jFGo5"),s=a.createTextures(e,{checker:{mag:e.NEAREST,min:e.LINEAR,src:[255,255,255,255,192,192,192,255,92,92,92,255,255,255,255,255]},clover:{src:r},zelenskyy:{src:i},gradient:{src:n},flagofukraine:{src:o}});return"clover"==t&&(this.surfaceTexture=s.clover),"zelenskyy"==t&&(this.surfaceTexture=s.zelenskyy),"checker"==t&&(this.surfaceTexture=s.checker),"gradient"==t&&(this.surfaceTexture=s.gradient),"flagofukraine"==t&&(this.surfaceTexture=s.flagofukraine),s}createSurfaceTexture(e){e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.surfaceTexture)}createBoneTexture(e,t,n){e.activeTexture(e.TEXTURE0),this.prepareBoneMatrices(e,n),this.computeBone(t,!1,!1),this.bindPose=this.bones,this.bindPoseInv2=this.prepareBoneInv(this.bindPose),this.EndOfBoneTrans=parcelRequire("hYurQ").m4.identity()}createUniforms(e,t){return{world:parcelRequire("hYurQ").m4.identity(),projection:parcelRequire("hYurQ").m4.identity(),viewprojection:parcelRequire("hYurQ").m4.identity(),view:parcelRequire("hYurQ").m4.translation([0,0,0]),surfaceTexture:this.surfaceTexture,boneMatrixTexture:this.boneMatrixTexture,color:[0,0,0,0]}}numberDictPar(e,t,n){var r;return null!=(r=e.get(t))?+r:n}stringDictPar(e,t,n){var r;return null!=(r=e.get(t))?r:n}}e.exports.Fish=s})),parcelRequire.register("i3iwe",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Skeleton=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("fhSLN")),s=i(parcelRequire("6LPK0")),l=i(parcelRequire("dC4mA")),u=i(parcelRequire("lh43t")),c=i(parcelRequire("e93rA"));class h extends l.BaseApp{constructor(e,t,n,r){super(e,t,n,r),this.skeletonParameters={move:!1,movetail:!0,speed:.4,texture:"geotriangle2",color0:"#00A000"},this.bufferInfo=null,this.skinVAO=null,this.phase0=0,this.gui=null,h.instance=this,this.twglprograminfo=new Array(2),this.twglprograminfo[1]=a.createProgramInfo(e,[s.vsSkeleton,s.fsSkeleton])}main(e,t){var n;null!=(n=t.get("phase2"))&&(this.phase0=+n),this.afish=new u.FishHTranslated(1,.2,.3,0,1,.015,.5,2.5,"zelenskyy"),this.afish.forwardspeed=this.skeletonParameters.move?.06:0,this.afish.prepareSurfaceTextures(e,"zelenskyy"),this.afish.mesh=this.afish.prepareMesh(e,t,1),this.afish.numBones=this.afish.mesh.type==e.TRIANGLE_STRIP?this.afish.mesh.nsegments/this.afish.mesh.bonediv:this.afish.mesh.nsegments,this.afish.createBoneTexture(e,0,t),this.afish.createSurfaceTexture(e),this.uniforms=this.afish.createUniforms(e,t),this.bufferInfo=a.createBufferInfoFromArrays(e,this.afish.mesh.arrays),this.skinVAO=a.createVAOFromBufferInfo(e,this.twglprograminfo[1],this.bufferInfo),this.cam=o.Camera.createCamera(e,t,o.Camera.CamZUp,50,this.app),this.cam.zoominVelocity=.5,requestAnimationFrame((()=>this.render(0)))}onChangeColorValue(e){var t=h.instance;null!=t.gl&&(t.gl.canvas.parentNode.style.backgroundColor=e)}initGUI(e){this.skeletonParameters=e,this.gl.canvas.parentNode.style.backgroundColor=this.skeletonParameters.color0;var t=new c.GUI({autoPlace:!1});return t.domElement.id="gui_drawimagespace",document.getElementById("linksdiv").append(t.domElement),t.close(),t.remember(e),t.add(e,"move"),t.add(e,"movetail"),t.add(e,"speed").min(.02).max(.1).step(.002),t.addColor(e,"color0").onChange(this.onChangeColorValue),t.updateDisplay(),t}render(e){var t=this.gl;t.useProgram(this.twglprograminfo[1].program),a.resizeCanvasToDisplaySize(t.canvas),t.viewport(0,0,t.canvas.width,t.canvas.height),t.enable(t.DEPTH_TEST),t.enable(t.CULL_FACE);var n=this.cam;n.CamHandlingZUp(t,this.app,1,-1);var r=this.uniforms;r.viewprojection=n.viewProjection,t.bindVertexArray(this.skinVAO),this.afish.forwardspeed=this.skeletonParameters.move?this.skeletonParameters.speed:0,this.afish.computeBone(e,this.skeletonParameters.move,this.skeletonParameters.movetail),this.afish.prepareBoneTexture(t,this.afish.bindPoseInv2),r.world=parcelRequire("hYurQ").m4.translate(parcelRequire("hYurQ").m4.identity(),[20,-20,0]),a.setUniforms(this.twglprograminfo[1],r),a.drawBufferInfo(t,this.bufferInfo,this.afish.mesh.type),r.world=parcelRequire("hYurQ").m4.translate(parcelRequire("hYurQ").m4.identity(),[0,0,0]),a.setUniforms(this.twglprograminfo[1],r),a.drawBufferInfo(t,this.bufferInfo,this.afish.mesh.type),this.afish.computeBone(e,this.skeletonParameters.move,this.skeletonParameters.movetail),this.afish.prepareBoneTexture(t,this.afish.bindPoseInv2),r.world=parcelRequire("hYurQ").m4.translate(parcelRequire("hYurQ").m4.identity(),[50,-20,10]),a.setUniforms(this.twglprograminfo[1],r),a.drawBufferInfo(t,this.bufferInfo,this.afish.mesh.type),r.world=parcelRequire("hYurQ").m4.translate(parcelRequire("hYurQ").m4.identity(),[-10,5,-10]),a.setUniforms(this.twglprograminfo[1],r),a.drawBufferInfo(t,this.bufferInfo,this.afish.mesh.type),requestAnimationFrame((()=>this.render(++e)))}}e.exports.Skeleton=h})),parcelRequire.register("lh43t",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FishHTranslated=void 0;var a=parcelRequire("hYurQ");const o=i(parcelRequire("jav8w")),s=i(parcelRequire("a6pCn")),l=i(parcelRequire("5kt28"));class u extends l.Fish{prepareMesh(e,t,n){this.scale=n;var r=this.numberDictPar(t,"stride",80),i=this.numberDictPar(t,"numrows",80);if("strip"==this.stringDictPar(t,"mesh","triangle")){var a=new o.StridedMesh(i,r,n);return a.arrays.position=a.getFishHPositions(),a.type=e.TRIANGLE_STRIP,console.log("created triangle strip mesh. phase="+this.phase0),a}var l=new s.StridedMesh(i,r);return l.arrays.position=l.getFishHPositions(),console.log("created triangles mesh. phase="+this.phase0),l.type=e.TRIANGLES,l}computeBoneMatrices(e,t){for(var n=0,r=this.ampl/e.length,i=2*this.arange*Math.PI,o=0;o<e.length;o++){var s=a.m4.identity(),l=o,u=i*((l/=e.length)*t),c=i*(l*t);a.m4.translate(s,[this.px,this.py+n*Math.cos(.5*u),this.pz+10*n*Math.sin(c)],e[o]),this.py+=0,this.pz+=0,n+=this.size*r}}}e.exports.FishHTranslated=u})),parcelRequire.register("6wRfj",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FishAnimationScene=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("6kmNl")),s=i(parcelRequire("6LPK0")),l=i(parcelRequire("lmGQO")),u=i(parcelRequire("1oZK8")),c=i(parcelRequire("gsStc")),h=i(parcelRequire("696EE"));class f{constructor(e,t,n,r){this.scenesize=40,this.sceneenv=2,this.vertexShaderSource="",this.fragmentShaderSource="",this.twglprograminfo=null,this.fish=[new h.FishVTranslated(1,2,.3,.03,.8,.0016,.5,2,"zelenskyy"),new l.FishOneJoint(.06,40,24,.03,0,.0055,-9999,2.1,"gradient",.6,[0,0,1]),new c.FishHRotated(.5,16,22,.03,.1,.0015,1,.5,"gradient"),new u.FishV(.2,.2,.3,.03,1,.015,.5,5,"flagofukraine"),new h.FishVTranslated(.3,.2,.3,.03,.8,.0085,.5,2.5,"zelenskyy")],this.fishjointcounts=[1,28,1,1,1],this.fishpositions=[[[0,-20,0]],[[-15,15,0]],[[20,-5,-15]],[[-10,-5,0]],[[0,0,1]]],this.clock=new o.AnimationClock,f.instance=this,this.twglprograminfo=new Array(2),this.twglprograminfo[1]=a.createProgramInfo(e,[s.vsSkeleton,s.fsSkeleton])}resizeCanvas(e){a.resizeCanvasToDisplaySize(e.canvas)}defaultCamera(e,t){}extendGUI(e){e.add(this.animationParameters,"fov",5,85,1),e.add(this.animationParameters,"movetail")}initScene(e,t,n,r,i,o){var s=0;this.fish.forEach((t=>{t.prepareSurfaceTextures(e,t.surfacetexturefile),t.mesh=t.prepareMesh(e,r,t.size),t.setNumBones(e),t.createBoneTexture(e,0,r),t.createSurfaceTexture(e),t.uniforms=t.createUniforms(e,r),t.bufferInfo=a.createBufferInfoFromArrays(e,t.mesh.arrays),t.skinVAO=a.createVAOFromBufferInfo(e,this.twglprograminfo[1],t.bufferInfo),++s==this.fish.length&&o(0)}))}drawScene(e,t,n){for(var r=0;r<this.fish.length;r++)this.fish[r].uniforms.viewprojection=t.viewProjection;for(r=0;r<this.fish.length;r++)if(e.bindVertexArray(this.fish[r].skinVAO),this.fish[r].forwardspeed=this.animationParameters.b.move?this.animationParameters.b.speed:0,1==this.fishjointcounts[r])this.fish[r].computeBone(n,this.animationParameters.b.move,this.animationParameters.movetail),this.fish[r].prepareBoneTexture(e,this.fish[r].bindPoseInv2),this.fish[r].uniforms.world=parcelRequire("hYurQ").m4.translation(this.fishpositions[r][0]),a.setUniforms(this.twglprograminfo[1],this.fish[r].uniforms),a.drawBufferInfo(e,this.fish[r].bufferInfo,this.fish[r].mesh.type);else{for(var i=parcelRequire("hYurQ").m4.translation(this.fishpositions[r][0]),o=this.fish[r].ampl,s=this.animationParameters.sling,l=0;l<this.fishjointcounts[r];l++){var u=l*s,c=l/this.fishjointcounts[r];this.fish[r].ampl=o*c,this.fish[r].computeBone(n-u,this.animationParameters.b.move,this.animationParameters.movetail),this.fish[r].prepareBoneTexture(e,null),this.fish[r].uniforms.world=i,a.setUniforms(this.twglprograminfo[1],this.fish[r].uniforms),a.drawBufferInfo(e,this.fish[r].bufferInfo,this.fish[r].mesh.type),i=parcelRequire("hYurQ").m4.multiply(i,this.fish[r].EndOfBoneTrans)}this.fish[r].ampl=o}}}e.exports.FishAnimationScene=f})),parcelRequire.register("lmGQO",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FishOneJoint=void 0;var a=parcelRequire("hYurQ");const o=i(parcelRequire("jav8w")),s=i(parcelRequire("a6pCn")),l=i(parcelRequire("5kt28"));class u extends l.Fish{constructor(e,t,n,r,i,a,o,s,l,u,c){super(e,t,n,r,i,a,o,s,l),this.size=e,this.r1=t,this.r2=n,this.forwardspeed=r,this.phase0=i,this.deltaphase=a,this.arange=o,this.ampl=s,this.surfacetexturefile=l,this.jointpos=u,this.vaxis=c}prepareMesh(e,t,n){this.scale=n;var r=this.numberDictPar(t,"stride",80),i=this.numberDictPar(t,"numrows",80);if("strip"==this.stringDictPar(t,"mesh","strip")){var a=new o.StridedMesh(i,r,n);return a.arrays.position=a.getCylPositions(this.r1,this.r2),a.type=e.TRIANGLE_STRIP,console.log("created triangle strip mesh. phase="+this.phase0),a}var l=new s.StridedMesh(i,r);return l.arrays.position=l.getFishVPositions(),l.type=e.TRIANGLES,l}computeBoneMatrices(e,t){for(var n=this.mesh.nsegments*this.mesh.segmentsize,r=this.jointpos*n,i=a.m4.translation([r,0,0]),o=a.m4.translation([-r,0,0]),s=e.length*this.jointpos,l=a.m4.axisRotate(i,this.vaxis,t*this.ampl),u=0;u<e.length;u++){var c=u>s?l:i;e[u]=a.m4.multiply(c,o)}this.EndOfBoneTrans=a.m4.translate(l,[n-r-.1,0,0,0])}}e.exports.FishOneJoint=u})),parcelRequire.register("1oZK8",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FishV=void 0;var a=parcelRequire("hYurQ");const o=i(parcelRequire("jav8w")),s=i(parcelRequire("a6pCn")),l=i(parcelRequire("5kt28"));class u extends l.Fish{prepareMesh(e,t,n){this.scale=n;var r=this.numberDictPar(t,"stride",80),i=this.numberDictPar(t,"numrows",80);if("strip"==this.stringDictPar(t,"mesh","strip")){var a=new o.StridedMesh(i,r,n);return a.arrays.position=a.getFishHPositions(),a.type=e.TRIANGLE_STRIP,a}var l=new s.StridedMesh(i,r);return l.arrays.position=l.getFishHPositions(),l.type=e.TRIANGLES,l}computeBoneMatrices(e,t){for(var n=0,r=this.ampl/e.length,i=2*this.arange*Math.PI,o=0;o<e.length;o++)a.m4.translate(a.m4.identity(),[this.px,this.py+n*Math.cos(i*(o+t)/e.length+t),this.pz+10*n*Math.sin(+i*o/e.length+t)],e[o]),this.py+=0,this.pz+=0,n+=this.scale*r}}e.exports.FishV=u})),parcelRequire.register("gsStc",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FishHRotated=void 0;var a=parcelRequire("hYurQ");const o=i(parcelRequire("jav8w")),s=i(parcelRequire("a6pCn")),l=i(parcelRequire("5kt28"));class u extends l.Fish{prepareMesh(e,t,n){this.scale=n;var r=this.numberDictPar(t,"stride",80),i=this.numberDictPar(t,"numrows",80);if("strip"==this.stringDictPar(t,"mesh","strip")){var a=new o.StridedMesh(i,r,n);return a.arrays.position=a.getCylPositions(this.r1,this.r2),a.type=e.TRIANGLE_STRIP,console.log("created triangle strip mesh. phase="+this.phase0),a}var l=new s.StridedMesh(i,r);return l.arrays.position=l.getFishPPositions(),l.type=e.TRIANGLES,l}computeBoneMatrices(e,t){this.ampl,e.length,Math.PI;for(var n=this.ampl*t*Math.PI*2,r=0,i=this.mesh.nsegments*this.mesh.segmentsize,o=0;o<e.length;o++){var s=o/e.length;r=n*(.5+.5*Math.sin(this.arange*s*n));var l=a.m4.identity();l=a.m4.translate(l,[.5*i/2+this.px,0,0]),l=a.m4.rotateY(l,r),l=a.m4.translate(l,[-(.5*i/2+this.px),0,0,0]),l=a.m4.translate(l,[this.px,0,0,0]),e[o]=l}}}e.exports.FishHRotated=u})),parcelRequire.register("4McAy",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FishAnimation=void 0;const a=i(parcelRequire("hYurQ")),o=i(parcelRequire("fhSLN")),s=i(parcelRequire("6LPK0")),l=i(parcelRequire("lmGQO")),u=i(parcelRequire("1oZK8")),c=i(parcelRequire("gsStc")),h=i(parcelRequire("lh43t")),f=i(parcelRequire("dC4mA")),d=i(parcelRequire("6kmNl"));class p extends f.BaseApp{constructor(e,t,n,r){super(e,t,n,r),this.fishAnimationParameters={b:this.baseappParameters,movetail:!0,texture:"geotriangle2",sling:117},this.fish=[new h.FishHTranslated(1,2,.3,.03,.8,.0016,.5,2,"zelenskyy"),new l.FishOneJoint(.06,40,24,.03,0,.0055,-9999,2.1,"gradient",.6,[0,1,0]),new c.FishHRotated(.5,16,22,.03,.1,.0015,1,.5,"gradient"),new u.FishV(.2,.2,.3,.03,1,.015,.5,5,"flagofukraine"),new h.FishHTranslated(.3,.2,.3,.03,.8,.0085,.5,2.5,"zelenskyy")],this.fishjointcounts=[1,28,1,1,1],this.fishpositions=[[[0,-20,0]],[[-15,15,0]],[[20,-5,-15]],[[-10,-5,0]],[[0,0,1]]],this.clock=new d.AnimationClock,p.instance=this,this.twglprograminfo=new Array(2),this.twglprograminfo[1]=a.createProgramInfo(e,[s.vsSkeleton,s.fsSkeleton])}main(e,t){e=this.gl;this.fish.forEach((n=>{n.prepareSurfaceTextures(e,n.surfacetexturefile),n.mesh=n.prepareMesh(e,t,n.size),n.setNumBones(e),n.createBoneTexture(e,0,t),n.createSurfaceTexture(e),n.uniforms=n.createUniforms(e,t),n.bufferInfo=a.createBufferInfoFromArrays(e,n.mesh.arrays),n.skinVAO=a.createVAOFromBufferInfo(e,this.twglprograminfo[1],n.bufferInfo)})),this.cam=o.Camera.createCamera(e,t,o.Camera.CamZUp,30,this.app),this.cam.zoominVelocity=.5,requestAnimationFrame((()=>this.render(0)))}onChangeColorValue(e){var t=p.instance;null!=t.gl&&(t.gl.canvas.parentNode.style.backgroundColor=e)}initGUI(e){this.fishAnimationParameters=e;var t=super.createGUI(this.fishAnimationParameters.b,this.fishAnimationParameters);return t.add(this.fishAnimationParameters,"sling").min(9).max(120).step(1),t.updateDisplay(),t}render(e){var t=this.gl;t.useProgram(this.twglprograminfo[1].program),a.resizeCanvasToDisplaySize(t.canvas),t.viewport(0,0,t.canvas.width,t.canvas.height),t.enable(t.DEPTH_TEST),t.enable(t.CULL_FACE);var n=this.cam;n.CamHandlingZUp(t,this.app,1,-1);for(var r=0;r<this.fish.length;r++)this.fish[r].uniforms.viewprojection=n.viewProjection;for(r=0;r<this.fish.length;r++)if(t.bindVertexArray(this.fish[r].skinVAO),this.fish[r].forwardspeed=this.fishAnimationParameters.b.move?this.fishAnimationParameters.b.speed:0,1==this.fishjointcounts[r])this.fish[r].computeBone(e,this.fishAnimationParameters.b.move,this.fishAnimationParameters.movetail),this.fish[r].prepareBoneTexture(t,this.fish[r].bindPoseInv2),this.fish[r].uniforms.world=parcelRequire("hYurQ").m4.translation(this.fishpositions[r][0]),a.setUniforms(this.twglprograminfo[1],this.fish[r].uniforms),a.drawBufferInfo(t,this.fish[r].bufferInfo,this.fish[r].mesh.type);else{for(var i=parcelRequire("hYurQ").m4.translation(this.fishpositions[r][0]),o=this.fish[r].ampl,s=this.fishAnimationParameters.sling,l=0;l<this.fishjointcounts[r];l++){var u=l*s,c=l/this.fishjointcounts[r];this.fish[r].ampl=o*c,this.fish[r].computeBone(e-u,this.fishAnimationParameters.b.move,this.fishAnimationParameters.movetail),this.fish[r].prepareBoneTexture(t,null),this.fish[r].uniforms.world=i,a.setUniforms(this.twglprograminfo[1],this.fish[r].uniforms),a.drawBufferInfo(t,this.fish[r].bufferInfo,this.fish[r].mesh.type),i=parcelRequire("hYurQ").m4.multiply(i,this.fish[r].EndOfBoneTrans)}this.fish[r].ampl=o}requestAnimationFrame((()=>this.render(this.clock.getTime(this.clock.frame))))}}e.exports.FishAnimation=p})),parcelRequire.register("gof5j",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Animation2=void 0;const a=i(parcelRequire("6kmNl")),o=i(parcelRequire("fhSLN")),s=i(parcelRequire("dC4mA"));class l extends s.BaseApp{constructor(e,t,n,r,i){super(e,t,r,i),this.animation1Parameters={b:this.baseappParameters,texture:"geotriangle2",fov:60,typelight:"point light",sling:117,shininess:.1,movetail:!0},this.ctime=(new Date).getTime(),this.doclear=!0,this.doTwglEnv=!1,l.instance=this,this.scene=n[0],this.clock=new a.AnimationClock}onChangeTextureCombo(e){var t=l.instance;console.log("we choose texture=["+e+"] thisinstance.scene.sceneenv="+t.scene.sceneenv),"None"==e&&(t.scene.sceneenv=-1),"Black"==e&&(t.skyboxtexture=void 0),"Yokohama"==e&&(t.skyboxtexture=t.createEnvironmentMapTexture(t.gl,t.scene.sceneenv=1,((e,t)=>{}))),"Stockholm"==e&&(t.skyboxtexture=t.createEnvironmentMapTexture(t.gl,t.scene.sceneenv=2,((e,t)=>{})))}initGUI(e){console.log("=> animation1 initGUI "+e),this.animation1Parameters=e;var t=super.createGUI(this.animation1Parameters.b,this.animation1Parameters);return this.scene.animationParameters=this.animation1Parameters,t.add(this.animation1Parameters,"texture",["None","Black","Yokohama","Stockholm"]).onChange(this.onChangeTextureCombo),this.scene.extendGUI(t),t}main(e,t){if(this.dictpars=t,null!=this.scene.twglprograminfo&&null!=this.scene.twglprograminfo){var n=this.twglprograminfo[0];this.twglprograminfo=new Array(this.scene.twglprograminfo.length),this.twglprograminfo[0]=n;for(var r=0;r<this.scene.twglprograminfo.length;r++)null!=this.scene.twglprograminfo[r]&&null!=this.scene.twglprograminfo[r]&&(this.twglprograminfo[r]=this.scene.twglprograminfo[r])}this.cam=o.Camera.createCamera(e,t,o.Camera.CamYUp,this.scene.scenesize,this.app),this.cam.zoominVelocity=.5,this.scene.sceneenv>0?(e.useProgram(this.twglprograminfo[0].program),this.doTwglEnv?this.createEnvironmentMapGeoTwgl(e):this.createEnvironmentMapGeo(e),this.skyboxtexture=this.createEnvironmentMapTexture(e,this.scene.sceneenv,this.textureEnvReadyCallback)):(e.useProgram(this.twglprograminfo[0].program),this.scene.initScene(e,this.animation1Parameters,this.cam,t,this.twglprograminfo[1],this.sceneReadyCallback))}sceneReadyCallback(e){var t=s.instance;t.scene.defaultCamera(t.gl,t.cam),t.scene.resizeCanvas(t.gl),console.log("sceneReadyCallback requests first frame"),requestAnimationFrame((()=>t.render(t.ctime)))}textureEnvReadyCallback(e,t){var n=s.instance;console.log("textureEnvReadyCallback executes initScene"),n.scene.initScene(n.gl,n.animation1Parameters,n.cam,n.dictpars,n.twglprograminfo[1],n.sceneReadyCallback)}render(e){var t,n,r=this.gl;this.doclear&&(r.clear(r.DEPTH_BUFFER_BIT),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)),this.scene.resizeCanvas(r),r.viewport(0,0,r.canvas.width,r.canvas.height);var i=this.cam;i.CamHandlingYUp(r,this.app,1,-1),this.scene.animationParameters=this.animation1Parameters,this.scene.sceneenv>0&&((null===(t=this.scene.animationParameters)||void 0===t?void 0:t.b.move)?this.cameraPosition=(null===(n=this.scene.animationParameters)||void 0===n?void 0:n.b.move)?[Math.cos(.005*e*this.scene.animationParameters.b.speed),0,Math.sin(.005*e*this.scene.animationParameters.b.speed)]:[4,0,0]:this.cameraPosition=[null==i?void 0:i.Position()[0],null==i?void 0:i.Position()[1],null==i?void 0:i.Position()[2]],r.useProgram(this.twglprograminfo[0].program),r.disable(r.CULL_FACE),r.depthFunc(r.LEQUAL),this.doTwglEnv?this.renderenvironmentmapTwgl(r,this.animation1Parameters.fov*Math.PI/180,this.skyboxtexture):this.renderenvironmentmap(r,this.animation1Parameters.fov*Math.PI/180,this.skyboxtexture)),null!=this.twglprograminfo[1]&&null!=this.twglprograminfo[1]&&(r.useProgram(this.twglprograminfo[1].program),r.enable(r.DEPTH_TEST),r.enable(r.CULL_FACE),this.scene.drawScene(r,i,e)),requestAnimationFrame((()=>this.render(this.clock.getTime(this.clock.frame))))}}e.exports.Animation2=l}));var $0ee47b017eb0f011$exports={};parcelRequire("27Lyk").register(JSON.parse('{"7w4tp":"index.0073792b.js","dyQXb":"posx.033ef6e3.jpg","6AWHT":"negx.a40e4111.jpg","fHbrQ":"posy.56ef6c04.jpg","250Xl":"negy.287bfeb0.jpg","KQ6EN":"posz.8c4db211.jpg","fsxiN":"negz.22e67707.jpg","jprWk":"clover.f367e83a.jpg","j0DQL":"hft-icon-16.5359b4e2.png","aDeMZ":"goldengate.f6f016e9.jpg","2GzXk":"pos-x.239926c7.jpg","f6rLL":"pos-y.862258fb.jpg","fvM1M":"pos-z.8d9ade2d.jpg","gGZjl":"neg-x.cb064d98.jpg","kgHfM":"neg-y.9e635d9e.jpg","9YRJL":"neg-z.cee852dc.jpg","kh3BV":"posx.b38de00a.jpg","nUMot":"posy.b86a435e.jpg","bctIz":"posz.ad4433ff.jpg","7OBxY":"negx.55a486e3.jpg","8vVWB":"negy.35c7f4f9.jpg","6V2NX":"negz.8d5af5fa.jpg","97yIo":"posx.3ae295d3.jpg","8XRnE":"posy.3e508144.jpg","nDiHi":"posz.90d337d3.jpg","hJgRS":"negx.cc0f6934.jpg","9L3Ut":"negy.8dfb34f5.jpg","a7j2h":"negz.d4cd5017.jpg","bBQYX":"clover.f367e83a.jpg","8dRE9":"blockguy.44e93f30.json","2Rj7r":"circlegradient.48b2d1ce.png","jhoev":"aristoteles1.25ddbbcf.png","7YVFb":"zelenskii.6ac3cdc8.png","5wtVK":"flagofukraine.fd76e18e.png","iXa3d":"flagofukraine2.fa8ff52a.png","9Iun8":"geodriehoek.5b44c2c4.png","kP0ud":"geodriehoek2.6958cbca.png","ja1nt":"protractorT2.64f1f43c.png","6PgzS":"koenigsegg.8df88286.obj","60cko":"koenigsegg.48f5869e.mtl","8xZ2z":"stone12021_01.28084e35.jpg","eboVq":"stone12021_01.78ac6afa.obj","hz1n0":"stone12021_01.99da5af8.mtl","hcBGW":"stone12021_01.14595b62.png","2LZpn":"building_04a.e556f8d2.obj","c4xr2":"building_04.162dc679.mtl","jMrs0":"greenhouse_flooring.2ab3b5ff.png","AVisJ":"greenhouse.1f5eeb4e.obj","34o5p":"greenhouse.e1c28c6a.mtl","8nsRv":"12221_Cat_v1_l3.93e1c07f.obj","8AGZq":"12221_Cat_v1_l3.65e3087b.mtl","blKb5":"xrubik.61931b92.obj","8Hpek":"xrubik.457ffe0b.mtl","4oCYv":"Di-3d.47c78a86.png","997AU":"zelenskyycube.0bb08780.jpg","kbyiL":"cube2.dc06ff91.obj","4bJu0":"cube2.da91d49c.mtl","4FRpf":"plane.ca83639b.obj","jiDYV":"plane.35062fed.mtl","jZwQ5":"mario-sculpture.c6aef91f.obj","9y2fl":"mario-sculpture.d222ce49.mtl","ekcUo":"willisau_riale.bf788a9a.obj","sRAJS":"willisau_riale.2d4a7bf7.mtl","96Uk1":"chair.83b2f4a9.obj","79O20":"chair.ce4c3bb0.mtl"}'));var $aa654493e6644dc7$exports={},$aa654493e6644dc7$var$__createBinding=$aa654493e6644dc7$exports&&$aa654493e6644dc7$exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),$aa654493e6644dc7$var$__setModuleDefault=$aa654493e6644dc7$exports&&$aa654493e6644dc7$exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),$aa654493e6644dc7$var$__importStar=$aa654493e6644dc7$exports&&$aa654493e6644dc7$exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&$aa654493e6644dc7$var$__createBinding(t,e,n);return $aa654493e6644dc7$var$__setModuleDefault(t,e),t};Object.defineProperty($aa654493e6644dc7$exports,"__esModule",{value:!0});const $aa654493e6644dc7$var$mtls=$aa654493e6644dc7$var$__importStar(parcelRequire("4NnDh")),$aa654493e6644dc7$var$skyboxcube=$aa654493e6644dc7$var$__importStar(parcelRequire("fg1RG")),$aa654493e6644dc7$var$objectlist=$aa654493e6644dc7$var$__importStar(parcelRequire("c52G2")),$aa654493e6644dc7$var$drawinstanced=$aa654493e6644dc7$var$__importStar(parcelRequire("ak2pE")),$aa654493e6644dc7$var$canvas3dtexture=$aa654493e6644dc7$var$__importStar(parcelRequire("6zGIt")),$aa654493e6644dc7$var$skeleton=$aa654493e6644dc7$var$__importStar(parcelRequire("i3iwe")),$aa654493e6644dc7$var$fishanimation=$aa654493e6644dc7$var$__importStar(parcelRequire("4McAy")),$aa654493e6644dc7$var$drawimagespace=$aa654493e6644dc7$var$__importStar(parcelRequire("04AkW")),$aa654493e6644dc7$var$animation1=$aa654493e6644dc7$var$__importStar(parcelRequire("27dBK")),$aa654493e6644dc7$var$animation2=$aa654493e6644dc7$var$__importStar(parcelRequire("gof5j")),$aa654493e6644dc7$var$skyboxscene=$aa654493e6644dc7$var$__importStar(parcelRequire("bHN59")),$aa654493e6644dc7$var$manytexturescene=$aa654493e6644dc7$var$__importStar(parcelRequire("fnNZ9")),$aa654493e6644dc7$var$rotatingcubescene=$aa654493e6644dc7$var$__importStar(parcelRequire("6lBjJ")),$aa654493e6644dc7$var$lightscene=$aa654493e6644dc7$var$__importStar(parcelRequire("fqOMx")),$aa654493e6644dc7$var$objectlistscene=$aa654493e6644dc7$var$__importStar(parcelRequire("4g5Nn")),$aa654493e6644dc7$var$canvas3dtexturescene=$aa654493e6644dc7$var$__importStar(parcelRequire("5AxOv")),$aa654493e6644dc7$var$drawinstancedscene=$aa654493e6644dc7$var$__importStar(parcelRequire("4PVcZ")),$aa654493e6644dc7$var$skyboxcubescene=$aa654493e6644dc7$var$__importStar(parcelRequire("i5pkR")),$aa654493e6644dc7$var$matobjscene=$aa654493e6644dc7$var$__importStar(parcelRequire("jekDm")),$aa654493e6644dc7$var$skeletonscene=$aa654493e6644dc7$var$__importStar(parcelRequire("lHumV")),$aa654493e6644dc7$var$fishanimationscene=$aa654493e6644dc7$var$__importStar(parcelRequire("6wRfj"));var $aa654493e6644dc7$var$baseapppars={move:!0,speed:.01,color0:"#A0A0A0"},$aa654493e6644dc7$var$defaultParameters={b:$aa654493e6644dc7$var$baseapppars,movetail:!0,texture:"geotriangle2",typelight:"point light",sling:117,shininess:11,fov:60};const $aa654493e6644dc7$var$ShowOBJMTL=1,$aa654493e6644dc7$var$ShowFish=3,$aa654493e6644dc7$var$ShowAnimation1=5;var $aa654493e6644dc7$var$selectedShow=$aa654493e6644dc7$var$ShowFish,$aa654493e6644dc7$var$cdiv="c";function $aa654493e6644dc7$var$preparedefaultparameters(e){switch($aa654493e6644dc7$var$selectedShow){case $aa654493e6644dc7$var$ShowFish:console.log("variousfish"),e.set("variousfish",""),e.set("radius0","90"),e.set("mesh","strip"),e.set("hx","1.2"),e.set("hy","0.1"),e.set("stride","180"),e.set("numrows","39");break;case $aa654493e6644dc7$var$ShowAnimation1:e.set("animation8",""),e.set("radius0","4"),e.set("hx","-0.06"),e.set("hy","0.47");break;case $aa654493e6644dc7$var$ShowOBJMTL:e.set("radius0","45"),e.set("hx","-0.68"),e.set("hy","0.47"),e.set("hxl","-0.61"),e.set("difflight","0.5"),e.set("speclight","0.5");break;default:return}}function $aa654493e6644dc7$var$initAnimation1Scene(e,t,n,r,i){document.getElementById("gridcells").style.gridTemplateRows=i+"px";var a=new $aa654493e6644dc7$var$animation1.Animation1(e,t,r,n,$aa654493e6644dc7$var$cdiv);return a.main(e,n),r.sceneenv<0?a.doShowBackgroundColorChoice=!0:null!=(null==n?void 0:n.get("backcolorchoice"))&&(a.doShowBackgroundColorChoice=+(null==n?void 0:n.get("backcolorchoice"))>0),a.initGUI($aa654493e6644dc7$var$defaultParameters),a}function $aa654493e6644dc7$var$initAnimation2Scene(e,t,n,r,i){document.getElementById("gridcells").style.gridTemplateRows=i+"px";var a=new $aa654493e6644dc7$var$animation2.Animation2(e,t,[r],n,$aa654493e6644dc7$var$cdiv);return a.main(e,n),r.sceneenv<0?a.doShowBackgroundColorChoice=!0:null!=(null==n?void 0:n.get("backcolorchoice"))&&(a.doShowBackgroundColorChoice=+(null==n?void 0:n.get("backcolorchoice"))>0),a.initGUI($aa654493e6644dc7$var$defaultParameters),a}function $aa654493e6644dc7$var$showOtherAnimations(e,t,n){if(null!=(null==n?void 0:n.get("drawimagespace"))){var r=new $aa654493e6644dc7$var$drawimagespace.drawimagespace(e,t,n,$aa654493e6644dc7$var$cdiv);return console.log("imscreated."),r.main(e,n),console.log("ins.main done."),r.initGUI({move:!1,teal:!0,speed:.4,texture:"geotriangle2",color0:"#D0A010"}),r}if(null!=(null==n?void 0:n.get("whalesapp"))){var i=new $aa654493e6644dc7$var$skeleton.Skeleton(e,t,n,$aa654493e6644dc7$var$cdiv),a={move:!0,speed:.4,color0:"#A0A0A0"};return i.initGUI({move:!1,movetail:!0,speed:.06,texture:"zelenskyy",color0:"#afb9af"}),i.main(e,n),i}if(null!=(null==n?void 0:n.get("variousfishapp"))){var o=new $aa654493e6644dc7$var$fishanimation.FishAnimation(e,t,n,$aa654493e6644dc7$var$cdiv);a={move:!0,speed:.4,color0:"#A0A0A0"};return o.initGUI({b:a,movetail:!0,texture:"geotriangle2",sling:117}),o.main(e,n),o}if(null!=(null==n?void 0:n.get("skyboxcube"))){var s=new $aa654493e6644dc7$var$skyboxcube.skyboxcube(e,t,n,$aa654493e6644dc7$var$cdiv);return s.main(e,n),s.initGUI({movecube:!1,moveenv:!1,fieldOfViewDegrees:32,radiusCam:5,angVelocityCam:.005,angVelocityCube:.003}),s}return null!=(null==n?void 0:n.get("canvas3dtexture"))?void(new $aa654493e6644dc7$var$canvas3dtexture.Canvas3dTexture).main(e):null!=(null==n?void 0:n.get("objectlist"))?void(new $aa654493e6644dc7$var$objectlist.ObjectList).main(e):null!=(null==n?void 0:n.get("drawinstanced"))?void(new $aa654493e6644dc7$var$drawinstanced.DrawInstanced).main(e):$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$matobjscene.MatObjScene(e,t,n),170)}function $aa654493e6644dc7$var$show(e,t,n){if(null!=(null==n?void 0:n.get("animation4"))){var r=$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$skyboxcubescene.SkyBoxCubeScene(e),70);r.scene.texture=r.skyboxtexture,console.log("assigned "+r.skyboxtexture+" to scene reflection texture")}else null!=(null==n?void 0:n.get("animation7"))?$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$drawinstancedscene.DrawInstancedScene(e),70):null!=(null==n?void 0:n.get("animation1"))?$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$rotatingcubescene.MixedTextureScene(e),70):null!=(null==n?void 0:n.get("animation5"))?$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$manytexturescene.ManyTexturesScene(e),70):null!=(null==n?void 0:n.get("animation3"))?$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$lightscene.LightScene(e),70):null!=(null==n?void 0:n.get("animation0"))?$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$skyboxscene.SkyBoxScene(e,n),70):null!=(null==n?void 0:n.get("animation6"))?$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$objectlistscene.ObjectListScene(e),70):null!=(null==n?void 0:n.get("whales"))?$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$skeletonscene.SkeletonScene(e,t,n,"c"),70):null!=(null==n?void 0:n.get("variousfish"))?$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$fishanimationscene.FishAnimationScene(e,t,n,"c"),70):null!=(null==n?void 0:n.get("animation8"))?$aa654493e6644dc7$var$initAnimation2Scene(e,t,n,new $aa654493e6644dc7$var$canvas3dtexturescene.Canvas3dTextureScene(e),70):$aa654493e6644dc7$var$showOtherAnimations(e,t,n)}function $aa654493e6644dc7$var$main(){var e=document.querySelector("#c"),t=e.getContext("webgl2",{premultipliedAlpha:!1});if(e&&t){var n,r,i=window.location.href;if(i.includes("?")){r=new Map;for(var a=i.indexOf("?"),o=i.substring(a+1),s="",l="";o.indexOf("&")>0;){var u=(s=o.substring(0,o.indexOf("&"))).indexOf("=");u>=0?(l=s.substring(0,u),s=s.substring(1+u),r.set(l,s)):r.set(s,""),o=o.substring(o.indexOf("&")+1)}(a=o.indexOf("="))>=0?(l=o.substring(0,a),s=o.substring(1+a),r.set(l,s)):r.set(o,"")}null==r&&(console.log("No URL arguments, prepare defaults for "+$aa654493e6644dc7$var$selectedShow),$aa654493e6644dc7$var$preparedefaultparameters(r=new Map)),r.forEach(((e,t)=>{console.log("UrlPars key="+t+" value="+e)})),(n=new $aa654493e6644dc7$var$mtls.MouseListener(e)).OnMouseWheel=e=>{document.getElementById("app").innerHTML="mousewheel: ["+e+"]"},n.OnMouseMove=e=>{document.getElementById("comment").innerHTML="mousemove: ["+e+"]"},n.OnMouseDown=e=>{document.getElementById("app").innerHTML="mousedown: ["+e+"]"},n.OnMouseUp=e=>{document.getElementById("app").innerHTML="mouseup: ["+e+"] "},$aa654493e6644dc7$var$show(t,n,r)}}$aa654493e6644dc7$var$main();
//# sourceMappingURL=index.0073792b.js.map
